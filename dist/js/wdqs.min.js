var wikibase;!function(c){(function(){window.Tags||(window.Tags={}),jQuery(function(){return c.tags=function(e,i){var t,r,a,n,s,o,u,l=this;for(t in null==i&&(i={}),i)n=i[t],this[t]=n;if(this.bootstrapVersion||(this.bootstrapVersion="3"),this.readOnly||(this.readOnly=!1),this.suggestOnClick||(this.suggestOnClick=!1),this.suggestions||(this.suggestions=[]),this.restrictTo=null!=i.restrictTo&&i.restrictTo.concat(this.suggestions),this.exclude||(this.exclude=!1),this.displayPopovers=null!=i.popovers||null!=i.popoverData,this.popoverTrigger||(this.popoverTrigger="hover"),this.tagClass||(this.tagClass="btn-info"),this.tagSize||(this.tagSize="md"),this.promptText||(this.promptText="Enter tags..."),this.caseInsensitive||(this.caseInsensitive=!1),this.readOnlyEmptyMessage||(this.readOnlyEmptyMessage="No tags to display..."),this.maxNumTags||(this.maxNumTags=-1),this.beforeAddingTag||(this.beforeAddingTag=function(){}),this.afterAddingTag||(this.afterAddingTag=function(){}),this.beforeDeletingTag||(this.beforeDeletingTag=function(){}),this.afterDeletingTag||(this.afterDeletingTag=function(){}),this.definePopover||(this.definePopover=function(e){return'associated content for "'+e+'"'}),this.excludes||(this.excludes=function(){return!1}),this.tagRemoved||(this.tagRemoved=function(){}),this.pressedReturn||(this.pressedReturn=function(){}),this.pressedDelete||(this.pressedDelete=function(){}),this.pressedDown||(this.pressedDown=function(){}),this.pressedUp||(this.pressedUp=function(){}),this.$element=c(e),null!=i.tagData?this.tagsArray=i.tagData:(a=c(".tag-data",this.$element).html(),this.tagsArray=null!=a?a.split(","):[]),i.popoverData)this.popoverArray=i.popoverData;else for(this.popoverArray=[],s=0,o=(u=this.tagsArray).length;s<o;s++)r=u[s],this.popoverArray.push(null);return this.getTags=function(){return l.tagsArray},this.getTagsContent=function(){return l.popoverArray},this.getTagsWithContent=function(){var e,t,r,i;for(e=[],t=r=0,i=l.tagsArray.length-1;0<=i?r<=i:i<=r;t=0<=i?++r:--r)e.push({tag:l.tagsArray[t],content:l.popoverArray[t]});return e},this.getTag=function(e){var t;return-1<(t=l.tagsArray.indexOf(e))?l.tagsArray[t]:null},this.getTagWithContent=function(e){var t;return t=l.tagsArray.indexOf(e),{tag:l.tagsArray[t],content:l.popoverArray[t]}},this.hasTag=function(e){return-1<l.tagsArray.indexOf(e)},this.removeTagClicked=function(e){return"A"===e.currentTarget.tagName&&(l.removeTag(c("span",e.currentTarget.parentElement).html()),c(e.currentTarget.parentNode).remove()),l},this.removeLastTag=function(){return 0<l.tagsArray.length&&(l.removeTag(l.tagsArray[l.tagsArray.length-1]),l.canAddByMaxNum()&&l.enableInput()),l},this.removeTag=function(e){if(-1<l.tagsArray.indexOf(e)){if(!1===l.beforeDeletingTag(e))return;l.popoverArray.splice(l.tagsArray.indexOf(e),1),l.tagsArray.splice(l.tagsArray.indexOf(e),1),l.renderTags(),l.afterDeletingTag(e),l.canAddByMaxNum()&&l.enableInput()}return l},this.canAddByRestriction=function(e){return!1===this.restrictTo||-1!==this.restrictTo.indexOf(e)},this.canAddByExclusion=function(e){return(!1===this.exclude||-1===this.exclude.indexOf(e))&&!this.excludes(e)},this.canAddByMaxNum=function(){return-1===this.maxNumTags||this.tagsArray.length<this.maxNumTags},this.addTag=function(e){var t;if(l.canAddByRestriction(e)&&!l.hasTag(e)&&0<e.length&&l.canAddByExclusion(e)&&l.canAddByMaxNum()){if(!1===l.beforeAddingTag(e))return;t=l.definePopover(e),l.popoverArray.push(t||null),l.tagsArray.push(e),l.afterAddingTag(e),l.renderTags(),l.canAddByMaxNum()||l.disableInput()}return l},this.addTagWithContent=function(e,t){if(l.canAddByRestriction(e)&&!l.hasTag(e)&&0<e.length){if(!1===l.beforeAddingTag(e))return;l.tagsArray.push(e),l.popoverArray.push(t),l.afterAddingTag(e),l.renderTags()}return l},this.renameTag=function(e,t){return l.tagsArray[l.tagsArray.indexOf(e)]=t,l.renderTags(),l},this.setPopover=function(e,t){return l.popoverArray[l.tagsArray.indexOf(e)]=t,l.renderTags(),l},this.clickHandler=function(e){return l.makeSuggestions(e,!0)},this.keyDownHandler=function(e){var t;switch(null!=e.keyCode?e.keyCode:e.which){case 13:return e.preventDefault(),l.pressedReturn(e),r=e.target.value,-1!==l.suggestedIndex&&(r=l.suggestionList[l.suggestedIndex]),l.addTag(r),e.target.value="",l.renderTags(),l.hideSuggestions();case 46:case 8:if(l.pressedDelete(e),""===e.target.value&&l.removeLastTag(),1===e.target.value.length)return l.hideSuggestions();break;case 40:if(l.pressedDown(e),""!==l.input.val()||-1!==l.suggestedIndex&&null!=l.suggestedIndex||l.makeSuggestions(e,!0),t=l.suggestionList.length,l.suggestedIndex=l.suggestedIndex<t-1?l.suggestedIndex+1:t-1,l.selectSuggested(l.suggestedIndex),0<=l.suggestedIndex)return l.scrollSuggested(l.suggestedIndex);break;case 38:if(l.pressedUp(e),l.suggestedIndex=0<l.suggestedIndex?l.suggestedIndex-1:0,l.selectSuggested(l.suggestedIndex),0<=l.suggestedIndex)return l.scrollSuggested(l.suggestedIndex);break;case 9:case 27:return l.hideSuggestions(),l.suggestedIndex=-1}},this.keyUpHandler=function(e){var t;return 40!==(t=null!=e.keyCode?e.keyCode:e.which)&&38!==t&&27!==t?l.makeSuggestions(e,!1):void 0},this.getSuggestions=function(i,a){var n=this;return this.suggestionList=[],this.caseInsensitive&&(i=i.toLowerCase()),c.each(this.suggestions,function(e,t){var r;return r=n.caseInsensitive?t.substring(0,i.length).toLowerCase():t.substring(0,i.length),n.tagsArray.indexOf(t)<0&&r===i&&(0<i.length||a)?n.suggestionList.push(t):void 0}),this.suggestionList},this.makeSuggestions=function(e,t,r){return null==r&&(r=null!=e.target.value?e.target.value:e.target.textContent),l.suggestedIndex=-1,l.$suggestionList.html(""),c.each(l.getSuggestions(r,t),function(e,t){return l.$suggestionList.append(l.template("tags_suggestion",{suggestion:t}))}),l.$(".tags-suggestion").mouseover(l.selectSuggestedMouseOver),l.$(".tags-suggestion").click(l.suggestedClicked),0<l.suggestionList.length?l.showSuggestions():l.hideSuggestions()},this.suggestedClicked=function(e){return r=e.target.textContent,-1!==l.suggestedIndex&&(r=l.suggestionList[l.suggestedIndex]),l.addTag(r),l.input.val(""),l.makeSuggestions(e,!1,""),l.input.focus(),l.hideSuggestions()},this.hideSuggestions=function(){return l.$(".tags-suggestion-list").css({display:"none"})},this.showSuggestions=function(){return l.$(".tags-suggestion-list").css({display:"block"})},this.selectSuggestedMouseOver=function(e){return c(".tags-suggestion").removeClass("tags-suggestion-highlighted"),c(e.target).addClass("tags-suggestion-highlighted"),c(e.target).mouseout(l.selectSuggestedMousedOut),l.suggestedIndex=l.$(".tags-suggestion").index(c(e.target))},this.selectSuggestedMousedOut=function(e){return c(e.target).removeClass("tags-suggestion-highlighted")},this.selectSuggested=function(e){return c(".tags-suggestion").removeClass("tags-suggestion-highlighted"),l.$(".tags-suggestion").eq(e).addClass("tags-suggestion-highlighted")},this.scrollSuggested=function(e){var t,r,i,a;return r=l.$(".tags-suggestion").eq(e),i=l.$(".tags-suggestion").eq(0),t=r.position(),a=i.position(),null!=t?l.$(".tags-suggestion-list").scrollTop(t.top-a.top):void 0},this.adjustInputPosition=function(){var e,t,r,i,a,n;return t=null!=(n=(a=l.$(".tag").last()).position())?n.left+a.outerWidth(!0):0,r=null!=n?n.top:0,i=l.$element.width()-t,c(".tags-input",l.$element).css({paddingLeft:Math.max(t,0),paddingTop:Math.max(r,0),width:i}),e=null!=n?n.top+a.outerHeight(!0):22,l.$element.css({paddingBottom:e-l.$element.height()})},this.renderTags=function(){var r;return(r=l.$(".tags")).html(""),l.input.attr("placeholder",0===l.tagsArray.length?l.promptText:""),c.each(l.tagsArray,function(e,t){return t=c(l.formatTag(e,t)),c("a",t).click(l.removeTagClicked),c("a",t).mouseover(l.toggleCloseColor),c("a",t).mouseout(l.toggleCloseColor),l.displayPopovers&&l.initializePopoverFor(t,l.tagsArray[e],l.popoverArray[e]),r.append(t)}),l.adjustInputPosition()},this.renderReadOnly=function(){var r;return(r=l.$(".tags")).html(0===l.tagsArray.length?l.readOnlyEmptyMessage:""),c.each(l.tagsArray,function(e,t){return t=c(l.formatTag(e,t,!0)),l.displayPopovers&&l.initializePopoverFor(t,l.tagsArray[e],l.popoverArray[e]),r.append(t)})},this.disableInput=function(){return this.$("input").prop("disabled",!0)},this.enableInput=function(){return this.$("input").prop("disabled",!1)},this.initializePopoverFor=function(e,t,r){return i={title:t,content:r,placement:"bottom"},"hoverShowClickHide"===l.popoverTrigger?(c(e).mouseover(function(){return c(e).popover("show"),c(".tag").not(e).popover("hide")}),c(document).click(function(){return c(e).popover("hide")})):i.trigger=l.popoverTrigger,c(e).popover(i)},this.toggleCloseColor=function(e){var t,r;return t=(t=(r=c(e.currentTarget)).css("opacity"))<.8?1:.6,r.css({opacity:t})},this.formatTag=function(e,t,r){var i;return null==r&&(r=!1),i=t.replace("<","&lt;").replace(">","&gt;"),l.template("tag",{tag:i,tagClass:l.tagClass,isPopover:l.displayPopovers,isReadOnly:r,tagSize:l.tagSize})},this.addDocumentListeners=function(){return c(document).mouseup(function(e){return 0===l.$(".tags-suggestion-list").has(e.target).length?l.hideSuggestions():void 0})},this.template=function(e,t){return Tags.Templates.Template(this.getBootstrapVersion(),e,t)},this.$=function(e){return c(e,this.$element)},this.getBootstrapVersion=function(){return Tags.bootstrapVersion||this.bootstrapVersion},this.initializeDom=function(){return this.$element.append(this.template("tags_container"))},this.init=function(){return this.$element.addClass("bootstrap-tags").addClass("bootstrap-"+this.getBootstrapVersion()),this.initializeDom(),this.readOnly?(this.renderReadOnly(),this.removeTag=function(){},this.removeTagClicked=function(){},this.removeLastTag=function(){},this.addTag=function(){},this.addTagWithContent=function(){},this.renameTag=function(){},this.setPopover=function(){}):(this.input=c(this.template("input",{tagSize:this.tagSize})),this.suggestOnClick&&this.input.click(this.clickHandler),this.input.keydown(this.keyDownHandler),this.input.keyup(this.keyUpHandler),this.$element.append(this.input),this.$suggestionList=c(this.template("suggestion_list")),this.$element.append(this.$suggestionList),this.renderTags(),this.canAddByMaxNum()||this.disableInput(),this.addDocumentListeners())},this.init(),this},c.fn.tags=function(i){var a,n;return n={},a="number"==typeof i?i:-1,this.each(function(e,t){var r;return null==(r=c(t)).data("tags")&&r.data("tags",new c.tags(this,i)),a===e||0===e?n=r.data("tags"):void 0}),n}})}).call(this),function(){window.Tags||(window.Tags={}),Tags.Helpers||(Tags.Helpers={}),Tags.Helpers.addPadding=function(e,t,r){return null==t&&(t=1),null==r&&(r=!0),r?0===t?e:Tags.Helpers.addPadding("&nbsp"+e+"&nbsp",t-1):e}}.call(this),function(){var e;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(e=Tags.Templates)[2]||(e[2]={}),Tags.Templates[2].input=function(e){return null==e&&(e={}),"<input type='text' class='tags-input input-"+function(){switch(e.tagSize){case"sm":return"small";case"md":return"medium";case"lg":return"large"}}()+"' />"}}.call(this),function(){var e;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(e=Tags.Templates)[2]||(e[2]={}),Tags.Templates[2].tag=function(e){return null==e&&(e={}),"<div class='tag label "+e.tagClass+" "+e.tagSize+"' "+(e.isPopover?"rel='popover'":"")+">    <span>"+Tags.Helpers.addPadding(e.tag,2,e.isReadOnly)+"</span>    "+(e.isReadOnly?"":"<a><i class='remove icon-remove-sign icon-white' /></a>")+"  </div>"}}.call(this),function(){var e;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(e=Tags.Templates)[3]||(e[3]={}),Tags.Templates[3].input=function(e){return null==e&&(e={}),"<input type='text' class='form-control tags-input input-"+e.tagSize+"' />"}}.call(this),function(){var e;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(e=Tags.Templates)[3]||(e[3]={}),Tags.Templates[3].tag=function(e){return null==e&&(e={}),"<div class='tag label "+e.tagClass+" "+e.tagSize+"' "+(e.isPopover?"rel='popover'":"")+">    <span>"+Tags.Helpers.addPadding(e.tag,2,e.isReadOnly)+"</span>    "+(e.isReadOnly?"":"<a><i class='remove glyphicon glyphicon-remove-sign glyphicon-white' /></a>")+"  </div>"}}.call(this),function(){var e;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(e=Tags.Templates).shared||(e.shared={}),Tags.Templates.shared.suggestion_list=function(e){return null==e&&(e={}),'<ul class="tags-suggestion-list dropdown-menu"></ul>'}}.call(this),function(){var e;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(e=Tags.Templates).shared||(e.shared={}),Tags.Templates.shared.tags_container=function(e){return null==e&&(e={}),'<div class="tags"></div>'}}.call(this),function(){var e;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(e=Tags.Templates).shared||(e.shared={}),Tags.Templates.shared.tags_suggestion=function(e){return null==e&&(e={}),"<li class='tags-suggestion'>"+e.suggestion+"</li>"}}.call(this),function(){window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),Tags.Templates.Template=function(e,t,r){return null!=Tags.Templates[e]&&null!=Tags.Templates[e][t]?Tags.Templates[e][t](r):Tags.Templates.shared[t](r)}}.call(this)}(window.jQuery),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).sparqljs=e()}}(function(){return function n(s,o,u){function l(t,e){if(!o[t]){if(!s[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(c)return c(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var a=o[t]={exports:{}};s[t][0].call(a.exports,function(e){return l(s[t][1][e]||e)},a,a.exports,n,s,o,u)}return o[t].exports}for(var c="function"==typeof require&&require,e=0;e<u.length;e++)l(u[e]);return l}({1:[function(e,t,r){},{}],2:[function(e,t,r){function i(e,t){this._options=e=e||{},t=t||{},this._prefixByIri={};var r=[];for(var i in t){var a=t[i];l(a)&&(this._prefixByIri[a]=i,r.push(a))}var n=r.join("|").replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&");this._prefixRegex=new RegExp("^("+n+")([a-zA-Z][\\-_a-zA-Z0-9]*)$"),this._usedPrefixes={},this._indent=l(e.indent)?e.indent:"  ",this._newline=l(e.newline)?e.newline:"\n"}i.prototype.toQuery=function(e){var t="";return e.queryType&&(t+=e.queryType.toUpperCase()+" "),e.reduced&&(t+="REDUCED "),e.distinct&&(t+="DISTINCT "),e.variables?t+=n(e.variables,void 0,function(e){return l(e)?this.toEntity(e):"("+this.toExpression(e.expression)+" AS "+e.variable+")"},this)+" ":e.template&&(t+=this.group(e.template,!0)+this._newline),e.from&&(t+=n(e.from.default||[],"",function(e){return"FROM "+this.toEntity(e)+this._newline},this)+n(e.from.named||[],"",function(e){return"FROM NAMED "+this.toEntity(e)+this._newline},this)),e.where&&(t+="WHERE "+this.group(e.where,!0)+this._newline),e.updates&&(t+=n(e.updates,";"+this._newline,this.toUpdate,this)),e.group&&(t+="GROUP BY "+n(e.group,void 0,function(e){var t=l(e.expression)?e.expression:"("+this.toExpression(e.expression)+")";return e.variable?"("+t+" AS "+e.variable+")":t},this)+this._newline),e.having&&(t+="HAVING ("+n(e.having,void 0,this.toExpression,this)+")"+this._newline),e.order&&(t+="ORDER BY "+n(e.order,void 0,function(e){var t="("+this.toExpression(e.expression)+")";return e.descending?"DESC "+t:t},this)+this._newline),e.offset&&(t+="OFFSET "+e.offset+this._newline),e.limit&&(t+="LIMIT "+e.limit+this._newline),e.values&&(t+=this.values(e)),(t=this.baseAndPrefixes(e)+t).trim()},i.prototype.baseAndPrefixes=function(e){var t=e.base?"BASE <"+e.base+">"+this._newline:"",r="";for(var i in e.prefixes)(this._options.allPrefixes||this._usedPrefixes[i])&&(r+="PREFIX "+i+": <"+e.prefixes[i]+">"+this._newline);return t+r},i.prototype.toPattern=function(e){var t=e.type||e instanceof Array&&"array"||(e.subject&&e.predicate&&e.object?"triple":"");if(!(t in this))throw new Error("Unknown entry type: "+t);return this[t](e)},i.prototype.triple=function(e){return this.toEntity(e.subject)+" "+this.toEntity(e.predicate)+" "+this.toEntity(e.object)+"."},i.prototype.array=function(e){return n(e,this._newline,this.toPattern,this)},i.prototype.bgp=function(e){return this.encodeTriples(e.triples)},i.prototype.encodeTriples=function(e){if(!e.length)return"";for(var t=[],r="",i="",a=0;a<e.length;a++){var n=e[a];n.subject!==r?(r&&t.push("."+this._newline),r=n.subject,i=n.predicate,t.push(this.toEntity(r)," ",this.toEntity(i))):n.predicate!==i?(i=n.predicate,t.push(";"+this._newline,this._indent,this.toEntity(i))):t.push(","),t.push(" ",this.toEntity(n.object))}return t.push("."),t.join("")},i.prototype.graph=function(e){return"GRAPH "+this.toEntity(e.name)+" "+this.group(e)},i.prototype.group=function(e,t){return-1===(e=!0!==t?this.array(e.patterns||e.triples):this.toPattern("group"!==e.type?e:e.patterns)).indexOf(this._newline)?"{ "+e+" }":"{"+this._newline+this.indent(e)+this._newline+"}"},i.prototype.query=function(e){return this.toQuery(e)},i.prototype.filter=function(e){return"FILTER("+this.toExpression(e.expression)+")"},i.prototype.bind=function(e){return"BIND("+this.toExpression(e.expression)+" AS "+e.variable+")"},i.prototype.optional=function(e){return"OPTIONAL "+this.group(e)},i.prototype.union=function(e){return n(e.patterns,this._newline+"UNION"+this._newline,function(e){return this.group(e,!0)},this)},i.prototype.minus=function(e){return"MINUS "+this.group(e)},i.prototype.values=function(e){var r,i,a=Object.keys(e.values.reduce(function(e,t){for(var r in t)e[r]=!0;return e},{}));return 1===a.length?r=i="":(r="(",i=")"),"VALUES "+r+a.join(" ")+i+" {"+this._newline+n(e.values,this._newline,function(t){return"  "+r+n(a,void 0,function(e){return void 0!==t[e]?this.toEntity(t[e]):"UNDEF"},this)+i},this)+this._newline+"}"},i.prototype.service=function(e){return"SERVICE "+(e.silent?"SILENT ":"")+this.toEntity(e.name)+" "+this.group(e)},i.prototype.toExpression=function(e){if(l(e))return this.toEntity(e);switch(e.type.toLowerCase()){case"aggregate":return e.aggregation.toUpperCase()+"("+(e.distinct?"DISTINCT ":"")+this.toExpression(e.expression)+(e.separator?"; SEPARATOR = "+this.toEntity('"'+e.separator+'"'):"")+")";case"functioncall":return this.toEntity(e.function)+"("+n(e.args,", ",this.toExpression,this)+")";case"operation":var t=e.operator.toUpperCase(),r=e.args||[];switch(e.operator.toLowerCase()){case"<":case">":case">=":case"<=":case"&&":case"||":case"=":case"!=":case"+":case"-":case"*":case"/":return(l(r[0])?this.toEntity(r[0]):"("+this.toExpression(r[0])+")")+" "+t+" "+(l(r[1])?this.toEntity(r[1]):"("+this.toExpression(r[1])+")");case"!":return"!("+this.toExpression(r[0])+")";case"notin":t="NOT IN";case"in":return this.toExpression(r[0])+" "+t+"("+(l(r[1])?r[1]:n(r[1],", ",this.toExpression,this))+")";case"notexists":t="NOT EXISTS";case"exists":return t+" "+this.group(r[0],!0);default:return t+"("+n(r,", ",this.toExpression,this)+")"}default:throw new Error("Unknown expression type: "+e.type)}},i.prototype.toEntity=function(e){if(l(e))switch(e[0]){case"?":case"$":case"*":case"_":return e;case'"':var t=e.match(/^"([^]*)"(?:(@.+)|\^\^(.+))?$/)||{},r=t[1]||"",i=t[2]||"",a=t[3];if(e='"'+r.replace(o,u)+'"'+i,a){if("http://www.w3.org/2001/XMLSchema#integer"===a&&/^\d+$/.test(r))return r+" ";e+="^^"+this.encodeIRI(a)}return e;default:return this.encodeIRI(e)}else{var n=e.items.map(this.toEntity,this),s=e.pathType;switch(s){case"^":case"!":return s+n[0];case"*":case"+":case"?":return"("+n[0]+s+")";default:return"("+n.join(s)+")"}}};var o=/["\\\t\n\r\b\f]/g,u=function(e){return a[e]},a={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};function l(e){return"string"==typeof e}function n(e,t,r,i){return e.map(r,i).join(l(t)?t:" ")}i.prototype.encodeIRI=function(e){var t=this._prefixRegex.exec(e);if(t){var r=this._prefixByIri[t[1]];return this._usedPrefixes[r]=!0,r+":"+t[2]}return"<"+e+">"},i.prototype.toUpdate=function(e){switch(e.type||e.updateType){case"load":return"LOAD"+(e.source?" "+this.toEntity(e.source):"")+(e.destination?" INTO GRAPH "+this.toEntity(e.destination):"");case"insert":return"INSERT DATA "+this.group(e.insert,!0);case"delete":return"DELETE DATA "+this.group(e.delete,!0);case"deletewhere":return"DELETE WHERE "+this.group(e.delete,!0);case"insertdelete":return(e.graph?"WITH "+this.toEntity(e.graph)+this._newline:"")+(e.delete.length?"DELETE "+this.group(e.delete,!0)+this._newline:"")+(e.insert.length?"INSERT "+this.group(e.insert,!0)+this._newline:"")+"WHERE "+this.group(e.where,!0);case"add":case"copy":case"move":return e.type.toUpperCase()+(e.source.default?" DEFAULT ":" ")+"TO "+this.toEntity(e.destination.name);case"clear":case"drop":return e.type.toUpperCase()+(e.silent?" SILENT ":" ")+(e.graph.default?"DEFAULT":e.graph.named?"NAMED":e.graph.all?"ALL":"GRAPH "+this.toEntity(e.graph.name));default:throw new Error("Unknown update query type: "+e.type)}},i.prototype.indent=function(e){return e.replace(/^/gm,this._indent)},t.exports=function(t){return{stringify:function(e){return new i(t,e.prefixes).toQuery(e)}}}},{}],3:[function(i,t,a){(function(r){var e=function(){var e=function(e,t,r,i){for(r=r||{},i=e.length;i--;r[e[i]]=t);return r},t=[6,12,15,24,34,43,48,99,109,112,114,115,124,125,130,298,299,300,301,302],r=[2,196],i=[99,109,112,114,115,124,125,130,298,299,300,301,302],a=[1,18],n=[1,27],s=[6,83],o=[38,39,51],u=[38,51],l=[1,55],c=[1,57],p=[1,53],h=[1,56],d=[28,29,293],g=[13,16,286],y=[111,133,296,303],f=[13,16,111,133,286],w=[1,80],m=[1,84],_=[1,86],b=[111,133,296,297,303],v=[13,16,111,133,286,297],k=[1,92],S=[2,236],E=[1,91],T=[13,16,28,29,80,86,215,218,219,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286],C=[6,38,39,51,61,68,71,79,81,83],q=[6,13,16,28,38,39,51,61,68,71,79,81,83,286],F=[6,13,16,28,29,31,32,38,39,41,51,61,68,71,79,80,81,83,86,92,108,111,124,125,127,132,159,160,162,165,166,183,187,208,213,215,216,218,219,223,227,231,246,251,268,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,293,304,306,307,309,310,311,312,313,314,315,316],A=[1,107],x=[1,108],R=[6,13,16,28,29,39,41,80,83,86,111,159,160,162,165,166,215,218,219,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,304],L=[2,295],I=[1,125],D=[1,123],N=[6,183],O=[2,312],B=[2,300],P=[38,127],U=[6,41,68,71,79,81,83],M=[2,238],$=[1,139],H=[1,141],G=[1,151],Q=[1,157],j=[1,160],V=[1,156],W=[1,158],z=[1,154],Y=[1,155],X=[1,161],K=[1,162],Z=[1,165],J=[1,166],ee=[1,167],te=[1,168],re=[1,169],ie=[1,170],ae=[1,171],ne=[1,172],se=[1,173],oe=[1,174],ue=[1,175],le=[1,176],ce=[6,61,68,71,79,81,83],pe=[28,29,38,39,51],he=[13,16,28,29,80,248,249,250,252,254,255,257,258,261,263,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,316,317,318,319,320,321],de=[2,409],ge=[1,189],ye=[1,190],fe=[1,191],we=[13,16,41,80,92,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286],me=[41,86],_e=[28,32],be=[6,108,183],ve=[41,111],ke=[6,41,71,79,81,83],Se=[2,324],Ee=[2,316],Te=[1,226],Ce=[1,228],qe=[41,111,304],Fe=[13,16,28,29,32,39,41,80,83,86,111,159,160,162,165,166,183,187,208,213,215,216,218,219,251,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,304],Ae=[13,16,28,29,31,32,39,41,80,83,86,92,111,159,160,162,165,166,183,187,208,213,215,216,218,219,223,227,231,246,251,268,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,293,304,307,310,311,312,313,314,315,316],xe=[13,16,28,29,31,32,39,41,80,83,86,92,111,159,160,162,165,166,183,187,208,213,215,216,218,219,223,227,231,246,251,268,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,293,304,307,310,311,312,313,314,315,316],Re=[31,32,183,223,251],Le=[31,32,183,223,227,251],Ie=[31,32,183,223,227,231,246,251,268,280,281,282,283,284,285,310,311,312,313,314,315,316],De=[31,32,183,223,227,231,246,251,268,280,281,282,283,284,285,293,307,310,311,312,313,314,315,316],Ne=[1,260],Oe=[1,261],Be=[1,263],Pe=[1,264],Ue=[1,265],Me=[1,266],$e=[1,268],He=[1,269],Ge=[2,416],Qe=[1,271],je=[1,272],Ve=[1,273],We=[1,279],ze=[1,274],Ye=[1,275],Xe=[1,276],Ke=[1,277],Ze=[1,278],Je=[1,286],et=[1,299],tt=[6,41,79,81,83],rt=[1,316],it=[1,315],at=[39,41,83,111,159,160,162,165,166],nt=[1,324],st=[1,325],ot=[41,111,183,216,304],ut=[2,354],lt=[13,16,28,29,32,80,86,215,218,219,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286],ct=[13,16,28,29,32,39,41,80,83,86,111,159,160,162,165,166,183,215,216,218,219,251,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,304],pt=[13,16,28,29,80,208,246,248,249,250,252,254,255,257,258,261,263,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,310,316,317,318,319,320,321],ht=[1,349],dt=[1,350],gt=[1,352],yt=[1,351],ft=[6,13,16,28,29,31,32,39,41,68,71,74,76,79,80,81,83,86,111,159,160,162,165,166,183,215,218,219,223,227,231,246,248,249,250,251,252,254,255,257,258,261,263,268,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,293,304,307,310,311,312,313,314,315,316,317,318,319,320,321],wt=[1,360],mt=[1,359],_t=[29,86],bt=[13,16,32,41,80,92,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286],vt=[29,41],kt=[2,315],St=[6,41,83],Et=[6,13,16,29,41,71,79,81,83,248,249,250,252,254,255,257,258,261,263,286,316,317,318,319,320,321],Tt=[6,13,16,28,29,39,41,71,74,76,79,80,81,83,86,111,159,160,162,165,166,215,218,219,248,249,250,252,254,255,257,258,261,263,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,304,316,317,318,319,320,321],Ct=[6,13,16,28,29,41,68,71,79,81,83,248,249,250,252,254,255,257,258,261,263,286,316,317,318,319,320,321],qt=[6,13,16,28,29,31,32,39,41,61,68,71,74,76,79,80,81,83,86,111,159,160,162,165,166,183,215,218,219,223,227,231,246,248,249,250,251,252,254,255,257,258,261,263,268,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,293,304,305,307,310,311,312,313,314,315,316,317,318,319,320,321],Ft=[13,16,29,187,208,213,286],At=[2,366],xt=[1,401],Rt=[39,41,83,111,159,160,162,165,166,304],Lt=[13,16,28,29,32,39,41,80,83,86,111,159,160,162,165,166,183,187,215,216,218,219,251,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,304],It=[13,16,28,29,80,208,246,248,249,250,252,254,255,257,258,261,263,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,293,310,316,317,318,319,320,321],Dt=[1,450],Nt=[1,447],Ot=[1,448],Bt=[13,16,28,29,39,41,80,83,86,111,159,160,162,165,166,215,218,219,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286],Pt=[13,16,28,286],Ut=[13,16,28,29,39,41,80,83,86,111,159,160,162,165,166,215,218,219,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,304],Mt=[2,327],$t=[39,41,83,111,159,160,162,165,166,183,216,304],Ht=[6,13,16,28,29,41,74,76,79,81,83,248,249,250,252,254,255,257,258,261,263,286,316,317,318,319,320,321],Gt=[2,322],Qt=[13,16,29,187,208,286],jt=[13,16,32,80,92,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286],Vt=[13,16,28,29,41,80,86,111,215,218,219,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286],Wt=[13,16,28,29,32,80,86,215,218,219,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,306,307],zt=[13,16,28,29,32,80,86,215,218,219,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,293,306,307,309,310],Yt=[1,561],Xt=[1,562],Kt=[2,310],Zt=[13,16,32,187,213,286],Jt={trace:function(){},yy:{},symbols_:{error:2,QueryOrUpdate:3,Prologue:4,QueryOrUpdate_group0:5,EOF:6,Prologue_repetition0:7,Query:8,Query_group0:9,Query_option0:10,BaseDecl:11,BASE:12,IRIREF:13,PrefixDecl:14,PREFIX:15,PNAME_NS:16,SelectQuery:17,SelectClause:18,SelectQuery_repetition0:19,WhereClause:20,SolutionModifier:21,SubSelect:22,SubSelect_option0:23,SELECT:24,SelectClause_option0:25,SelectClause_group0:26,SelectClauseItem:27,VAR:28,"(":29,Expression:30,AS:31,")":32,ConstructQuery:33,CONSTRUCT:34,ConstructTemplate:35,ConstructQuery_repetition0:36,ConstructQuery_repetition1:37,WHERE:38,"{":39,ConstructQuery_option0:40,"}":41,DescribeQuery:42,DESCRIBE:43,DescribeQuery_group0:44,DescribeQuery_repetition0:45,DescribeQuery_option0:46,AskQuery:47,ASK:48,AskQuery_repetition0:49,DatasetClause:50,FROM:51,DatasetClause_option0:52,iri:53,WhereClause_option0:54,GroupGraphPattern:55,SolutionModifier_option0:56,SolutionModifier_option1:57,SolutionModifier_option2:58,SolutionModifier_option3:59,GroupClause:60,GROUP:61,BY:62,GroupClause_repetition_plus0:63,GroupCondition:64,BuiltInCall:65,FunctionCall:66,HavingClause:67,HAVING:68,HavingClause_repetition_plus0:69,OrderClause:70,ORDER:71,OrderClause_repetition_plus0:72,OrderCondition:73,ASC:74,BrackettedExpression:75,DESC:76,Constraint:77,LimitOffsetClauses:78,LIMIT:79,INTEGER:80,OFFSET:81,ValuesClause:82,VALUES:83,InlineData:84,InlineData_repetition0:85,NIL:86,InlineData_repetition1:87,InlineData_repetition_plus2:88,InlineData_repetition3:89,DataBlockValue:90,Literal:91,UNDEF:92,DataBlockValueList:93,DataBlockValueList_repetition_plus0:94,Update:95,Update_repetition0:96,Update1:97,Update_option0:98,LOAD:99,Update1_option0:100,Update1_option1:101,Update1_group0:102,Update1_option2:103,GraphRefAll:104,Update1_group1:105,Update1_option3:106,GraphOrDefault:107,TO:108,CREATE:109,Update1_option4:110,GRAPH:111,INSERTDATA:112,QuadPattern:113,DELETEDATA:114,DELETEWHERE:115,Update1_option5:116,InsertClause:117,Update1_option6:118,Update1_repetition0:119,Update1_option7:120,DeleteClause:121,Update1_option8:122,Update1_repetition1:123,DELETE:124,INSERT:125,UsingClause:126,USING:127,UsingClause_option0:128,WithClause:129,WITH:130,IntoGraphClause:131,INTO:132,DEFAULT:133,GraphOrDefault_option0:134,GraphRefAll_group0:135,QuadPattern_option0:136,QuadPattern_repetition0:137,QuadsNotTriples:138,QuadsNotTriples_group0:139,QuadsNotTriples_option0:140,QuadsNotTriples_option1:141,QuadsNotTriples_option2:142,TriplesTemplate:143,TriplesTemplate_repetition0:144,TriplesSameSubject:145,TriplesTemplate_option0:146,GroupGraphPatternSub:147,GroupGraphPatternSub_option0:148,GroupGraphPatternSub_repetition0:149,GroupGraphPatternSubTail:150,GraphPatternNotTriples:151,GroupGraphPatternSubTail_option0:152,GroupGraphPatternSubTail_option1:153,TriplesBlock:154,TriplesBlock_repetition0:155,TriplesSameSubjectPath:156,TriplesBlock_option0:157,GraphPatternNotTriples_repetition0:158,OPTIONAL:159,MINUS:160,GraphPatternNotTriples_group0:161,SERVICE:162,GraphPatternNotTriples_option0:163,GraphPatternNotTriples_group1:164,FILTER:165,BIND:166,FunctionCall_option0:167,FunctionCall_repetition0:168,ExpressionList:169,ExpressionList_repetition0:170,ConstructTemplate_option0:171,ConstructTriples:172,ConstructTriples_repetition0:173,ConstructTriples_option0:174,VarOrTerm:175,PropertyListNotEmpty:176,TriplesNode:177,PropertyList:178,PropertyList_option0:179,VerbObjectList:180,PropertyListNotEmpty_repetition0:181,SemiOptionalVerbObjectList:182,";":183,SemiOptionalVerbObjectList_option0:184,Verb:185,ObjectList:186,a:187,ObjectList_repetition0:188,GraphNode:189,PropertyListPathNotEmpty:190,TriplesNodePath:191,TriplesSameSubjectPath_option0:192,PropertyListPathNotEmpty_group0:193,PropertyListPathNotEmpty_repetition0:194,GraphNodePath:195,PropertyListPathNotEmpty_repetition1:196,PropertyListPathNotEmptyTail:197,PropertyListPathNotEmptyTail_group0:198,Path:199,Path_repetition0:200,PathSequence:201,PathSequence_repetition0:202,PathEltOrInverse:203,PathElt:204,PathPrimary:205,PathElt_option0:206,PathEltOrInverse_option0:207,"!":208,PathNegatedPropertySet:209,PathOneInPropertySet:210,PathNegatedPropertySet_repetition0:211,PathNegatedPropertySet_option0:212,"^":213,TriplesNode_repetition_plus0:214,"[":215,"]":216,TriplesNodePath_repetition_plus0:217,BLANK_NODE_LABEL:218,ANON:219,ConditionalAndExpression:220,Expression_repetition0:221,ExpressionTail:222,"||":223,RelationalExpression:224,ConditionalAndExpression_repetition0:225,ConditionalAndExpressionTail:226,"&&":227,AdditiveExpression:228,RelationalExpression_group0:229,RelationalExpression_option0:230,IN:231,MultiplicativeExpression:232,AdditiveExpression_repetition0:233,AdditiveExpressionTail:234,AdditiveExpressionTail_group0:235,NumericLiteralPositive:236,AdditiveExpressionTail_repetition0:237,NumericLiteralNegative:238,AdditiveExpressionTail_repetition1:239,UnaryExpression:240,MultiplicativeExpression_repetition0:241,MultiplicativeExpressionTail:242,MultiplicativeExpressionTail_group0:243,UnaryExpression_option0:244,PrimaryExpression:245,"-":246,Aggregate:247,FUNC_ARITY0:248,FUNC_ARITY1:249,FUNC_ARITY2:250,",":251,IF:252,BuiltInCall_group0:253,BOUND:254,BNODE:255,BuiltInCall_option0:256,EXISTS:257,COUNT:258,Aggregate_option0:259,Aggregate_group0:260,FUNC_AGGREGATE:261,Aggregate_option1:262,GROUP_CONCAT:263,Aggregate_option2:264,Aggregate_option3:265,GroupConcatSeparator:266,SEPARATOR:267,"=":268,String:269,LANGTAG:270,"^^":271,DECIMAL:272,DOUBLE:273,true:274,false:275,STRING_LITERAL1:276,STRING_LITERAL2:277,STRING_LITERAL_LONG1:278,STRING_LITERAL_LONG2:279,INTEGER_POSITIVE:280,DECIMAL_POSITIVE:281,DOUBLE_POSITIVE:282,INTEGER_NEGATIVE:283,DECIMAL_NEGATIVE:284,DOUBLE_NEGATIVE:285,PNAME_LN:286,QueryOrUpdate_group0_option0:287,Prologue_repetition0_group0:288,SelectClause_option0_group0:289,DISTINCT:290,REDUCED:291,SelectClause_group0_repetition_plus0:292,"*":293,DescribeQuery_group0_repetition_plus0_group0:294,DescribeQuery_group0_repetition_plus0:295,NAMED:296,SILENT:297,CLEAR:298,DROP:299,ADD:300,MOVE:301,COPY:302,ALL:303,".":304,UNION:305,"|":306,"/":307,PathElt_option0_group0:308,"?":309,"+":310,"!=":311,"<":312,">":313,"<=":314,">=":315,NOT:316,CONCAT:317,COALESCE:318,SUBSTR:319,REGEX:320,REPLACE:321,$accept:0,$end:1},terminals_:{2:"error",6:"EOF",12:"BASE",13:"IRIREF",15:"PREFIX",16:"PNAME_NS",24:"SELECT",28:"VAR",29:"(",31:"AS",32:")",34:"CONSTRUCT",38:"WHERE",39:"{",41:"}",43:"DESCRIBE",48:"ASK",51:"FROM",61:"GROUP",62:"BY",68:"HAVING",71:"ORDER",74:"ASC",76:"DESC",79:"LIMIT",80:"INTEGER",81:"OFFSET",83:"VALUES",86:"NIL",92:"UNDEF",99:"LOAD",108:"TO",109:"CREATE",111:"GRAPH",112:"INSERTDATA",114:"DELETEDATA",115:"DELETEWHERE",124:"DELETE",125:"INSERT",127:"USING",130:"WITH",132:"INTO",133:"DEFAULT",159:"OPTIONAL",160:"MINUS",162:"SERVICE",165:"FILTER",166:"BIND",183:";",187:"a",208:"!",213:"^",215:"[",216:"]",218:"BLANK_NODE_LABEL",219:"ANON",223:"||",227:"&&",231:"IN",246:"-",248:"FUNC_ARITY0",249:"FUNC_ARITY1",250:"FUNC_ARITY2",251:",",252:"IF",254:"BOUND",255:"BNODE",257:"EXISTS",258:"COUNT",261:"FUNC_AGGREGATE",263:"GROUP_CONCAT",267:"SEPARATOR",268:"=",270:"LANGTAG",271:"^^",272:"DECIMAL",273:"DOUBLE",274:"true",275:"false",276:"STRING_LITERAL1",277:"STRING_LITERAL2",278:"STRING_LITERAL_LONG1",279:"STRING_LITERAL_LONG2",280:"INTEGER_POSITIVE",281:"DECIMAL_POSITIVE",282:"DOUBLE_POSITIVE",283:"INTEGER_NEGATIVE",284:"DECIMAL_NEGATIVE",285:"DOUBLE_NEGATIVE",286:"PNAME_LN",290:"DISTINCT",291:"REDUCED",293:"*",296:"NAMED",297:"SILENT",298:"CLEAR",299:"DROP",300:"ADD",301:"MOVE",302:"COPY",303:"ALL",304:".",305:"UNION",306:"|",307:"/",309:"?",310:"+",311:"!=",312:"<",313:">",314:"<=",315:">=",316:"NOT",317:"CONCAT",318:"COALESCE",319:"SUBSTR",320:"REGEX",321:"REPLACE"},productions_:[0,[3,3],[4,1],[8,2],[11,2],[14,3],[17,4],[22,4],[18,3],[27,1],[27,5],[33,5],[33,7],[42,5],[47,4],[50,3],[20,2],[21,4],[60,3],[64,1],[64,1],[64,3],[64,5],[64,1],[67,2],[70,3],[73,2],[73,2],[73,1],[73,1],[78,2],[78,2],[78,4],[78,4],[82,2],[84,4],[84,4],[84,6],[90,1],[90,1],[90,1],[93,3],[95,3],[97,4],[97,3],[97,5],[97,4],[97,2],[97,2],[97,2],[97,6],[97,6],[121,2],[117,2],[126,3],[129,2],[131,3],[107,1],[107,2],[104,2],[104,1],[113,4],[138,7],[143,3],[55,3],[55,3],[147,2],[150,3],[154,3],[151,2],[151,2],[151,2],[151,3],[151,4],[151,2],[151,6],[151,1],[77,1],[77,1],[77,1],[66,2],[66,6],[169,1],[169,4],[35,3],[172,3],[145,2],[145,2],[178,1],[176,2],[182,2],[180,2],[185,1],[185,1],[185,1],[186,2],[156,2],[156,2],[190,4],[197,1],[197,3],[199,2],[201,2],[204,2],[203,2],[205,1],[205,1],[205,2],[205,3],[209,1],[209,1],[209,4],[210,1],[210,1],[210,2],[210,2],[177,3],[177,3],[191,3],[191,3],[189,1],[189,1],[195,1],[195,1],[175,1],[175,1],[175,1],[175,1],[175,1],[175,1],[30,2],[222,2],[220,2],[226,2],[224,1],[224,3],[224,4],[228,2],[234,2],[234,2],[234,2],[232,2],[242,2],[240,2],[240,2],[240,2],[245,1],[245,1],[245,1],[245,1],[245,1],[245,1],[75,3],[65,1],[65,2],[65,4],[65,6],[65,8],[65,2],[65,4],[65,2],[65,4],[65,3],[247,5],[247,5],[247,6],[266,4],[91,1],[91,2],[91,3],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[269,1],[269,1],[269,1],[269,1],[236,1],[236,1],[236,1],[238,1],[238,1],[238,1],[53,1],[53,1],[53,1],[287,0],[287,1],[5,1],[5,1],[288,1],[288,1],[7,0],[7,2],[9,1],[9,1],[9,1],[9,1],[10,0],[10,1],[19,0],[19,2],[23,0],[23,1],[289,1],[289,1],[25,0],[25,1],[292,1],[292,2],[26,1],[26,1],[36,0],[36,2],[37,0],[37,2],[40,0],[40,1],[294,1],[294,1],[295,1],[295,2],[44,1],[44,1],[45,0],[45,2],[46,0],[46,1],[49,0],[49,2],[52,0],[52,1],[54,0],[54,1],[56,0],[56,1],[57,0],[57,1],[58,0],[58,1],[59,0],[59,1],[63,1],[63,2],[69,1],[69,2],[72,1],[72,2],[85,0],[85,2],[87,0],[87,2],[88,1],[88,2],[89,0],[89,2],[94,1],[94,2],[96,0],[96,4],[98,0],[98,2],[100,0],[100,1],[101,0],[101,1],[102,1],[102,1],[103,0],[103,1],[105,1],[105,1],[105,1],[106,0],[106,1],[110,0],[110,1],[116,0],[116,1],[118,0],[118,1],[119,0],[119,2],[120,0],[120,1],[122,0],[122,1],[123,0],[123,2],[128,0],[128,1],[134,0],[134,1],[135,1],[135,1],[135,1],[136,0],[136,1],[137,0],[137,2],[139,1],[139,1],[140,0],[140,1],[141,0],[141,1],[142,0],[142,1],[144,0],[144,3],[146,0],[146,1],[148,0],[148,1],[149,0],[149,2],[152,0],[152,1],[153,0],[153,1],[155,0],[155,3],[157,0],[157,1],[158,0],[158,3],[161,1],[161,1],[163,0],[163,1],[164,1],[164,1],[167,0],[167,1],[168,0],[168,3],[170,0],[170,3],[171,0],[171,1],[173,0],[173,3],[174,0],[174,1],[179,0],[179,1],[181,0],[181,2],[184,0],[184,1],[188,0],[188,3],[192,0],[192,1],[193,1],[193,1],[194,0],[194,3],[196,0],[196,2],[198,1],[198,1],[200,0],[200,3],[202,0],[202,3],[308,1],[308,1],[308,1],[206,0],[206,1],[207,0],[207,1],[211,0],[211,3],[212,0],[212,1],[214,1],[214,2],[217,1],[217,2],[221,0],[221,2],[225,0],[225,2],[229,1],[229,1],[229,1],[229,1],[229,1],[229,1],[230,0],[230,1],[233,0],[233,2],[235,1],[235,1],[237,0],[237,2],[239,0],[239,2],[241,0],[241,2],[243,1],[243,1],[244,0],[244,1],[253,1],[253,1],[253,1],[253,1],[253,1],[256,0],[256,1],[259,0],[259,1],[260,1],[260,1],[262,0],[262,1],[264,0],[264,1],[265,0],[265,1]],performAction:function(e,t,r,i,a,n,s){var o,u,l=n.length-1;switch(a){case 1:return n[l-1]=n[l-1]||{},Ur.base&&(n[l-1].base=Ur.base),Ur.base=hr=dr=gr="",n[l-1].prefixes=Ur.prefixes,Ur.prefixes=null,n[l-1];case 3:this.$=mr(n[l-1],n[l],{type:"query"});break;case 4:Ur.base=br(n[l]),hr=dr=gr="";break;case 5:Ur.prefixes||(Ur.prefixes={}),n[l-1]=n[l-1].substr(0,n[l-1].length-1),n[l]=br(n[l]),Ur.prefixes[n[l-1]]=n[l];break;case 6:this.$=mr(n[l-3],Cr(n[l-2]),n[l-1],n[l]);break;case 7:this.$=mr(n[l-3],n[l-2],n[l-1],n[l],{type:"query"});break;case 8:this.$=mr({queryType:"SELECT",variables:"*"===n[l]?["*"]:n[l]},n[l-1]&&(n[l-2]=yr(n[l-1]),n[l-1]={},n[l-1][n[l-2]]=!0,n[l-1]));break;case 9:case 92:case 124:case 151:this.$=vr(n[l]);break;case 10:case 22:this.$=Sr(n[l-3],{variable:vr(n[l-1])});break;case 11:this.$=mr({queryType:"CONSTRUCT",template:n[l-3]},Cr(n[l-2]),n[l-1],n[l]);break;case 12:this.$=mr({queryType:"CONSTRUCT",template:n[l-2]=n[l-2]?n[l-2].triples:[]},Cr(n[l-5]),{where:[{type:"bgp",triples:wr([],n[l-2])}]},n[l]);break;case 13:this.$=mr({queryType:"DESCRIBE",variables:"*"===n[l-3]?["*"]:n[l-3].map(vr)},Cr(n[l-2]),n[l-1],n[l]);break;case 14:this.$=mr({queryType:"ASK"},Cr(n[l-2]),n[l-1],n[l]);break;case 15:case 54:this.$={iri:n[l],named:!!n[l-1]};break;case 16:this.$={where:n[l].patterns};break;case 17:this.$=mr(n[l-3],n[l-2],n[l-1],n[l]);break;case 18:this.$={group:n[l]};break;case 19:case 20:case 26:case 28:this.$=Sr(n[l]);break;case 21:this.$=Sr(n[l-1]);break;case 23:case 29:this.$=Sr(vr(n[l]));break;case 24:this.$={having:n[l]};break;case 25:this.$={order:n[l]};break;case 27:this.$=Sr(n[l],{descending:!0});break;case 30:this.$={limit:qr(n[l])};break;case 31:this.$={offset:qr(n[l])};break;case 32:this.$={limit:qr(n[l-2]),offset:qr(n[l])};break;case 33:this.$={limit:qr(n[l]),offset:qr(n[l-2])};break;case 34:this.$={type:"values",values:n[l]};break;case 35:n[l-3]=vr(n[l-3]),this.$=n[l-1].map(function(e){var t={};return t[n[l-3]]=e,t});break;case 36:this.$=n[l-1].map(function(){return{}});break;case 37:var c=n[l-4].length;n[l-4]=n[l-4].map(vr),this.$=n[l-1].map(function(e){if(e.length!==c)throw Error("Inconsistent VALUES length");for(var t={},r=0;r<c;r++)t[n[l-4][r]]=e[r];return t});break;case 40:this.$=void 0;break;case 41:case 84:case 108:case 152:this.$=n[l-1];break;case 42:this.$={type:"update",updates:fr(n[l-2],n[l-1])};break;case 43:this.$=mr({type:"load",silent:!!n[l-2],source:n[l-1]},n[l]&&{destination:n[l]});break;case 44:this.$={type:yr(n[l-2]),silent:!!n[l-1],graph:n[l]};break;case 45:this.$={type:yr(n[l-4]),silent:!!n[l-3],source:n[l-2],destination:n[l]};break;case 46:this.$={type:"create",silent:!!n[l-2],graph:n[l-1]};break;case 47:this.$={updateType:"insert",insert:n[l]};break;case 48:this.$={updateType:"delete",delete:n[l]};break;case 49:this.$={updateType:"deletewhere",delete:n[l]};break;case 50:this.$=mr({updateType:"insertdelete"},n[l-5],{insert:n[l-4]||[]},{delete:n[l-3]||[]},Cr(n[l-2]),{where:n[l].patterns});break;case 51:this.$=mr({updateType:"insertdelete"},n[l-5],{delete:n[l-4]||[]},{insert:n[l-3]||[]},Cr(n[l-2]),{where:n[l].patterns});break;case 52:case 53:case 56:case 143:this.$=n[l];break;case 55:this.$={graph:n[l]};break;case 57:this.$={type:"graph",default:!0};break;case 58:case 59:this.$={type:"graph",name:n[l]};break;case 60:this.$={},this.$[yr(n[l])]=!0;break;case 61:this.$=n[l-2]?_r(n[l-1],[n[l-2]]):_r(n[l-1]);break;case 62:var p=mr(n[l-3]||{triples:[]},{type:"graph",name:vr(n[l-5])});this.$=n[l]?[p,n[l]]:[p];break;case 63:case 68:this.$={type:"bgp",triples:_r(n[l-2],[n[l-1]])};break;case 64:this.$={type:"group",patterns:[n[l-1]]};break;case 65:this.$={type:"group",patterns:n[l-1]};break;case 66:this.$=n[l-1]?_r([n[l-1]],n[l]):_r(n[l]);break;case 67:this.$=n[l]?[n[l-2],n[l]]:n[l-2];break;case 69:n[l-1].length?this.$={type:"union",patterns:_r(n[l-1].map(Fr),[Fr(n[l])])}:this.$=n[l];break;case 70:this.$=mr(n[l],{type:"optional"});break;case 71:this.$=mr(n[l],{type:"minus"});break;case 72:this.$=mr(n[l],{type:"graph",name:vr(n[l-1])});break;case 73:this.$=mr(n[l],{type:"service",name:vr(n[l-1]),silent:!!n[l-2]});break;case 74:this.$={type:"filter",expression:n[l]};break;case 75:this.$={type:"bind",variable:vr(n[l-1]),expression:n[l-3]};break;case 80:this.$={type:"functionCall",function:n[l-1],args:[]};break;case 81:this.$={type:"functionCall",function:n[l-5],args:fr(n[l-2],n[l-1]),distinct:!!n[l-3]};break;case 82:case 99:case 110:case 196:case 204:case 216:case 218:case 228:case 232:case 252:case 254:case 258:case 262:case 285:case 291:case 302:case 312:case 318:case 324:case 328:case 338:case 340:case 344:case 350:case 354:case 360:case 362:case 366:case 368:case 377:case 385:case 387:case 397:case 401:case 403:case 405:this.$=[];break;case 83:this.$=fr(n[l-2],n[l-1]);break;case 85:this.$=_r(n[l-2],[n[l-1]]);break;case 86:case 96:this.$=n[l].map(function(e){return mr(xr(n[l-1]),e)});break;case 87:this.$=wr(n[l].map(function(e){return mr(xr(n[l-1].entity),e)}),n[l-1].triples);break;case 89:this.$=_r([n[l-1]],n[l]);break;case 90:this.$=_r(n[l]);break;case 91:this.$=Br(n[l-1],n[l]);break;case 94:case 106:case 113:this.$=tr;break;case 95:this.$=fr(n[l-1],n[l]);break;case 97:this.$=n[l]?wr(n[l].map(function(e){return mr(xr(n[l-1].entity),e)}),n[l-1].triples):n[l-1].triples;break;case 98:this.$=Br(vr(n[l-3]),fr(n[l-2],n[l-1]),n[l]);break;case 100:this.$=Br(vr(n[l-1]),n[l]);break;case 101:this.$=n[l-1].length?Er("|",fr(n[l-1],n[l])):n[l];break;case 102:this.$=n[l-1].length?Er("/",fr(n[l-1],n[l])):n[l];break;case 103:this.$=n[l]?Er(n[l],[n[l-1]]):n[l-1];break;case 104:this.$=n[l-1]?Er(n[l-1],[n[l]]):n[l];break;case 107:case 114:this.$=Er(n[l-1],[n[l]]);break;case 111:this.$=Er("|",fr(n[l-2],n[l-1]));break;case 115:this.$=Er(n[l-1],[tr]);break;case 116:case 118:this.$=function(e){var t=Rr(),r=t,i=[],a=[];e.forEach(function(e){i.push(e.entity),wr(a,e.triples)});for(var n=0,s=0,o=i.length,u=Array(2*o);n<o;)u[s++]=xr(r,rr,i[n]),u[s++]=xr(r,ir,r=++n<o?Rr():ar);return{entity:t,triples:wr(u,a)}}(n[l-1]);break;case 117:case 119:this.$=(o=n[l-1],{entity:u=Rr(),triples:o.map(function(e){return mr(xr(u),e)})});break;case 120:case 122:this.$={entity:n[l],triples:[]};break;case 128:this.$=Rr();break;case 129:this.$=ar;break;case 130:case 132:case 137:case 141:this.$=Tr(n[l-1],n[l]);break;case 131:this.$=["||",n[l]];break;case 133:this.$=["&&",n[l]];break;case 135:this.$=kr(n[l-1],[n[l-2],n[l]]);break;case 136:this.$=kr(n[l-2]?"notin":"in",[n[l-3],n[l]]);break;case 138:case 142:this.$=[n[l-1],n[l]];break;case 139:this.$=["+",Tr(n[l-1],n[l])];break;case 140:this.$=["-",Tr(n[l-1].replace("-",""),n[l])];break;case 144:this.$=kr(n[l-1],[n[l]]);break;case 145:this.$=kr("UMINUS",[n[l]]);break;case 154:this.$=kr(yr(n[l-1]));break;case 155:this.$=kr(yr(n[l-3]),[n[l-1]]);break;case 156:this.$=kr(yr(n[l-5]),[n[l-3],n[l-1]]);break;case 157:this.$=kr(yr(n[l-7]),[n[l-5],n[l-3],n[l-1]]);break;case 158:this.$=kr(yr(n[l-1]),n[l]);break;case 159:this.$=kr("bound",[vr(n[l-1])]);break;case 160:this.$=kr(n[l-1],[]);break;case 161:this.$=kr(n[l-3],[n[l-1]]);break;case 162:this.$=kr(n[l-2]?"notexists":"exists",[Fr(n[l])]);break;case 163:case 164:this.$=Sr(n[l-1],{type:"aggregate",aggregation:yr(n[l-4]),distinct:!!n[l-2]});break;case 165:this.$=Sr(n[l-2],{type:"aggregate",aggregation:yr(n[l-5]),distinct:!!n[l-3],separator:n[l-1]||" "});break;case 166:this.$=n[l].substr(1,n[l].length-2);break;case 168:this.$=n[l-1]+yr(n[l]);break;case 169:this.$=n[l-2]+"^^"+n[l];break;case 170:case 184:this.$=Ar(n[l],sr);break;case 171:case 185:this.$=Ar(n[l],or);break;case 172:case 186:this.$=Ar(yr(n[l]),ur);break;case 175:this.$=cr;break;case 176:this.$=pr;break;case 177:case 178:this.$=Or(n[l],1);break;case 179:case 180:this.$=Or(n[l],3);break;case 181:this.$=Ar(n[l].substr(1),sr);break;case 182:this.$=Ar(n[l].substr(1),or);break;case 183:this.$=Ar(n[l].substr(1).toLowerCase(),ur);break;case 187:this.$=br(n[l]);break;case 188:var h=n[l].indexOf(":"),d=n[l].substr(0,h),g=Ur.prefixes[d];if(!g)throw new Error("Unknown prefix: "+d);this.$=br(g+n[l].substr(h+1));break;case 189:if(n[l]=n[l].substr(0,n[l].length-1),!(n[l]in Ur.prefixes))throw new Error("Unknown prefix: "+n[l]);this.$=br(Ur.prefixes[n[l]]);break;case 197:case 205:case 213:case 217:case 219:case 225:case 229:case 233:case 247:case 249:case 251:case 253:case 255:case 257:case 259:case 261:case 286:case 292:case 303:case 319:case 351:case 363:case 382:case 384:case 386:case 388:case 398:case 402:case 404:case 406:n[l-1].push(n[l]);break;case 212:case 224:case 246:case 248:case 250:case 256:case 260:case 381:case 383:this.$=[n[l]];break;case 263:n[l-3].push(n[l-2]);break;case 313:case 325:case 329:case 339:case 341:case 345:case 355:case 361:case 367:case 369:case 378:n[l-2].push(n[l-1])}},table:[e(t,r,{3:1,4:2,7:3}),{1:[3]},e(i,[2,262],{5:4,8:5,287:6,9:7,95:8,17:9,33:10,42:11,47:12,96:13,18:14,6:[2,190],24:a,34:[1,15],43:[1,16],48:[1,17]}),e([6,24,34,43,48,99,109,112,114,115,124,125,130,298,299,300,301,302],[2,2],{288:19,11:20,14:21,12:[1,22],15:[1,23]}),{6:[1,24]},{6:[2,192]},{6:[2,193]},{6:[2,202],10:25,82:26,83:n},{6:[2,191]},e(s,[2,198]),e(s,[2,199]),e(s,[2,200]),e(s,[2,201]),{97:28,99:[1,29],102:30,105:31,109:[1,32],112:[1,33],114:[1,34],115:[1,35],116:36,120:37,124:[2,287],125:[2,281],129:43,130:[1,44],298:[1,38],299:[1,39],300:[1,40],301:[1,41],302:[1,42]},e(o,[2,204],{19:45}),e(u,[2,218],{35:46,37:47,39:[1,48]}),{13:l,16:c,28:p,44:49,53:54,286:h,293:[1,51],294:52,295:50},e(o,[2,232],{49:58}),e(d,[2,210],{25:59,289:60,290:[1,61],291:[1,62]}),e(t,[2,197]),e(t,[2,194]),e(t,[2,195]),{13:[1,63]},{16:[1,64]},{1:[2,1]},{6:[2,3]},{6:[2,203]},{28:[1,66],29:[1,68],84:65,86:[1,67]},{6:[2,264],98:69,183:[1,70]},e(g,[2,266],{100:71,297:[1,72]}),e(y,[2,272],{103:73,297:[1,74]}),e(f,[2,277],{106:75,297:[1,76]}),{110:77,111:[2,279],297:[1,78]},{39:w,113:79},{39:w,113:81},{39:w,113:82},{117:83,125:m},{121:85,124:_},e(b,[2,270]),e(b,[2,271]),e(v,[2,274]),e(v,[2,275]),e(v,[2,276]),{124:[2,288],125:[2,282]},{13:l,16:c,53:87,286:h},{20:88,38:k,39:S,50:89,51:E,54:90},e(o,[2,216],{36:93}),{38:[1,94],50:95,51:E},e(T,[2,344],{171:96,172:97,173:98,41:[2,342]}),e(C,[2,228],{45:99}),e(C,[2,226],{53:54,294:100,13:l,16:c,28:p,286:h}),e(C,[2,227]),e(q,[2,224]),e(q,[2,222]),e(q,[2,223]),e(F,[2,187]),e(F,[2,188]),e(F,[2,189]),{20:101,38:k,39:S,50:102,51:E,54:90},{26:103,27:106,28:A,29:x,292:104,293:[1,105]},e(d,[2,211]),e(d,[2,208]),e(d,[2,209]),e(t,[2,4]),{13:[1,109]},e(R,[2,34]),{39:[1,110]},{39:[1,111]},{28:[1,113],88:112},{6:[2,42]},e(t,r,{7:3,4:114}),{13:l,16:c,53:115,286:h},e(g,[2,267]),{104:116,111:[1,117],133:[1,119],135:118,296:[1,120],303:[1,121]},e(y,[2,273]),e(g,L,{107:122,134:124,111:I,133:D}),e(f,[2,278]),{111:[1,126]},{111:[2,280]},e(N,[2,47]),e(T,O,{136:127,143:128,144:129,41:B,111:B}),e(N,[2,48]),e(N,[2,49]),e(P,[2,283],{118:130,121:131,124:_}),{39:w,113:132},e(P,[2,289],{122:133,117:134,125:m}),{39:w,113:135},e([124,125],[2,55]),e(U,M,{21:136,56:137,60:138,61:$}),e(o,[2,205]),{39:H,55:140},e(g,[2,234],{52:142,296:[1,143]}),{39:[2,237]},{20:144,38:k,39:S,50:145,51:E,54:90},{39:[1,146]},e(u,[2,219]),{41:[1,147]},{41:[2,343]},{13:l,16:c,28:G,29:Q,53:152,80:j,86:V,91:153,145:148,175:149,177:150,215:W,218:z,219:Y,236:163,238:164,269:159,272:X,273:K,274:Z,275:J,276:ee,277:te,278:re,279:ie,280:ae,281:ne,282:se,283:oe,284:ue,285:le,286:h},e(ce,[2,230],{54:90,46:177,50:178,20:179,38:k,39:S,51:E}),e(q,[2,225]),e(U,M,{56:137,60:138,21:180,61:$}),e(o,[2,233]),e(o,[2,8]),e(o,[2,214],{27:181,28:A,29:x}),e(o,[2,215]),e(pe,[2,212]),e(pe,[2,9]),e(he,de,{30:182,220:183,224:184,228:185,232:186,240:187,244:188,208:ge,246:ye,310:fe}),e(t,[2,5]),e(we,[2,252],{85:192}),e(me,[2,254],{87:193}),{28:[1,195],32:[1,194]},e(_e,[2,256]),e(i,[2,263],{6:[2,265]}),e(N,[2,268],{101:196,131:197,132:[1,198]}),e(N,[2,44]),{13:l,16:c,53:199,286:h},e(N,[2,60]),e(N,[2,297]),e(N,[2,298]),e(N,[2,299]),{108:[1,200]},e(be,[2,57]),{13:l,16:c,53:201,286:h},e(g,[2,296]),{13:l,16:c,53:202,286:h},e(ve,[2,302],{137:203}),e(ve,[2,301]),{13:l,16:c,28:G,29:Q,53:152,80:j,86:V,91:153,145:204,175:149,177:150,215:W,218:z,219:Y,236:163,238:164,269:159,272:X,273:K,274:Z,275:J,276:ee,277:te,278:re,279:ie,280:ae,281:ne,282:se,283:oe,284:ue,285:le,286:h},e(P,[2,285],{119:205}),e(P,[2,284]),e([38,124,127],[2,53]),e(P,[2,291],{123:206}),e(P,[2,290]),e([38,125,127],[2,52]),e(s,[2,6]),e(ke,[2,240],{57:207,67:208,68:[1,209]}),e(U,[2,239]),{62:[1,210]},e([6,41,61,68,71,79,81,83],[2,16]),e(T,Se,{22:211,147:212,18:213,148:214,154:215,155:216,24:a,39:Ee,41:Ee,83:Ee,111:Ee,159:Ee,160:Ee,162:Ee,165:Ee,166:Ee}),{13:l,16:c,53:217,286:h},e(g,[2,235]),e(U,M,{56:137,60:138,21:218,61:$}),e(o,[2,217]),e(T,O,{144:129,40:219,143:220,41:[2,220]}),e(o,[2,84]),{41:[2,346],174:221,304:[1,222]},{13:l,16:c,28:Te,53:227,176:223,180:224,185:225,187:Ce,286:h},e(qe,[2,348],{180:224,185:225,53:227,178:229,179:230,176:231,13:l,16:c,28:Te,187:Ce,286:h}),e(Fe,[2,124]),e(Fe,[2,125]),e(Fe,[2,126]),e(Fe,[2,127]),e(Fe,[2,128]),e(Fe,[2,129]),{13:l,16:c,28:G,29:Q,53:152,80:j,86:V,91:153,175:234,177:235,189:233,214:232,215:W,218:z,219:Y,236:163,238:164,269:159,272:X,273:K,274:Z,275:J,276:ee,277:te,278:re,279:ie,280:ae,281:ne,282:se,283:oe,284:ue,285:le,286:h},{13:l,16:c,28:Te,53:227,176:236,180:224,185:225,187:Ce,286:h},e(Ae,[2,167],{270:[1,237],271:[1,238]}),e(Ae,[2,170]),e(Ae,[2,171]),e(Ae,[2,172]),e(Ae,[2,173]),e(Ae,[2,174]),e(Ae,[2,175]),e(Ae,[2,176]),e(xe,[2,177]),e(xe,[2,178]),e(xe,[2,179]),e(xe,[2,180]),e(Ae,[2,181]),e(Ae,[2,182]),e(Ae,[2,183]),e(Ae,[2,184]),e(Ae,[2,185]),e(Ae,[2,186]),e(U,M,{56:137,60:138,21:239,61:$}),e(C,[2,229]),e(ce,[2,231]),e(s,[2,14]),e(pe,[2,213]),{31:[1,240]},e(Re,[2,385],{221:241}),e(Le,[2,387],{225:242}),e(Le,[2,134],{229:243,230:244,231:[2,395],268:[1,245],311:[1,246],312:[1,247],313:[1,248],314:[1,249],315:[1,250],316:[1,251]}),e(Ie,[2,397],{233:252}),e(De,[2,405],{241:253}),{13:l,16:c,28:Ne,29:Oe,53:257,65:256,66:258,75:255,80:j,91:259,236:163,238:164,245:254,247:262,248:Be,249:Pe,250:Ue,252:Me,253:267,254:$e,255:He,256:270,257:Ge,258:Qe,261:je,263:Ve,269:159,272:X,273:K,274:Z,275:J,276:ee,277:te,278:re,279:ie,280:ae,281:ne,282:se,283:oe,284:ue,285:le,286:h,316:We,317:ze,318:Ye,319:Xe,320:Ke,321:Ze},{13:l,16:c,28:Ne,29:Oe,53:257,65:256,66:258,75:255,80:j,91:259,236:163,238:164,245:280,247:262,248:Be,249:Pe,250:Ue,252:Me,253:267,254:$e,255:He,256:270,257:Ge,258:Qe,261:je,263:Ve,269:159,272:X,273:K,274:Z,275:J,276:ee,277:te,278:re,279:ie,280:ae,281:ne,282:se,283:oe,284:ue,285:le,286:h,316:We,317:ze,318:Ye,319:Xe,320:Ke,321:Ze},{13:l,16:c,28:Ne,29:Oe,53:257,65:256,66:258,75:255,80:j,91:259,236:163,238:164,245:281,247:262,248:Be,249:Pe,250:Ue,252:Me,253:267,254:$e,255:He,256:270,257:Ge,258:Qe,261:je,263:Ve,269:159,272:X,273:K,274:Z,275:J,276:ee,277:te,278:re,279:ie,280:ae,281:ne,282:se,283:oe,284:ue,285:le,286:h,316:We,317:ze,318:Ye,319:Xe,320:Ke,321:Ze},e(he,[2,410]),{13:l,16:c,41:[1,282],53:284,80:j,90:283,91:285,92:Je,236:163,238:164,269:159,272:X,273:K,274:Z,275:J,276:ee,277:te,278:re,279:ie,280:ae,281:ne,282:se,283:oe,284:ue,285:le,286:h},{41:[1,287],86:[1,288]},{39:[1,289]},e(_e,[2,257]),e(N,[2,43]),e(N,[2,269]),{111:[1,290]},e(N,[2,59]),e(g,L,{134:124,107:291,111:I,133:D}),e(be,[2,58]),e(N,[2,46]),{41:[1,292],111:[1,294],138:293},e(ve,[2,314],{146:295,304:[1,296]}),{38:[1,297],126:298,127:et},{38:[1,300],126:301,127:et},e(tt,[2,242],{58:302,70:303,71:[1,304]}),e(ke,[2,241]),{13:l,16:c,29:Oe,53:310,65:308,66:309,69:305,75:307,77:306,247:262,248:Be,249:Pe,250:Ue,252:Me,253:267,254:$e,255:He,256:270,257:Ge,258:Qe,261:je,263:Ve,286:h,316:We,317:ze,318:Ye,319:Xe,320:Ke,321:Ze},{13:l,16:c,28:rt,29:it,53:310,63:311,64:312,65:313,66:314,247:262,248:Be,249:Pe,250:Ue,252:Me,253:267,254:$e,255:He,256:270,257:Ge,258:Qe,261:je,263:Ve,286:h,316:We,317:ze,318:Ye,319:Xe,320:Ke,321:Ze},{41:[1,317]},{41:[1,318]},{20:319,38:k,39:S,54:90},e(at,[2,318],{149:320}),e(at,[2,317]),{13:l,16:c,28:G,29:nt,53:152,80:j,86:V,91:153,156:321,175:322,191:323,215:st,218:z,219:Y,236:163,238:164,269:159,272:X,273:K,274:Z,275:J,276:ee,277:te,278:re,279:ie,280:ae,281:ne,282:se,283:oe,284:ue,285:le,286:h},e(C,[2,15]),e(s,[2,11]),{41:[1,326]},{41:[2,221]},{41:[2,85]},e(T,[2,345],{41:[2,347]}),e(qe,[2,86]),e(ot,[2,350],{181:327}),e(T,ut,{186:328,188:329}),e(T,[2,92]),e(T,[2,93]),e(T,[2,94]),e(qe,[2,87]),e(qe,[2,88]),e(qe,[2,349]),{13:l,16:c,28:G,29:Q,32:[1,330],53:152,80:j,86:V,91:153,175:234,177:235,189:331,215:W,218:z,219:Y,236:163,238:164,269:159,272:X,273:K,274:Z,275:J,276:ee,277:te,278:re,279:ie,280:ae,281:ne,282:se,283:oe,284:ue,285:le,286:h},e(lt,[2,381]),e(ct,[2,120]),e(ct,[2,121]),{216:[1,332]},e(Ae,[2,168]),{13:l,16:c,53:333,286:h},e(s,[2,13]),{28:[1,334]},e([31,32,183,251],[2,130],{222:335,223:[1,336]}),e(Re,[2,132],{226:337,227:[1,338]}),e(he,de,{232:186,240:187,244:188,228:339,208:ge,246:ye,310:fe}),{231:[1,340]},e(pt,[2,389]),e(pt,[2,390]),e(pt,[2,391]),e(pt,[2,392]),e(pt,[2,393]),e(pt,[2,394]),{231:[2,396]},e([31,32,183,223,227,231,251,268,311,312,313,314,315,316],[2,137],{234:341,235:342,236:343,238:344,246:[1,346],280:ae,281:ne,282:se,283:oe,284:ue,285:le,310:[1,345]}),e(Ie,[2,141],{242:347,243:348,293:ht,307:dt}),e(De,[2,143]),e(De,[2,146]),e(De,[2,147]),e(De,[2,148],{29:gt,86:yt}),e(De,[2,149]),e(De,[2,150]),e(De,[2,151]),e(he,de,{220:183,224:184,228:185,232:186,240:187,244:188,30:353,208:ge,246:ye,310:fe}),e(ft,[2,153]),{86:[1,354]},{29:[1,355]},{29:[1,356]},{29:[1,357]},{29:wt,86:mt,169:358},{29:[1,361]},{29:[1,363],86:[1,362]},{257:[1,364]},{29:[1,365]},{29:[1,366]},{29:[1,367]},e(_t,[2,411]),e(_t,[2,412]),e(_t,[2,413]),e(_t,[2,414]),e(_t,[2,415]),{257:[2,417]},e(De,[2,144]),e(De,[2,145]),e(R,[2,35]),e(we,[2,253]),e(bt,[2,38]),e(bt,[2,39]),e(bt,[2,40]),e(R,[2,36]),e(me,[2,255]),e(vt,[2,258],{89:368}),{13:l,16:c,53:369,286:h},e(N,[2,45]),e([6,38,124,125,127,183],[2,61]),e(ve,[2,303]),{13:l,16:c,28:[1,371],53:372,139:370,286:h},e(ve,[2,63]),e(T,[2,313],{41:kt,111:kt}),{39:H,55:373},e(P,[2,286]),e(g,[2,293],{128:374,296:[1,375]}),{39:H,55:376},e(P,[2,292]),e(St,[2,244],{59:377,78:378,79:[1,379],81:[1,380]}),e(tt,[2,243]),{62:[1,381]},e(ke,[2,24],{247:262,253:267,256:270,75:307,65:308,66:309,53:310,77:382,13:l,16:c,29:Oe,248:Be,249:Pe,250:Ue,252:Me,254:$e,255:He,257:Ge,258:Qe,261:je,263:Ve,286:h,316:We,317:ze,318:Ye,319:Xe,320:Ke,321:Ze}),e(Et,[2,248]),e(Tt,[2,77]),e(Tt,[2,78]),e(Tt,[2,79]),{29:gt,86:yt},e(U,[2,18],{247:262,253:267,256:270,53:310,65:313,66:314,64:383,13:l,16:c,28:rt,29:it,248:Be,249:Pe,250:Ue,252:Me,254:$e,255:He,257:Ge,258:Qe,261:je,263:Ve,286:h,316:We,317:ze,318:Ye,319:Xe,320:Ke,321:Ze}),e(Ct,[2,246]),e(Ct,[2,19]),e(Ct,[2,20]),e(he,de,{220:183,224:184,228:185,232:186,240:187,244:188,30:384,208:ge,246:ye,310:fe}),e(Ct,[2,23]),e(qt,[2,64]),e(qt,[2,65]),e(U,M,{56:137,60:138,21:385,61:$}),{39:[2,328],41:[2,66],82:395,83:n,111:[1,391],150:386,151:387,158:388,159:[1,389],160:[1,390],162:[1,392],165:[1,393],166:[1,394]},e(at,[2,326],{157:396,304:[1,397]}),e(Ft,At,{190:398,193:399,199:400,200:402,28:xt}),e(Rt,[2,356],{193:399,199:400,200:402,192:403,190:404,13:At,16:At,29:At,187:At,208:At,213:At,286:At,28:xt}),{13:l,16:c,28:G,29:nt,53:152,80:j,86:V,91:153,175:407,191:408,195:406,215:st,217:405,218:z,219:Y,236:163,238:164,269:159,272:X,273:K,274:Z,275:J,276:ee,277:te,278:re,279:ie,280:ae,281:ne,282:se,283:oe,284:ue,285:le,286:h},e(Ft,At,{193:399,199:400,200:402,190:409,28:xt}),e(U,M,{56:137,60:138,21:410,61:$}),e([41,111,216,304],[2,89],{182:411,183:[1,412]}),e(ot,[2,91]),{13:l,16:c,28:G,29:Q,53:152,80:j,86:V,91:153,175:234,177:235,189:413,215:W,218:z,219:Y,236:163,238:164,269:159,272:X,273:K,274:Z,275:J,276:ee,277:te,278:re,279:ie,280:ae,281:ne,282:se,283:oe,284:ue,285:le,286:h},e(Lt,[2,116]),e(lt,[2,382]),e(Lt,[2,117]),e(Ae,[2,169]),{32:[1,414]},e(Re,[2,386]),e(he,de,{224:184,228:185,232:186,240:187,244:188,220:415,208:ge,246:ye,310:fe}),e(Le,[2,388]),e(he,de,{228:185,232:186,240:187,244:188,224:416,208:ge,246:ye,310:fe}),e(Le,[2,135]),{29:wt,86:mt,169:417},e(Ie,[2,398]),e(he,de,{240:187,244:188,232:418,208:ge,246:ye,310:fe}),e(De,[2,401],{237:419}),e(De,[2,403],{239:420}),e(pt,[2,399]),e(pt,[2,400]),e(De,[2,406]),e(he,de,{244:188,240:421,208:ge,246:ye,310:fe}),e(pt,[2,407]),e(pt,[2,408]),e(ft,[2,80]),e(pt,[2,336],{167:422,290:[1,423]}),{32:[1,424]},e(ft,[2,154]),e(he,de,{220:183,224:184,228:185,232:186,240:187,244:188,30:425,208:ge,246:ye,310:fe}),e(he,de,{220:183,224:184,228:185,232:186,240:187,244:188,30:426,208:ge,246:ye,310:fe}),e(he,de,{220:183,224:184,228:185,232:186,240:187,244:188,30:427,208:ge,246:ye,310:fe}),e(ft,[2,158]),e(ft,[2,82]),e(pt,[2,340],{170:428}),{28:[1,429]},e(ft,[2,160]),e(he,de,{220:183,224:184,228:185,232:186,240:187,244:188,30:430,208:ge,246:ye,310:fe}),{39:H,55:431},e(It,[2,418],{259:432,290:[1,433]}),e(pt,[2,422],{262:434,290:[1,435]}),e(pt,[2,424],{264:436,290:[1,437]}),{29:[1,440],41:[1,438],93:439},e(N,[2,56]),{39:[1,441]},{39:[2,304]},{39:[2,305]},e(N,[2,50]),{13:l,16:c,53:442,286:h},e(g,[2,294]),e(N,[2,51]),e(St,[2,17]),e(St,[2,245]),{80:[1,443]},{80:[1,444]},{13:l,16:c,28:Dt,29:Oe,53:310,65:308,66:309,72:445,73:446,74:Nt,75:307,76:Ot,77:449,247:262,248:Be,249:Pe,250:Ue,252:Me,253:267,254:$e,255:He,256:270,257:Ge,258:Qe,261:je,263:Ve,286:h,316:We,317:ze,318:Ye,319:Xe,320:Ke,321:Ze},e(Et,[2,249]),e(Ct,[2,247]),{31:[1,452],32:[1,451]},{23:453,41:[2,206],82:454,83:n},e(at,[2,319]),e(Bt,[2,320],{152:455,304:[1,456]}),{39:H,55:457},{39:H,55:458},{39:H,55:459},{13:l,16:c,28:[1,461],53:462,161:460,286:h},e(Pt,[2,332],{163:463,297:[1,464]}),{13:l,16:c,29:Oe,53:310,65:308,66:309,75:307,77:465,247:262,248:Be,249:Pe,250:Ue,252:Me,253:267,254:$e,255:He,256:270,257:Ge,258:Qe,261:je,263:Ve,286:h,316:We,317:ze,318:Ye,319:Xe,320:Ke,321:Ze},{29:[1,466]},e(Ut,[2,76]),e(at,[2,68]),e(T,[2,325],{39:Mt,41:Mt,83:Mt,111:Mt,159:Mt,160:Mt,162:Mt,165:Mt,166:Mt}),e(Rt,[2,96]),e(T,[2,360],{194:467}),e(T,[2,358]),e(T,[2,359]),e(Ft,[2,368],{201:468,202:469}),e(Rt,[2,97]),e(Rt,[2,357]),{13:l,16:c,28:G,29:nt,32:[1,470],53:152,80:j,86:V,91:153,175:407,191:408,195:471,215:st,218:z,219:Y,236:163,238:164,269:159,272:X,273:K,274:Z,275:J,276:ee,277:te,278:re,279:ie,280:ae,281:ne,282:se,283:oe,284:ue,285:le,286:h},e(lt,[2,383]),e(ct,[2,122]),e(ct,[2,123]),{216:[1,472]},e(s,[2,12]),e(ot,[2,351]),e(ot,[2,352],{185:225,53:227,184:473,180:474,13:l,16:c,28:Te,187:Ce,286:h}),e($t,[2,95],{251:[1,475]}),e(pe,[2,10]),e(Re,[2,131]),e(Le,[2,133]),e(Le,[2,136]),e(Ie,[2,138]),e(Ie,[2,139],{243:348,242:476,293:ht,307:dt}),e(Ie,[2,140],{243:348,242:477,293:ht,307:dt}),e(De,[2,142]),e(pt,[2,338],{168:478}),e(pt,[2,337]),e([6,13,16,28,29,31,32,39,41,71,74,76,79,80,81,83,86,111,159,160,162,165,166,183,215,218,219,223,227,231,246,248,249,250,251,252,254,255,257,258,261,263,268,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,293,304,307,310,311,312,313,314,315,316,317,318,319,320,321],[2,152]),{32:[1,479]},{251:[1,480]},{251:[1,481]},e(he,de,{220:183,224:184,228:185,232:186,240:187,244:188,30:482,208:ge,246:ye,310:fe}),{32:[1,483]},{32:[1,484]},e(ft,[2,162]),e(he,de,{220:183,224:184,228:185,232:186,240:187,244:188,260:485,30:487,208:ge,246:ye,293:[1,486],310:fe}),e(It,[2,419]),e(he,de,{220:183,224:184,228:185,232:186,240:187,244:188,30:488,208:ge,246:ye,310:fe}),e(pt,[2,423]),e(he,de,{220:183,224:184,228:185,232:186,240:187,244:188,30:489,208:ge,246:ye,310:fe}),e(pt,[2,425]),e(R,[2,37]),e(vt,[2,259]),{13:l,16:c,53:284,80:j,90:491,91:285,92:Je,94:490,236:163,238:164,269:159,272:X,273:K,274:Z,275:J,276:ee,277:te,278:re,279:ie,280:ae,281:ne,282:se,283:oe,284:ue,285:le,286:h},e(T,O,{144:129,140:492,143:493,41:[2,306]}),e(P,[2,54]),e(St,[2,30],{81:[1,494]}),e(St,[2,31],{79:[1,495]}),e(tt,[2,25],{247:262,253:267,256:270,75:307,65:308,66:309,53:310,77:449,73:496,13:l,16:c,28:Dt,29:Oe,74:Nt,76:Ot,248:Be,249:Pe,250:Ue,252:Me,254:$e,255:He,257:Ge,258:Qe,261:je,263:Ve,286:h,316:We,317:ze,318:Ye,319:Xe,320:Ke,321:Ze}),e(Ht,[2,250]),{29:Oe,75:497},{29:Oe,75:498},e(Ht,[2,28]),e(Ht,[2,29]),e(Ct,[2,21]),{28:[1,499]},{41:[2,7]},{41:[2,207]},e(T,Se,{155:216,153:500,154:501,39:Gt,41:Gt,83:Gt,111:Gt,159:Gt,160:Gt,162:Gt,165:Gt,166:Gt}),e(Bt,[2,321]),e(Ut,[2,69],{305:[1,502]}),e(Ut,[2,70]),e(Ut,[2,71]),{39:H,55:503},{39:[2,330]},{39:[2,331]},{13:l,16:c,28:[1,505],53:506,164:504,286:h},e(Pt,[2,333]),e(Ut,[2,74]),e(he,de,{220:183,224:184,228:185,232:186,240:187,244:188,30:507,208:ge,246:ye,310:fe}),{13:l,16:c,28:G,29:nt,53:152,80:j,86:V,91:153,175:407,191:408,195:508,215:st,218:z,219:Y,236:163,238:164,269:159,272:X,273:K,274:Z,275:J,276:ee,277:te,278:re,279:ie,280:ae,281:ne,282:se,283:oe,284:ue,285:le,286:h},e(lt,[2,101],{306:[1,509]}),e(Qt,[2,375],{203:510,207:511,213:[1,512]}),e(Fe,[2,118]),e(lt,[2,384]),e(Fe,[2,119]),e(ot,[2,90]),e(ot,[2,353]),e(T,[2,355]),e(De,[2,402]),e(De,[2,404]),e(he,de,{220:183,224:184,228:185,232:186,240:187,244:188,30:513,208:ge,246:ye,310:fe}),e(ft,[2,155]),e(he,de,{220:183,224:184,228:185,232:186,240:187,244:188,30:514,208:ge,246:ye,310:fe}),e(he,de,{220:183,224:184,228:185,232:186,240:187,244:188,30:515,208:ge,246:ye,310:fe}),{32:[1,516],251:[1,517]},e(ft,[2,159]),e(ft,[2,161]),{32:[1,518]},{32:[2,420]},{32:[2,421]},{32:[1,519]},{32:[2,426],183:[1,522],265:520,266:521},{13:l,16:c,32:[1,523],53:284,80:j,90:524,91:285,92:Je,236:163,238:164,269:159,272:X,273:K,274:Z,275:J,276:ee,277:te,278:re,279:ie,280:ae,281:ne,282:se,283:oe,284:ue,285:le,286:h},e(jt,[2,260]),{41:[1,525]},{41:[2,307]},{80:[1,526]},{80:[1,527]},e(Ht,[2,251]),e(Ht,[2,26]),e(Ht,[2,27]),{32:[1,528]},e(at,[2,67]),e(at,[2,323]),{39:[2,329]},e(Ut,[2,72]),{39:H,55:529},{39:[2,334]},{39:[2,335]},{31:[1,530]},e($t,[2,362],{196:531,251:[1,532]}),e(Ft,[2,367]),e([13,16,28,29,32,80,86,215,218,219,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,306],[2,102],{307:[1,533]}),{13:l,16:c,29:[1,539],53:536,187:[1,537],204:534,205:535,208:[1,538],286:h},e(Qt,[2,376]),{32:[1,540],251:[1,541]},{32:[1,542]},{251:[1,543]},e(ft,[2,83]),e(pt,[2,341]),e(ft,[2,163]),e(ft,[2,164]),{32:[1,544]},{32:[2,427]},{267:[1,545]},e(vt,[2,41]),e(jt,[2,261]),e(Vt,[2,308],{141:546,304:[1,547]}),e(St,[2,32]),e(St,[2,33]),e(Ct,[2,22]),e(Ut,[2,73]),{28:[1,548]},e([39,41,83,111,159,160,162,165,166,216,304],[2,98],{197:549,183:[1,550]}),e(T,[2,361]),e(Ft,[2,369]),e(Wt,[2,104]),e(Wt,[2,373],{206:551,308:552,293:[1,554],309:[1,553],310:[1,555]}),e(zt,[2,105]),e(zt,[2,106]),{13:l,16:c,29:[1,559],53:560,86:[1,558],187:Yt,209:556,210:557,213:Xt,286:h},e(Ft,At,{200:402,199:563}),e(ft,[2,81]),e(pt,[2,339]),e(ft,[2,156]),e(he,de,{220:183,224:184,228:185,232:186,240:187,244:188,30:564,208:ge,246:ye,310:fe}),e(ft,[2,165]),{268:[1,565]},e(T,O,{144:129,142:566,143:567,41:Kt,111:Kt}),e(Vt,[2,309]),{32:[1,568]},e($t,[2,363]),e($t,[2,99],{200:402,198:569,199:570,13:At,16:At,29:At,187:At,208:At,213:At,286:At,28:[1,571]}),e(Wt,[2,103]),e(Wt,[2,374]),e(Wt,[2,370]),e(Wt,[2,371]),e(Wt,[2,372]),e(zt,[2,107]),e(zt,[2,109]),e(zt,[2,110]),e(Zt,[2,377],{211:572}),e(zt,[2,112]),e(zt,[2,113]),{13:l,16:c,53:573,187:[1,574],286:h},{32:[1,575]},{32:[1,576]},{269:577,276:ee,277:te,278:re,279:ie},e(ve,[2,62]),e(ve,[2,311]),e(Ut,[2,75]),e(T,ut,{188:329,186:578}),e(T,[2,364]),e(T,[2,365]),{13:l,16:c,32:[2,379],53:560,187:Yt,210:580,212:579,213:Xt,286:h},e(zt,[2,114]),e(zt,[2,115]),e(zt,[2,108]),e(ft,[2,157]),{32:[2,166]},e($t,[2,100]),{32:[1,581]},{32:[2,380],306:[1,582]},e(zt,[2,111]),e(Zt,[2,378])],defaultActions:{5:[2,192],6:[2,193],8:[2,191],24:[2,1],25:[2,3],26:[2,203],69:[2,42],78:[2,280],92:[2,237],97:[2,343],220:[2,221],221:[2,85],251:[2,396],279:[2,417],371:[2,304],372:[2,305],453:[2,7],454:[2,207],461:[2,330],462:[2,331],486:[2,420],487:[2,421],493:[2,307],502:[2,329],505:[2,334],506:[2,335],521:[2,427],577:[2,166]},parseError:function(e,t){if(!t.recoverable){var r=new Error(e);throw r.hash=t,r}this.trace(e)},parse:function(e){var t=this,r=[0],i=[null],a=[],n=this.table,s="",o=0,u=0,l=0,c=a.slice.call(arguments,1),p=Object.create(this.lexer),h={yy:{}};for(var d in this.yy)Object.prototype.hasOwnProperty.call(this.yy,d)&&(h.yy[d]=this.yy[d]);p.setInput(e,h.yy),h.yy.lexer=p,h.yy.parser=this,void 0===p.yylloc&&(p.yylloc={});var g=p.yylloc;a.push(g);var y=p.options&&p.options.ranges;"function"==typeof h.yy.parseError?this.parseError=h.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var f,w,m,_,b,v,k,S,E,T=function(){var e;return"number"!=typeof(e=p.lex()||1)&&(e=t.symbols_[e]||e),e},C={};;){if(m=r[r.length-1],void 0===(_=this.defaultActions[m]?this.defaultActions[m]:(null==f&&(f=T()),n[m]&&n[m][f]))||!_.length||!_[0]){var q="";for(v in E=[],n[m])this.terminals_[v]&&2<v&&E.push("'"+this.terminals_[v]+"'");q=p.showPosition?"Parse error on line "+(o+1)+":\n"+p.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[f]||f)+"'":"Parse error on line "+(o+1)+": Unexpected "+(1==f?"end of input":"'"+(this.terminals_[f]||f)+"'"),this.parseError(q,{text:p.match,token:this.terminals_[f]||f,line:p.yylineno,loc:g,expected:E})}if(_[0]instanceof Array&&1<_.length)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+f);switch(_[0]){case 1:r.push(f),i.push(p.yytext),a.push(p.yylloc),r.push(_[1]),f=null,w?(f=w,w=null):(u=p.yyleng,s=p.yytext,o=p.yylineno,g=p.yylloc,0<l&&l--);break;case 2:if(k=this.productions_[_[1]][1],C.$=i[i.length-k],C._$={first_line:a[a.length-(k||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(k||1)].first_column,last_column:a[a.length-1].last_column},y&&(C._$.range=[a[a.length-(k||1)].range[0],a[a.length-1].range[1]]),void 0!==(b=this.performAction.apply(C,[s,u,o,h.yy,_[1],i,a].concat(c))))return b;k&&(r=r.slice(0,-1*k*2),i=i.slice(0,-1*k),a=a.slice(0,-1*k)),r.push(this.productions_[_[1]][0]),i.push(C.$),a.push(C._$),S=n[r[r.length-2]][r[r.length-1]],r.push(S);break;case 3:return!0}}return!0}},er="http://www.w3.org/1999/02/22-rdf-syntax-ns#",tr=er+"type",rr=er+"first",ir=er+"rest",ar=er+"nil",nr="http://www.w3.org/2001/XMLSchema#",sr=nr+"integer",or=nr+"decimal",ur=nr+"double",lr=nr+"boolean",cr='"true"^^'+lr,pr='"false"^^'+lr,hr="",dr="",gr="";function yr(e){return e.toLowerCase()}function fr(e,t){return e.push(t),e}function wr(e,t){return e.push.apply(e,t),e}function mr(e){e||(e={});for(var t,r=1,i=arguments.length;r<i&&(t=arguments[r]||{});r++)for(var a in t)e[a]=t[a];return e}function _r(){for(var e=[],t=0,r=arguments.length;t<r;t++)e=e.concat.apply(e,arguments[t]);return e}function br(e){if("<"===e[0]&&(e=e.substring(1,e.length-1)),/^[a-z]+:/.test(e))return e;if(!Ur.base)throw new Error("Cannot resolve relative IRI "+e+" because no base IRI was set.");switch(hr||(dr=(hr=Ur.base).replace(/[^\/:]*$/,""),gr=hr.match(/^(?:[a-z]+:\/*)?[^\/]*/)[0]),e[0]){case void 0:return hr;case"#":return hr+e;case"?":return hr.replace(/(?:\?.*)?$/,e);case"/":return gr+e;default:return dr+e}}function vr(e){if(e){var t=e[0];if("?"===t)return e;if("$"===t)return"?"+e.substr(1)}return e}function kr(e,t){return{type:"operation",operator:e,args:t||[]}}function Sr(e,t){var r={expression:e};if(t)for(var i in t)r[i]=t[i];return r}function Er(e,t){return{type:"path",pathType:e,items:t}}function Tr(e,t){for(var r,i=0,a=t.length;i<a&&(r=t[i]);i++)e=kr(r[0],[e,r[1]]);return e}function Cr(e){for(var t,r=[],i=[],a=e.length,n=0;n<a&&(t=e[n]);n++)(t.named?i:r).push(t.iri);return a?{from:{default:r,named:i}}:null}function qr(e){return parseInt(e,10)}function Fr(e){return"group"===e.type&&1===e.patterns.length?e.patterns[0]:e}function Ar(e,t){return'"'+e+'"^^'+t}function xr(e,t,r){var i={};return null!=e&&(i.subject=e),null!=t&&(i.predicate=t),null!=r&&(i.object=r),i}function Rr(){return"_:b"+Lr++}var Lr=0;Ur._resetBlanks=function(){Lr=0};var Ir=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\(.)/g,Dr={"\\":"\\","'":"'",'"':'"',t:"\t",b:"\b",n:"\n",r:"\r",f:"\f"},Nr=String.fromCharCode;function Or(e,t){e=e.substring(t,e.length-t);try{e=e.replace(Ir,function(e,t,r,i){var a;if(t){if(a=parseInt(t,16),isNaN(a))throw new Error;return Nr(a)}if(r){if(a=parseInt(r,16),isNaN(a))throw new Error;return a<65535?Nr(a):Nr(55296+((a-=65536)>>10),56320+(1023&a))}var n=Dr[i];if(!n)throw new Error;return n})}catch(e){return""}return'"'+e+'"'}function Br(t,e,r){var i=[],a=[];return e.forEach(function(e){i.push(xr(null,t,e.entity)),wr(a,e.triples)}),_r(i,r||[],a)}var Pr={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var a=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===i.length?this.yylloc.first_column:0)+i[i.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[a[0],a[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(20<e.length?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(20<e.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var r,i,a;if(this.options.backtrack_lexer&&(a={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(a.yylloc.range=this.yylloc.range.slice(0))),(i=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],r=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var n in a)this[n]=a[n];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var a=this._currentRules(),n=0;n<a.length;n++)if((r=this._input.match(this.rules[a[n]]))&&(!t||r[0].length>t[0].length)){if(t=r,i=n,this.options.backtrack_lexer){if(!1!==(e=this.test_match(r,a[n])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,a[i]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return 0<=(e=this.conditionStack.length-1-Math.abs(e||0))?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0,"case-insensitive":!0},performAction:function(e,t,r,i){switch(r){case 0:break;case 1:return 12;case 2:return 15;case 3:return 24;case 4:return 290;case 5:return 291;case 6:return 29;case 7:return 31;case 8:return 32;case 9:return 293;case 10:return 34;case 11:return 38;case 12:return 39;case 13:return 41;case 14:return 43;case 15:return 48;case 16:return 51;case 17:return 296;case 18:return 61;case 19:return 62;case 20:return 68;case 21:return 71;case 22:return 74;case 23:return 76;case 24:return 79;case 25:return 81;case 26:return 83;case 27:return 183;case 28:return 99;case 29:return 297;case 30:return 132;case 31:return 298;case 32:return 299;case 33:return 109;case 34:return 300;case 35:return 108;case 36:return 301;case 37:return 302;case 38:return 112;case 39:return 114;case 40:return 115;case 41:return 130;case 42:return 124;case 43:return 125;case 44:return 127;case 45:return 133;case 46:return 111;case 47:return 303;case 48:return 304;case 49:return 159;case 50:return 162;case 51:return 166;case 52:return 92;case 53:return 160;case 54:return 305;case 55:return 165;case 56:return 251;case 57:return 187;case 58:return 306;case 59:return 307;case 60:return 213;case 61:return 309;case 62:return 310;case 63:return 208;case 64:return 215;case 65:return 216;case 66:return 223;case 67:return 227;case 68:return 268;case 69:return 311;case 70:return 312;case 71:return 313;case 72:return 314;case 73:return 315;case 74:return 231;case 75:return 316;case 76:return 246;case 77:return 254;case 78:return 255;case 79:return 248;case 80:return 249;case 81:return 250;case 82:return 317;case 83:return 318;case 84:return 252;case 85:return 320;case 86:return 319;case 87:return 321;case 88:return 257;case 89:return 258;case 90:return 261;case 91:return 263;case 92:return 267;case 93:return 271;case 94:return 274;case 95:return 275;case 96:return 13;case 97:return 16;case 98:return 286;case 99:return 218;case 100:return 28;case 101:return 270;case 102:return 80;case 103:return 272;case 104:return 273;case 105:return 280;case 106:return 281;case 107:return 282;case 108:return 283;case 109:return 284;case 110:return 285;case 111:return"EXPONENT";case 112:return 276;case 113:return 277;case 114:return 278;case 115:return 279;case 116:return 86;case 117:return 219;case 118:return 6;case 119:return"INVALID";case 120:console.log(t.yytext)}},rules:[/^(?:\s+|#[^\n\r]*)/i,/^(?:BASE)/i,/^(?:PREFIX)/i,/^(?:SELECT)/i,/^(?:DISTINCT)/i,/^(?:REDUCED)/i,/^(?:\()/i,/^(?:AS)/i,/^(?:\))/i,/^(?:\*)/i,/^(?:CONSTRUCT)/i,/^(?:WHERE)/i,/^(?:\{)/i,/^(?:\})/i,/^(?:DESCRIBE)/i,/^(?:ASK)/i,/^(?:FROM)/i,/^(?:NAMED)/i,/^(?:GROUP)/i,/^(?:BY)/i,/^(?:HAVING)/i,/^(?:ORDER)/i,/^(?:ASC)/i,/^(?:DESC)/i,/^(?:LIMIT)/i,/^(?:OFFSET)/i,/^(?:VALUES)/i,/^(?:;)/i,/^(?:LOAD)/i,/^(?:SILENT)/i,/^(?:INTO)/i,/^(?:CLEAR)/i,/^(?:DROP)/i,/^(?:CREATE)/i,/^(?:ADD)/i,/^(?:TO)/i,/^(?:MOVE)/i,/^(?:COPY)/i,/^(?:INSERT\s+DATA)/i,/^(?:DELETE\s+DATA)/i,/^(?:DELETE\s+WHERE)/i,/^(?:WITH)/i,/^(?:DELETE)/i,/^(?:INSERT)/i,/^(?:USING)/i,/^(?:DEFAULT)/i,/^(?:GRAPH)/i,/^(?:ALL)/i,/^(?:\.)/i,/^(?:OPTIONAL)/i,/^(?:SERVICE)/i,/^(?:BIND)/i,/^(?:UNDEF)/i,/^(?:MINUS)/i,/^(?:UNION)/i,/^(?:FILTER)/i,/^(?:,)/i,/^(?:a)/i,/^(?:\|)/i,/^(?:\/)/i,/^(?:\^)/i,/^(?:\?)/i,/^(?:\+)/i,/^(?:!)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:\|\|)/i,/^(?:&&)/i,/^(?:=)/i,/^(?:!=)/i,/^(?:<)/i,/^(?:>)/i,/^(?:<=)/i,/^(?:>=)/i,/^(?:IN)/i,/^(?:NOT)/i,/^(?:-)/i,/^(?:BOUND)/i,/^(?:BNODE)/i,/^(?:(RAND|NOW|UUID|STRUUID))/i,/^(?:(LANG|DATATYPE|IRI|URI|ABS|CEIL|FLOOR|ROUND|STRLEN|STR|UCASE|LCASE|ENCODE_FOR_URI|YEAR|MONTH|DAY|HOURS|MINUTES|SECONDS|TIMEZONE|TZ|MD5|SHA1|SHA256|SHA384|SHA512|isIRI|isURI|isBLANK|isLITERAL|isNUMERIC))/i,/^(?:(LANGMATCHES|CONTAINS|STRSTARTS|STRENDS|STRBEFORE|STRAFTER|STRLANG|STRDT|sameTerm))/i,/^(?:CONCAT)/i,/^(?:COALESCE)/i,/^(?:IF)/i,/^(?:REGEX)/i,/^(?:SUBSTR)/i,/^(?:REPLACE)/i,/^(?:EXISTS)/i,/^(?:COUNT)/i,/^(?:SUM|MIN|MAX|AVG|SAMPLE)/i,/^(?:GROUP_CONCAT)/i,/^(?:SEPARATOR)/i,/^(?:\^\^)/i,/^(?:true)/i,/^(?:false)/i,/^(?:(<([^<>\"\{\}\|\^`\\\u0000-\u0020])*>))/i,/^(?:((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(((((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040])|\.)*(((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040]))?)?:))/i,/^(?:(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(((((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040])|\.)*(((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040]))?)?:)((((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|:|[0-9]|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))(((((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040])|\.|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*((((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040])|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(_:(((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(((((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040])|\.)*(((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040]))?))/i,/^(?:([\?\$]((((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(((?:([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9]|\u00B7|[\u0300-\u036F]|[\u203F-\u2040])*)))/i,/^(?:(@[a-zA-Z]+(-[a-zA-Z0-9]+)*))/i,/^(?:([0-9]+))/i,/^(?:([0-9]*\.[0-9]+))/i,/^(?:([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+)))/i,/^(?:(\+([0-9]+)))/i,/^(?:(\+([0-9]*\.[0-9]+)))/i,/^(?:(\+([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:(-([0-9]+)))/i,/^(?:(-([0-9]*\.[0-9]+)))/i,/^(?:(-([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:([eE][+-]?[0-9]+))/i,/^(?:('(([^\u0027\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])|\\U([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])))*'))/i,/^(?:("(([^\u0022\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])|\\U([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])))*"))/i,/^(?:('''(('|'')?([^'\\]|(\\[tbnrf\\\"']|\\u([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])|\\U([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))))*'''))/i,/^(?:("""(("|"")?([^\"\\]|(\\[tbnrf\\\"']|\\u([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])|\\U([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))))*"""))/i,/^(?:(\((\u0020|\u0009|\u000D|\u000A)*\)))/i,/^(?:(\[(\u0020|\u0009|\u000D|\u000A)*\]))/i,/^(?:$)/i,/^(?:.)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120],inclusive:!0}}};function Ur(){this.yy={}}return Jt.lexer=Pr,new((Ur.prototype=Jt).Parser=Ur)}();void 0!==i&&void 0!==a&&(a.parser=e,a.Parser=e.Parser,a.parse=function(){return e.parse.apply(e,arguments)},a.main=function(e){e[1]||(console.log("Usage: "+e[0]+" FILE"),r.exit(1));var t=i("fs").readFileSync(i("path").normalize(e[1]),"utf8");return a.parser.parse(t)},void 0!==t&&i.main===t&&a.main(r.argv.slice(1)))}).call(this,i("_process"))},{_process:1,fs:1,path:1}],4:[function(e,t,r){var n=e("./lib/SparqlParser").Parser,i=e("./lib/SparqlGenerator");t.exports={Parser:function(e,t){var r={};for(var i in e||{})r[i]=e[i];var a=new n;return a.parse=function(){return n.base=t||"",n.prefixes=Object.create(r),n.prototype.parse.apply(a,arguments)},a._resetBlanks=n._resetBlanks,a},Generator:i}},{"./lib/SparqlGenerator":2,"./lib/SparqlParser":3}]},{},[4])(4)}),function(a){"use strict";var n=function(e,t){this.cinit("clickover",e,t)};n.prototype=a.extend({},a.fn.popover.Constructor.prototype,{constructor:n,cinit:function(e,t,r){this.attr={},this.attr.me=(10*Math.random()+"").replace(/\D/g,""),this.attr.click_event_ns="click."+this.attr.me+" touchstart."+this.attr.me,r||(r={}),r.trigger="manual",this.init(e,t,r),this.$element.on("click",this.options.selector,a.proxy(this.clickery,this))},clickery:function(e){if(e&&(e.preventDefault(),e.stopPropagation()),this.options.width&&this.tip().width(this.options.width),this.options.height&&this.tip().height(this.options.height),this.options.tip_id&&this.tip().attr("id",this.options.tip_id),this.options.class_name&&this.tip().addClass(this.options.class_name),this[this.isShown()?"hide":"show"](),this.isShown()){var t=this;this.options.global_close&&a("body").on(this.attr.click_event_ns,function(e){t.tip().has(e.target).length||t.clickery()}),this.options.esc_close&&a(document).bind("keyup.clickery",function(e){27==e.keyCode&&t.clickery()}),!this.options.allow_multiple&&a("[data-clickover-open=1]").each(function(){a(this).data("clickover")&&a(this).data("clickover").clickery()}),this.$element.attr("data-clickover-open",1),this.tip().on("click",'[data-dismiss="clickover"]',a.proxy(this.clickery,this)),this.options.auto_close&&0<this.options.auto_close&&(this.attr.tid=setTimeout(a.proxy(this.clickery,this),this.options.auto_close)),"function"==typeof this.options.onShown&&this.options.onShown.call(this),this.$element.trigger("shown")}else this.$element.removeAttr("data-clickover-open"),this.options.esc_close&&a(document).unbind("keyup.clickery"),a("body").off(this.attr.click_event_ns),"number"==typeof this.attr.tid&&(clearTimeout(this.attr.tid),delete this.attr.tid),"function"==typeof this.options.onHidden&&this.options.onHidden.call(this),this.$element.trigger("hidden")},isShown:function(){return this.tip().hasClass("in")},resetPosition:function(){var e,t,r,i,a,n,s;if(this.hasContent()&&this.enabled){switch(e=this.tip(),n="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,t=/in/.test(n),r=this.getPosition(t),i=e[0].offsetWidth,a=e[0].offsetHeight,t?n.split(" ")[1]:n){case"bottom":s={top:r.top+r.height,left:r.left+r.width/2-i/2};break;case"top":s={top:r.top-a,left:r.left+r.width/2-i/2};break;case"left":s={top:r.top+r.height/2-a/2,left:r.left-i};break;case"right":s={top:r.top+r.height/2-a/2,left:r.left+r.width}}e.css(s)}},debughide:function(){var e=(new Date).toString();console.log(e+": clickover hide"),this.hide()}}),a.fn.clickover=function(i){return this.each(function(){var e=a(this),t=e.data("clickover"),r="object"==typeof i&&i;t||e.data("clickover",t=new n(this,r)),"string"==typeof i&&t[i]()})},a.fn.clickover.Constructor=n,a.fn.clickover.defaults=a.extend({},a.fn.popover.defaults,{trigger:"manual",auto_close:0,global_close:1,esc_close:1,onShown:null,onHidden:null,width:null,height:null,tip_id:null,class_name:"clickover",allow_multiple:0})}(window.jQuery),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.ui=wikibase.queryService.ui||{},wikibase.queryService.ui.App=function(s,a,i,n,o){"use strict";var r="query-helper-show";function e(e,t,r,i,a,n,s,o,u){this._$element=e,this._editor=t,this._queryHelper=r,this._sparqlApi=i,this._querySamplesApi=a,this._wikibaseApi=n,this._codeSamplesApi=s,this._shorten=o,this._queryBuilderUrl=u,this._init()}return e.prototype._$element=null,e.prototype._resultView=null,e.prototype._sparqlApi=null,e.prototype._querySamplesApi=null,e.prototype._wikibaseApi=null,e.prototype._codeSamplesApi=null,e.prototype._editor=null,e.prototype._queryHelper=null,e.prototype._isHistoryDisabled=!1,e.prototype._trackingApi=null,e.prototype._shorten=null,e.prototype._queryBuilderUrl=null,e.prototype._hasRunFirstQuery=!1,e.prototype._isQueryUnparsable=!1,e.prototype._navbarLabelTexts={},e.prototype._navbarLabelIDs=["#help-label","#examples-label","#tools-label","#language-toggle"],e.prototype._maximumWidthBeforeLineBroke=0,e.prototype._languageSelectorDefaultWidth=0,e.prototype._init=function(){this._trackingApi||(this._trackingApi=new wikibase.queryService.api.Tracking),this._resultView||(this._resultView=new wikibase.queryService.ui.ResultView(this._sparqlApi,this._querySamplesApi,this._wikibaseApi,this._codeSamplesApi,this._shorten,this._editor,this._queryBuilderUrl)),this._track("init"),this._initApp(),this._initEditor(),this._initQueryHelper(),this._initDataUpdated(),this._initQuery(),this._initRdfNamespaces(),this._initHandlers()},e.prototype._initApp=function(){var t=this;s(a).keydown(function(e){return t._keyboardShortcut(e)}),s("#display-button").tooltip(),s("#download-button").tooltip(),s("#link-button").tooltip(),this._actionBar=new wikibase.queryService.ui.toolbar.Actionbar(s(".action-bar")),s("body").on("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",".navbar-collapse",function(e){s(this).hasClass("in")&&s(a).trigger("resize")}),s(a).on("resize",function(){t._toggleLabelOnResize(),t._toggleBrandIconOnResize(),t._updateQueryEditorSize()})},e.prototype.resizeNavbar=function(){this._calculateNavBarWidth(),this._calculateNavBarText(),s(a).trigger("resize"),s(".navbar-collapse").removeClass("in"),this.resizableQueryHelper()},e.prototype._calculateNavBarWidth=function(){var e=0;s("#left-navbar li").each(function(){e+=s(this).width()}),this._maximumWidthBeforeLineBroke=30+e,this._languageSelectorDefaultWidth=s("#language-toggle").outerWidth()},e.prototype._calculateNavBarText=function(){var t=this;t._navbarLabelIDs.forEach(function(e){t._navbarLabelTexts[e]=s(e).text()})},e.prototype._toggleLabelOnResize=function(e){var t=this;s(".navbar-collapse").is(":visible")&&(s("#right-navbar").position().left+s("#right-navbar").width()-this._languageSelectorDefaultWidth<t._maximumWidthBeforeLineBroke?t._navbarLabelIDs.forEach(function(e){var t="";"#language-toggle"===e&&(t="&nbsp;"),s(e).html(t)}):t._navbarLabelIDs.forEach(function(e){s(e).text(t._navbarLabelTexts[e])}))},e.prototype._toggleBrandIconOnResize=function(e){s(".navbar-brand a span").css("vertical-align","middle"),30<s(".navbar-brand a span").position().top-s(".navbar-brand a img").position().top?s(".navbar-brand a span").css("opacity",0):s(".navbar-brand a span").css("opacity",1)},e.prototype._keyboardShortcut=function(e){return(e.ctrlKey||e.metaKey)&&"Enter"===e.key?(s("button#execute-button").click(),!1):s(document.activeElement).is("textarea, input")||s(document.activeElement).hasClass("CodeMirror-code")?void("Escape"===e.key&&s(document.activeElement).blur()):!this._KeyboardShortcutKeys(e)&&void 0},e.prototype._KeyboardShortcutKeys=function(e){if(e.ctrlKey||e.metaKey||e.altKey)return!1;var t={"?":function(){s("#keyboardShortcutHelpModal").modal("toggle")},i:function(){s(".CodeMirror textarea").focus()},r:function(){s("#query-result").find("a.item-link").first().focus()},f:function(){s("a#query-helper-filter").focus()},s:function(){s("a#query-helper-show").focus()},m:function(){s("a#query-helper-limit").click()},e:function(){s("#QueryExamples").is(":visible")||s("button#open-example").click()},h:function(){s("button#help-toggle").click()},l:function(){s("a#language-toggle").click()}};return e.key in t&&(t[e.key](),!0)},e.prototype._initEditor=function(){var i=this;this._editor.fromTextArea(this._$element.find(".queryEditor")[0]),this._editor.registerCallback("change",function(e,t){if(":"===t.text[0]){var r=s('<a target="_blank" rel="noopener" href="https://www.wikidata.org/wiki/Special:MyLanguage/Wikidata:SPARQL_query_service/Wikidata_Query_Help/SPARQL_Editor#Code_Completion">').append(s.i18n("wdqs-app-footer-help"));i._toast(r,"wdqs-app-footer-help")}}),s("#query-box .toolbar-top").css({visibility:"visible"})},e.prototype.resizableQueryHelper=function(){s(".query-helper").resizable({handleSelector:".splitter",resizeHeight:!1,onDrag:this._updateQueryHelperMinWidth.bind(this),onDragEnd:this._updateQueryEditorSize.bind(this),resizeWidthFrom:"rtl"===document.dir?"left":"right"})},e.prototype._initQueryHelper=function(){var t=this;this._queryHelper||(this._queryHelper=new wikibase.queryService.ui.queryHelper.QueryHelper),this._queryHelper.setChangeListener(function(e){t._editor.setValue(e.getQuery()),i.debounce(function(){t._resultView.drawPreview(e.getQuery())},1e3)()}),this.resizableQueryHelper(),"true"===n.get(r)&&(s(".query-helper").removeClass("query-helper-hidden"),s(".query-helper-tag-cloud").removeClass("query-helper-hidden")),this._editor&&this._editor.registerCallback("change",i.debounce(function(){t._editor.getValue()!==t._queryHelper.getQuery()&&t._drawQueryHelper()},1500)),s(".query-helper").bind("DOMSubtreeModified",i.debounce(function(){t._updateQueryHelperMinWidth(),t._updateQueryEditorSize()},100)),s(".query-helper .panel-heading .close").click(function(){return n.set(r,!1),t._hideQueryHelper(),t._track("buttonClick.queryHelperTrigger.close"),!1}),s(".query-helper-trigger").click(function(){var e=s(".query-helper").is(":visible");return s(".query-helper").toggleClass("query-helper-hidden",e),s(".query-helper-tag-cloud").toggleClass("query-helper-hidden"),n.set(r,!e),t._updateQueryEditorSize(),t._track("buttonClick.queryHelperTrigger."+(e?"close":"open")),!1}),a.setTimeout(s.proxy(this._drawQueryHelper,this),500)},e.prototype._hideQueryHelper=function(){s(".query-helper").addClass("query-helper-hidden"),s(".query-helper-tag-cloud").addClass("query-helper-hidden"),this._updateQueryEditorSize()},e.prototype._setUnparsable=function(e){e?(this._isQueryUnparsable=!0,s("#format-button").addClass("disabled")):(this._isQueryUnparsable=!1,s("#format-button").removeClass("disabled"))},e.prototype._drawQueryHelper=function(){try{this._queryHelper.setQuery(this._editor.getValue()||'SELECT * WHERE {  SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". } } LIMIT 100'),this._queryHelper.draw(s(".query-helper .panel-body")),s(".query-helper").css("min-width",""),this._setUnparsable(!1)}catch(e){this._setUnparsable(!0),a.console.error(e)}var e=this._editor.getStoredValue(),t=this._editor.getValue();e&&e.toString()!==t.toString()?s("#restore-button").removeClass("disabled"):s("#restore-button").addClass("disabled")},e.prototype._updateQueryHelperMinWidth=function(){var e=s(".query-helper"),t=e.find("table"),r=i.max(i.map(t,function(e){return s(e).width()}));r>e.width()&&e.css("min-width",Math.min(r+t.offset().left-e.offset().left,.5*s(a).width()))},e.prototype._updateQueryEditorSize=function(){this._editor&&(this._editor._editor.setSize(0,null),this._editor._editor.setSize(s(".query-editor-container").width(),null))},e.prototype._initRdfNamespaces=function(){var e,t,r,i=s(".namespace-shortcuts"),a=wikibase.queryService.RdfNamespaces.NAMESPACE_SHORTCUTS;for(e in i.click(function(e){e.stopPropagation()}),a)for(r in t=s("<select>").attr("class","form-control").append(s("<option>").text(e)).appendTo(i),a[e])t.append(s("<option>").text(r).attr("value",a[e][r]))},e.prototype._initQuery=function(){""!==a.location.hash&&(0===location.hash.indexOf("#result#")&&(location.hash=location.hash.replace("#result#","#")),this._isHistoryDisabled=!0,this._editor.setValue(decodeURIComponent(a.location.hash.substr(1))),this._editor.refresh(),this._isHistoryDisabled=!1)},e.prototype._initDataUpdated=function(){var e=this,n=s(".dataUpdated"),t=function(){e._sparqlApi.queryDataUpdatedTime().done(function(e,t){var r="list-group-item-danger";t<=120?r="list-group-item-success":t<=900&&(r="list-group-item-warning"),n.html(s("<a>").addClass("fa fa-refresh badge "+r).html(" "))})};t(),a.setInterval(t,6e5),n.hover(function(){t();var a=s(this);e._sparqlApi.queryDataUpdatedTime().done(function(e,t){var r=e,i='<span class="badge">'+o.duration(-t,"seconds").humanize(!0)+"</span>";n.attr("title",r),a.popover({html:!0,trigger:"hover",placement:"top",content:s.i18n("wdqs-app-footer-updated-ago",i)})}).fail(function(){a.popover({content:"[unable to connect]"})})},function(){s(this).popover("destroy")})},e.prototype._isEmptyQuery=function(){if(""===this._editor.getValue())return!0},e.prototype._initHandlers=function(){var r=this;s("#query-form").submit(s.proxy(this._handleQuerySubmit,this)),s(".namespace-shortcuts").on("change","select",s.proxy(this._handleNamespaceSelected,this)),s(".addPrefixes").click(function(){var t=wikibase.queryService.RdfNamespaces.STANDARD_PREFIXES,e=Object.keys(t).map(function(e){return t[e]}).join("\n");r._editor.prepandValue(e+"\n\n"),r._track("buttonClick.addPrefixes")}),s("#format-button").click(function(){r._drawQueryHelper(),!0!==r._isQueryUnparsable&&r._editor.setValue(r._queryHelper.getQuery()),r._track("buttonClick.standardizeFormat")}),s('[data-target="#QueryExamples"]').click(function(){r._track("buttonClick.examples")}),s("#clear-button").click(function(){r._editor.setValue(""),r._drawQueryHelper(),r._track("buttonClick.clear")}),s(".restore").click(function(e){r._track("buttonClick.restore"),e.preventDefault(),r._editor.restoreValue(),r._drawQueryHelper()}),s(".fullscreen-toggle").click(function(e){r._track("buttonClick.fullscreen"),e.preventDefault(),r._toggleFullscreen()}),s(a).on("popstate",s.proxy(this._initQuery,this)),this._initPopovers()},e.prototype._toggleFullscreen=function(){if(document.fullscreenElement||document.mozFullScreenElement||document.webkitIsFullScreen||document.msFullscreenElement)document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else{var e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?(e=document.body).msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullScreen()}},e.prototype._initPopovers=function(){var i=this;s(".shortUrlTrigger.query").clickover({placement:"right",global_close:!0,html:!0,sanitize:!1,content:function(){return i._updateQueryUrl(),i._shorten.shorten(a.location.href)}}).click(function(){i._track("buttonClick.shortUrlQuery")}),s(".embed.result").clickover({placement:"left",global_close:!0,html:!0,content:function(){i._updateQueryUrl();var e="";i._selectedResultBrowser&&(e="#defaultView:"+i._selectedResultBrowser+"\n",e=encodeURIComponent(e));var t=s("<a>").attr("href","embed.html#"+e+a.location.hash.substring(1)),r=s("<textarea>").text('<iframe style="width: 80vw; height: 50vh; border: none;" src="'+t[0].href+'" referrerpolicy="origin" sandbox="allow-scripts allow-same-origin allow-popups" ></iframe>').click(function(){r.select()});return r}}).click(function(){i._track("buttonClick.embedResult")})},e.prototype._handleQuerySubmit=function(e){var t=this;this._track("buttonClick.execute"),this._hasRunFirstQuery||(this._track("firstQuery"),this._hasRunFirstQuery=!0),e.preventDefault(),this._editor.save(),this._updateQueryUrl(),s("#execute-button").prop("disabled",!0),this._isEmptyQuery()?(s("#query-result").hide(),s("#query-error").hide(),s(".label-danger").hide(),s("#empty-query-error").show(),s("#execute-button").prop("disabled",!1)):(s("#empty-query-error").hide(),this._resultView.draw(this._editor.getValue()).catch(function(e){try{t._editor.highlightError(e)}catch(e){}}).then(function(){s("#execute-button").prop("disabled",!1)}))},e.prototype._handleNamespaceSelected=function(e){var t,r=e.target.value,i=this._editor.getValue();-1===i.indexOf("<"+r+">")&&(t=s(e.target).find(":selected").text(),this._editor.setValue("PREFIX "+t+": <"+r+">\n"+i)),e.target.selectedIndex=0},e.prototype._updateQueryUrl=function(){if(!this._isHistoryDisabled){var e=encodeURIComponent(this._editor.getValue());e=e.replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)}),a.location.hash!==e&&(a.history.pushState?a.history.pushState(null,null,"#"+e):a.location.hash=e)}},e.prototype._toast=function(e,t){var r="hide-toast-"+t;n.get(r)||s.toast({loader:!1,stack:1,text:e[0].outerHTML,afterShown:function(){s(".close-jq-toast-single").click(function(){n.set(r,!0)})}})},e.prototype._track=function(e,t,r){this._trackingApi.track("wikibase.queryService.ui.app."+e,t,r)},e}(jQuery,window,_,Cookies,moment),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.ui=wikibase.queryService.ui||{},wikibase.queryService.ui.toolbar=wikibase.queryService.toolbar||{},wikibase.queryService.ui.toolbar.Actionbar=function(n){"use strict";function e(e){this._$element=e}return e.prototype._$element=null,e.prototype.show=function(e,t,r,i){var a=e;n.i18n&&(a=n.i18n(e)),""!==t&&(a=a+": "+t),this._$element.find(".message").html(""),r||(r="info"),void 0===i||!1===i?this._$element.find(".message").append(this._getBar(a,r)):this._$element.find(".message").append(this._getProgressbar(a,r,i)),this._$element.show()},e.prototype._getProgressbar=function(e,t,r){return n('<div class="progress"><div class="progress-bar progress-bar-'+t+' progress-bar-striped active" role="progressbar" style="width: '+r+'%">'+e+"</div></div>")},e.prototype._getBar=function(e,t){return n('<div class="label label-'+t+'"/>').text(e)},e.prototype.hide=function(){this._$element.hide()},e}(jQuery),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.ui=wikibase.queryService.ui||{},wikibase.queryService.ui.i18n=wikibase.queryService.ui.i18n||{},wikibase.queryService.ui.i18n.LanguageSelector=function(i,a){"use strict";function e(e,t,r){this._$element=e,this._api=t||new a.queryService.api.Wikibase,this._defaultLanguage=r,this._create()}return e.prototype._api=null,e.prototype._$element=null,e.prototype._defaultLanguage=null,e.prototype._changeListener=null,e.prototype.setChangeListener=function(e){this._changeListener=e},e.prototype._create=function(e){var t=this;this._$element.text(i.uls.data.getAutonym(this._defaultLanguage)),this._getLanguages().done(function(e){t._$element.uls({onSelect:function(e){t._$element.text(i.uls.data.getAutonym(e)),t._changeListener&&t._changeListener(e)},languages:e}).click(function(){i(".uls-menu").addClass("uls-mobile").css("left","").css("right","2.5%")}).css("display","block")})},e.prototype._getLanguages=function(){var t=i.Deferred();return this._api.getLanguages().done(function(e){var r={};i.each(e.query.languages,function(e,t){r[t.code]=t["*"]}),t.resolve(r)}),t.promise()},e}(jQuery,wikibase),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.ui=wikibase.queryService.ui||{},wikibase.queryService.ui.i18n=wikibase.queryService.ui.i18n||{},wikibase.queryService.ui.i18n.getMessage=function(a){"use strict";return function(t,e,r){var i=null;if(a.i18n)try{if((i=a.i18n.apply(a,[t].concat(r||[])))!==t)return i}catch(e){window.console.warn('$.i18n( "'+t+'" ) threw error, invalid translation?'),window.console.warn(e)}return i=e,r&&a.each(r,function(e,t){i=i.replace(new RegExp("\\$"+(e+1),"g"),t)}),i}}(jQuery),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.ui=wikibase.queryService.ui||{},wikibase.queryService.ui.editor=wikibase.queryService.ui.editor||{},wikibase.queryService.ui.editor.hint=wikibase.queryService.ui.editor.hint||{},function(u,e){"use strict";var t=wikibase.queryService.ui.editor.hint,a=["SELECT","SELECT * WHERE {\n\n}","SELECT (COUNT(*) AS ?count) WHERE {\n\n}",'SELECT ?item ?itemLabel WHERE {\n    SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }\n}',"OPTIONAL","OPTIONAL {\n\n}","WHERE","WHERE {\n\n}","ORDER","ORDER BY","DISTINCT","SERVICE",'SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }',"BASE","PREFIX","REDUCED","FROM","LIMIT","OFFSET","HAVING","UNION","SAMPLE","(SAMPLE() AS )","COUNT","(COUNT() AS )","DESC","DESC()","ASC","ASC()","FILTER ()","FILTER NOT EXISTS","FILTER NOT EXISTS {\n\n}","UNION","UNION {\n\n}","BIND","BIND ()","GROUP_CONCAT","(GROUP_CONCAT() as )","ORDER BY","#defaultView:Map","#defaultView:ImageGrid","#defaultView:Map","#defaultView:BubbleChart","#defaultView:TreeMap","#defaultView:Tree","#defaultView:Timeline","#defaultView:Dimensions","#defaultView:Graph","#defaultView:LineChart","#defaultView:BarChart","#defaultView:ScatterChart","#defaultView:AreaChart",'SERVICE wikibase:around {\n    ?place wdt:P625 ?location.\n    bd:serviceParam wikibase:center "[AUTO_COORDINATES]" .\n    bd:serviceParam wikibase:radius "1" .\n    bd:serviceParam wikibase:distance ?dist.\n  }',"SERVICE wikibase:box {\n    ?place wdt:P625 ?location.\n    bd:serviceParam wikibase:cornerWest ? .\n    bd:serviceParam wikibase:cornerEast ? .\n  }",'hint:Query hint:optimizer "None".','#TEMPLATE={ "template": { "en": "Textual description of template, referencing ?var" }, "variables": { "?var": { "query": "SELECT ?id WHERE { ?id wdt:P31 wd:Q146. }" } } }'],n=["wikibase:rank","wikibase:badge","wikibase:propertyType","wikibase:directClaim","wikibase:claim","wikibase:statementProperty","wikibase:statementValue","wikibase:qualifier","wikibase:qualifierValue","wikibase:reference","wikibase:referenceValue","wikibase:statementValueNormalized","wikibase:qualifierValueNormalized","wikibase:referenceValueNormalized","wikibase:novalue","wikibase:Property","wikibase:Reference","wikibase:Dump","wikibase:PreferredRank","wikibase:NormalRank","wikibase:DeprecatedRank","wikibase:BestRank","wikibase:TimeValue","wikibase:QuantityValue","wikibase:GlobecoordinateValue","wikibase:WikibaseItem","wikibase:CommonsMedia","wikibase:GlobeCoordinate","wikibase:Monolingualtext","wikibase:Quantity","wikibase:String","wikibase:Time","wikibase:Url","wikibase:ExternalId","wikibase:WikibaseProperty","wikibase:Math","wikibase:statements","wikibase:sitelinks","wikibase:timeValue","wikibase:timePrecision","wikibase:timeTimezone","wikibase:timeCalendarModel","wikibase:quantityAmount","wikibase:quantityUpperBound","wikibase:quantityLowerBound","wikibase:quantityUnit","wikibase:quantityNormalized","wikibase:geoLatitude","wikibase:geoLongitude","wikibase:geoPrecision","wikibase:geoGlobe","wikibase:wikiGroup","wikibase:hasViolationForConstraint","schema:about","schema:name","schema:description","schema:dateModified","schema:Article","schema:inLanguage","schema:isPartOf","rdfs:label","rdf:type","skos:altLabel","xsd:dateTime","xsd:integer","xsd:double","xsd:decimal","geo:wktLiteral","owl:sameAs","prov:wasDerivedFrom","ontolex:LexicalEntry","ontolex:Form","ontolex:LexicalSense","ontolex:lexicalForm","ontolex:sense","ontolex:representation","wikibase:lemma","wikibase:lexicalCategory","wikibase:grammaticalFeature","dct:language"],i=/\?[A-Za-z0-9_\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][A-Za-z0-9_\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]*/g,s=/[A-Za-z0-9_\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD?#:]/,o=/[A-Za-z0-9_\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD:]/,r=t.Sparql=function(){};r.prototype.getHint=function(e,t,r,i){var a=this._getCurrentWord(t,i),n=[],s=new u.Deferred;if(0===a.word.indexOf("?")&&(n=n.concat(this._getVariableHints(a.word,this._getDefinedVariables(e)))),0<(n=n.concat(this._getSPARQLHints(a.word))).length){var o=this._getHintCompletion(a,n,r);return s.resolve(o).promise()}return s.reject().promise()},r.prototype._getSPARQLHints=function(r){var i=[];return u.each(a,function(e,t){0<=t.toLowerCase().indexOf(r.toLowerCase())&&i.push(t)}),u.each(n,function(e,t){0===t.toLowerCase().indexOf(r.toLowerCase())&&i.push(t)}),i},r.prototype._getDefinedVariables=function(e){var r={};return u.each(e.match(i),function(e,t){r[t]=!0}),Object.keys(r)},r.prototype._getVariableHints=function(r,e){var i=[];return r&&"?"!==r?(u.each(e,function(e,t){0===t.toLowerCase().indexOf(r.toLowerCase())&&i.push(t)}),i):e},r.prototype._getHintCompletion=function(e,t,r){var i={list:[]};return i.from={line:r,char:e.start},i.to={line:r,char:e.end},i.list=t,i},r.prototype._getCurrentWord=function(e,t){var r=t-1;for(r<0&&(r=0);s.test(e.charAt(r))&&!(--r<0););var i=r+1;for(r=t;o.test(e.charAt(r))&&!(++r>=e.length););var a=r;return{word:e.substring(i,a),start:i,end:a}}}(jQuery),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.ui=wikibase.queryService.ui||{},wikibase.queryService.ui.editor=wikibase.queryService.ui.editor||{},wikibase.queryService.ui.editor.hint=wikibase.queryService.ui.editor.hint||{},function(p,r){"use strict";var e=r.queryService.ui.editor.hint.Rdf=function(e,t){this._api=e,this._rdfNamespaces=t,this._api||(this._api=new r.queryService.api.Wikibase),this._rdfNamespaces||(this._rdfNamespaces=r.queryService.RdfNamespaces)};e.prototype._rdfNamespaces=null,e.prototype._api=null,e.prototype.getHint=function(e,t,r,i){var a,n,s,o,u=new p.Deferred,l=this._getCurrentWord(t,i),c=this;return l.word.match(/\S+:\S*/)?(n=this._getPrefixFromWord(l.word.trim()),s=this._getTermFromWord(l.word.trim()),(o=this._extractPrefixes(e))[n]?0===s.length?(a=[{text:s,displayText:"Type to search for an entity"}],u.resolve(this._getHintCompletion(r,l,n,a)).promise()):(o[n]&&this._searchEntities(s,o[n]).done(function(e){return u.resolve(c._getHintCompletion(r,l,n,e))}),u.promise()):this._rdfNamespaces.ALL_PREFIXES&&this._rdfNamespaces.ALL_PREFIXES[n]?u.reject().promise():(a=[{text:s,displayText:"Unknown prefix '"+n+":'"}],u.resolve(this._getHintCompletion(r,l,n,a)).promise())):u.reject().promise()},e.prototype._getPrefixFromWord=function(e){return e.split(":",1)[0]},e.prototype._getTermFromWord=function(e){return e.substring(e.indexOf(":")+1)},e.prototype._getHintCompletion=function(e,t,r,i){var a={list:[]};return a.from={line:e,char:t.start+r.length+1},a.to={line:e,char:t.end},a.list=i,a},e.prototype._searchEntities=function(e,t){var r=[],i=p.Deferred();return this._api.searchEntities(e,t).done(function(e){p.each(e.search,function(e,a){r.push({className:"wikibase-rdf-hint",text:a.id,render:function(e,t,r){var i=document.createElement("bdi");e.appendChild(document.createTextNode(a.label)),e.appendChild(document.createTextNode(" (")),i.textContent=a.id,e.appendChild(i),e.appendChild(document.createTextNode(") ")),e.appendChild(document.createTextNode(a.description)),e.appendChild(document.createTextNode("\n"))}})}),i.resolve(r)}),i.promise()},e.prototype._getCurrentWord=function(e,t){var r=t-1,i=!1,a=["/","*","+"," ",";",".","\n","\t","(",")","{","}","[","]"];for(r<0&&(r=0);(-1===a.indexOf(e.charAt(r))||" "===e.charAt(r)&&!1===i||":"===e.charAt(r)&&!1===i)&&(":"===e.charAt(r)&&(i=!0),!(--r<0)););var n=r+1;for(r=t;-1===a.indexOf(e.charAt(r))&&!(++r>=e.length););var s=r;return{word:e.substring(n,s),start:n,end:s}},e.prototype._extractPrefixes=function(e){var r,i=this._rdfNamespaces.getPrefixMap(this._rdfNamespaces.ENTITY_TYPES),a=this._rdfNamespaces.ENTITY_TYPES,t=e.split("\n");return p.each(t,function(e,t){(r=t.match(/(PREFIX) (\S+): <([^>]+)>/))&&a[r[3]]&&(i[r[2]]=a[r[3]])}),i}}(jQuery,wikibase),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.ui=wikibase.queryService.ui||{},wikibase.queryService.ui.editor=wikibase.queryService.ui.editor||{},wikibase.queryService.ui.editor.tooltip=wikibase.queryService.ui.editor.tooltip||{},wikibase.queryService.ui.editor.tooltip.Rdf=function(e,u,r){"use strict";function t(e,t){this._api=e,this._rdfNamespaces=t,this._api||(this._api=new wikibase.queryService.api.Wikibase),this._rdfNamespaces||(this._rdfNamespaces=wikibase.queryService.RdfNamespaces)}return t.prototype._rdfNamespaces=null,t.prototype._editor=null,t.prototype.setEditor=function(e){this._editor=e,this._registerHandler()},t.prototype._registerHandler=function(){var t=this;e.on(this._editor.getWrapperElement(),"mouseover",r.debounce(function(e){t._triggerTooltip(e)},300))},t.prototype._triggerTooltip=function(e){this._removeToolTip(),this._createTooltip(e)},t.prototype._createTooltip=function(e){var t=e.clientX,r=e.clientY+u(window).scrollTop(),i=this._editor.getTokenAt(this._editor.coordsChar({left:t,top:r})).string;if(i.match(/.+\:(Q|P)[0-9]*/)){var a=this._extractPrefixes(this._editor.doc.getValue()),n=i.split(":",1)[0],s=i.split(":").pop();if(a[n]){var o=this;this._searchEntities(s,a[n]).done(function(e){o._showToolTip(e.shift(),{x:t,y:r})})}}},t.prototype._removeToolTip=function(){u(".wikibaseRDFtoolTip").remove()},t.prototype._showToolTip=function(e,t){e&&t&&u('<div class="panel panel-info">').css("position","absolute").css("z-index","100").css("max-width","200px").css({top:t.y+2,left:t.x+2}).addClass("wikibaseRDFtoolTip").append(u('<div class="panel-body">').append(e).css("padding","10px")).appendTo("body").fadeIn("slow")},t.prototype._extractPrefixes=function(e){var r,i=this._rdfNamespaces.getPrefixMap(this._rdfNamespaces.ENTITY_TYPES),t=e.split("\n"),a=this;return u.each(t,function(e,t){(r=t.match(/(PREFIX) (\S+): <([^>]+)>/))&&a._rdfNamespaces.ENTITY_TYPES[r[3]]&&(i[r[2]]=a._rdfNamespaces.ENTITY_TYPES[r[3]])}),i},t.prototype._searchEntities=function(e,t){var r=[],i=u.Deferred();return this._api.searchEntities(e,t).done(function(e){u.each(e.search,function(e,t){r.push(u().add(document.createTextNode(t.label+" ("+t.id+")")).add(u("<br>")).add(u("<small>").text(t.description||"")))}),i.resolve(r)}),i.promise()},t}(CodeMirror,jQuery,_),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.ui=wikibase.queryService.ui||{},wikibase.queryService.ui.editor=wikibase.queryService.ui.editor||{},wikibase.queryService.ui.editor.Editor=function(r,a,n){"use strict";var t={lineNumbers:!0,matchBrackets:!0,mode:"sparql",extraKeys:{"Ctrl-Space":"autocomplete","Ctrl-Alt-Space":"autocomplete","Alt-Enter":"autocomplete",Tab:function(e){var t=Array(e.getOption("indentUnit")+1).join(" ");e.replaceSelection(t)},F11:function(e){e.setOption("fullScreen",!e.getOption("fullScreen"))},Esc:function(e){e.getOption("fullScreen")&&e.setOption("fullScreen",!1)},"Ctrl-/":function(e){e.toggleComment({commentBlankLines:!0,fullLines:!0})}},viewportMargin:1/0,hintOptions:{closeCharacters:/[]/,completeSingle:!1}},s=null,o=null,i="wikibase.queryService.ui.Editor";function e(e,t,r,i){this._rdfHint=e,this._sparqlHint=t,this._rdfTooltip=r,this._focus=(i||{}).focus,this._sparqlHint||(this._sparqlHint=new a.queryService.ui.editor.hint.Sparql),this._rdfHint||(this._rdfHint=new a.queryService.ui.editor.hint.Rdf),this._rdfTooltip||(this._rdfTooltip=new a.queryService.ui.editor.tooltip.Rdf),void 0===this._focus&&(this._focus=!0)}return e.prototype._editor=null,e.prototype._sparqlHint=null,e.prototype._rdfHint=null,e.prototype._rdfTooltip=null,e.prototype._focus=null,e.prototype.fromTextArea=function(e){var r=this;this._editor=n.fromTextArea(e,t),this._editor.on("change",function(e,t){""!==r.getValue()&&r.storeValue(r.getValue()),r.clearError(),"?"!==t.text[0]&&"#"!==t.text[0]||e.showHint({closeCharacters:/[\s]/})}),this._focus&&this._editor.focus(),this._rdfTooltip.setEditor(this._editor),this._registerHints()},e.prototype._registerHints=function(){var o=this;n.registerHelper("hint","sparql",function(e,t,r){if(e===o._editor){var i=e.getLine(e.getCursor().line),a=e.doc.getValue(),n=e.getCursor().ch,s=e.getCursor().line;o._getHints(a,i,s,n).done(function(e){t(e)})}}),n.hint.sparql.async=!0},e.prototype._getHints=function(e,t,r,i){var a=this;return this._rdfHint.getHint(e,t,r,i).catch(function(){return a._sparqlHint.getHint(e,t,r,i)}).then(function(e){return e.from=n.Pos(e.from.line,e.from.char),e.to=n.Pos(e.to.line,e.to.char),e})},e.prototype.addKeyMap=function(e,t){this._editor.addKeyMap({keyMap:t})},e.prototype.setValue=function(e){this._editor.setValue(e)},e.prototype.getValue=function(){return this._editor.getValue()},e.prototype.save=function(){this._editor.save()},e.prototype.prepandValue=function(e){this._editor.setValue(e+this._editor.getValue())},e.prototype.refresh=function(){this._editor.refresh()},e.prototype.highlightError=function(e){var t,r,i=null;(i=e.match(/line ([0-9]*)\:/i))&&(t=i[1]),(i=e.match(/line (\d+), column (\d+)/))&&(t=i[1]-1,(r=i[2]-1)>=this._editor.doc.getLine(t).length-1&&(r=this._editor.doc.getLine(t).length-1),o=this._editor.doc.markText({line:t,ch:r},{line:t,ch:r+1},{className:"error-character"})),t&&(s=this._editor.doc.markText({line:t,ch:0},{line:t},{className:"error-line"}))},e.prototype.clearError=function(){s&&s.clear(),o&&o.clear()},e.prototype.storeValue=function(e){try{localStorage&&localStorage.setItem(i,e)}catch(e){}},e.prototype.getStoredValue=function(){var e=null;try{localStorage&&(e=localStorage.getItem(i))}catch(e){}return e},e.prototype.restoreValue=function(){try{var e=this.getStoredValue();e&&(this.setValue(e),this.refresh())}catch(e){}},e.prototype.registerCallback=function(e,t){this._editor.on(e,t)},e.prototype.toggleFullscreen=function(e){this._editor.setOption("fullScreen",!this._editor.getOption("fullScreen"))},e.prototype.focus=function(){this._editor.focus()},e.prototype.updatePlaceholder=function(e){var t=this._editor.getTextArea().placeholder;this._editor.options.placeholder=t,r(this._editor.display.wrapper).find(".CodeMirror-placeholder").text(t)},e}(jQuery,wikibase,CodeMirror),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.ui=wikibase.queryService.ui||{},wikibase.queryService.ui.queryHelper=wikibase.queryService.ui.queryHelper||{},wikibase.queryService.ui.queryHelper.QueryHelper=function(c,p,n){"use strict";var t={"http://www.w3.org/2000/01/rdf-schema#label":!0,"http://schema.org/description":!0,"http://www.bigdata.com/queryHints#optimizer":!0,"http://www.w3.org/1999/02/22-rdf-syntax-ns#type":!0},s={formatNoMatches:function(){}};function e(e,t,r){this._api=e||new p.queryService.api.Wikibase,this._selectorBox=r||new p.queryService.ui.queryHelper.SelectorBox(this._api,t),this._query=new p.queryService.ui.queryHelper.SparqlQuery}return e.prototype._api=null,e.prototype._selectorBox=null,e.prototype._changeListener=null,e.prototype._query=null,e.prototype._$element=null,e.prototype._triples=[],e.prototype._isSimpleMode=!1,e.prototype.setQuery=function(e){var t=p.queryService.RdfNamespaces.ALL_PREFIXES;this._query.parse(e,t),this._selectorBox.setQuery(this._query)},e.prototype.getQuery=function(){try{var e=this._query.getQueryString();return(e=this._cleanQueryPrefixes(e).trim()).trim()}catch(e){return null}},e.prototype._cleanQueryPrefixes=function(e){for(var t,r=/PREFIX ([a-z]+): <(.*)>/gi,i={},a=e.replace(r,"").replace(/\n+/g,"\n");t=r.exec(e);){var n=t[1],s=t[2].replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),o=a.replace(new RegExp("<"+s+"([^/>#]+?)>","gi"),n+":$1");a!==o&&(a=o,p.queryService.RdfNamespaces.STANDARD_PREFIXES[n]||(i[t[0]]=!0))}return a=Object.keys(i).join("\n")+"\n\n"+a.trim()},e.prototype.draw=function(e){var t=p.queryService.ui.queryHelper.QueryTemplate.parse(this._query),i=this,a=this._query.getBindings();if(e&&(this._$element=e),null!==t)try{return this._$element.html(t.getHtml(function(e){return i._getLabel(a[e].expression)},this._selectorBox,function(e,t,r){a[e].expression=a[e].expression.replace(new RegExp(t+"$"),"")+r,i._changeListener&&i._changeListener(i)}))}catch(e){window.console.error(e)}this._triples=this._query.getTriples();for(var r=this._query.getSubQueries();0<r.length;){var n=r.pop();this._triples=this._triples.concat(n.getTriples()),r.concat(n.getSubQueries())}this._isSimpleMode=this._isSimpleQuery(),this._$element.html(this._getHtml())},e.prototype.setChangeListener=function(e){this._changeListener=e},e.prototype._i18nSpan=function(e,t){return c("<span>").attr("data-i18n",e).text(p.queryService.ui.i18n.getMessage(e,t))},e.prototype._getHtml=function(){var r=this,e=c("<div>").attr("class","panel-body-sub"),i=c("<table>").attr("class","query-helper-data").bootstrapTable(s),a=c("<table>").attr("class","query-helper-data").bootstrapTable(s);return c.each(this._triples,function(e,t){r._isNotRelevant(t.triple)||(r._isInShowSection(t.triple)?a.append(r._getTripleHtml(t)):i.append(r._getTripleHtml(t)))}),this._createTagCloud(),e.append(this._createSection(i,this._createFindButton(i)),this._createSection(a,this._createShowButton(a)),this._getLimitSection())},e.prototype._createTagCloud=function(){},e.prototype._getLimitSection=function(){var e=c("<div>").attr("class","query-helper-limit-section"),t=c('<a data-type="number">').attr("href","#").attr("id","query-helper-limit").data("value",this._query.getLimit()).append(this._i18nSpan("wdqs-ve-limit","Limit")),r=c("<span>").text(this._query.getLimit()||""),i=this;return this._selectorBox.add(t,null,function(e){"0"===e&&(e=null),r.text(e||""),i._query.setLimit(e),i._changeListener&&i._changeListener(i)},{trash:function(){return i._query.setLimit(null),t.data("value",""),r.text(""),i._changeListener&&i._changeListener(i),i._createTagCloud(),!0}}),e.append(t.append(" ",r))},e.prototype._createSection=function(e,t){return c("<table>").attr("class","query-helper-section").append(c("<tr>").append(c("<td>").append(t),c("<td>").append(e)))},e.prototype._createTagCloudShow=function(){var o=this,e=c('<div data-entity="property" data-type="tagCloud" class="tagCloud">');return this._selectorBox.add(e,null,function(e,t,r){var i="http://www.wikidata.org/prop/direct/"+e,a=o._query.getBoundVariables().shift()||"?item",n="?"+t.replace(/( |[^a-z0-9])/gi,"_"),s=o._query.addTriple(a,i,n,!0);o._query.addVariable(n),o._addLabelVariableAfterItemColumn(i.split("/").pop(),s),o._changeListener&&o._changeListener(o),o.draw()}),e},e.prototype._createTagCloudFilter=function(){var u=this,e=c('<div data-entity="item" data-type="tagCloud" class="tagCloud">');return u._selectorBox.add(e,null,function(e,t,r,i){var a="http://www.wikidata.org/entity/"+e,n=u._query.getBoundVariables().shift();n||(n="?"+t.replace(/( |[^a-z0-9])/gi,"_"));var s="http://www.wikidata.org/prop/direct/"+(r||"P31"),o=u._query.addTriple(n,s,a,!1);u._query.hasVariable(n)||u._query.addVariable(n),u._addLabelVariableAfterItemColumn(s.split("/").pop(),o),u._changeListener&&u._changeListener(u),u.draw()}),e},e.prototype._createFindButton=function(o){var e=c('<a class="btn">').append(this._i18nSpan("wdqs-ve-filter","Filter")).attr("href","#").prepend('<span class="fa fa-plus" aria-hidden="true"></span>'," ").tooltip({title:"Click to add new item"}).attr("id","query-helper-filter").attr("data-type","item").attr("data-auto_open",!0),u=this;return this._selectorBox.add(e,null,function(e,t,r){var i="http://www.wikidata.org/entity/"+e,a=u._query.getBoundVariables().shift();a||(a="?"+t.replace(/( |[^a-z0-9])/gi,"_"));var n="http://www.wikidata.org/prop/direct/"+(r||"P31"),s=u._query.addTriple(a,n,i,!1);u._query.hasVariable(a)||u._query.addVariable(a),u._addLabelVariableAfterItemColumn(n.split("/").pop(),s),o.append(u._getTripleHtml(s)),u._changeListener&&u._changeListener(u),u._createTagCloud()}),e},e.prototype._createShowButton=function(s){var e=c('<a class="btn">').append(this._i18nSpan("wdqs-ve-show","Show")).attr("href","#").prepend('<span class="fa fa-plus" aria-hidden="true"></span>'," ").tooltip({title:"Click to add new property"}).attr("id","query-helper-show").attr("data-type","property").attr("data-auto_open",!0),o=this;return this._selectorBox.add(e,null,function(e,t){var r="http://www.wikidata.org/prop/direct/"+e,i=o._query.getBoundVariables().shift()||"?item",a="?"+t.replace(/( |[^a-z0-9])/gi,"_"),n=o._query.addTriple(i,r,a,!0);o._query.addVariable(a),o._addLabelVariableAfterItemColumn(r.split("/").pop(),n),s.append(o._getTripleHtml(n)),o._changeListener&&o._changeListener(o),o._createTagCloud()}),e},e.prototype._addLabelVariableAfterItemColumn=function(e,t){var r=this;this._api.getDataType(e).done(function(e){"wikibase-item"===e&&r._addLabelVariable(t)})},e.prototype._isNotRelevant=function(e){return!!t[e.predicate]||!(!this._isSimpleMode||!this._isInShowSection(e)||!1!==this._query.hasVariable(e.object)||!1!==this._query.hasVariable(e.object+"Label")||!1!==this._query.isWildcardQuery())},e.prototype._isInShowSection=function(e){var t=this._query.getBindings();return!(!this._isVariable(e.subject)||!this._isVariable(e.object)||t[e.subject]||t[e.object])},e.prototype._getTripleHtml=function(r){var i=this,a=c("<tr>"),n=this._query.getBindings();return c.each(r.triple,function(e,t){if(i._isVariable(t)&&n[t]&&"string"==typeof n[t].expression&&(t=n[t].expression),i._isVariable(t)){if(i._isSimpleMode)return;return t=t.replace("?","").replace(/_/g,"_<wbr>"),void a.append(c("<td>").append(t))}t.type&&"path"===t.type?a.append(c("<td>").append(i._getTripleEntityPathHtml(t,r,e))," "):a.append(c("<td>").append(i._getTripleEntityHtml(t,r,e))," ")}),a.append(this._getTripleHtmlToolbar(a,r))},e.prototype._getTripleHtmlToolbar=function(r,i){var a=this,e=c('<a href="#">').addClass("fa fa-trash-o").click(function(){var e=n.compact(i.triple).filter(function(e){return"string"==typeof e&&e.startsWith("?")}),t=e.map(function(e){return e+"Label"});return i.remove(),r.remove(),a._query.cleanupVariables(e.concat(t)),a._changeListener&&a._changeListener(a),a._createTagCloud(),!1}).tooltip({title:p.queryService.ui.i18n.getMessage("wdqs-ve-remove-row-title")}),t=c('<a href="#">').addClass("fa fa-tag").click(function(){return a._addLabelVariable(i),a._changeListener&&a._changeListener(a),!1}).tooltip({title:p.queryService.ui.i18n.getMessage("wdqs-ve-add-label-title")});return c('<td class="toolbar">').append(t,e)},e.prototype._addLabelVariable=function(e){this._query.convertWildcardQueryToUseVariables(),e.triple.object.startsWith("?")?this._query.addVariable(e.triple.object+"Label"):this._query.addVariable(e.triple.subject+"Label"),this._changeListener&&this._changeListener(this)},e.prototype._isVariable=function(e){return"string"==typeof e&&e.startsWith("?")},e.prototype._isSimpleQuery=function(){var r={},i=this;return c.each(this._triples,function(e,t){i._isVariable(t.triple.subject)&&!1===i._isVariable(t.triple.object)&&(r[t.triple.subject]=!0)}),Object.keys(r).length<=1},e.prototype._getTripleEntityPathHtml=function(s,o){var u=this,l=c("<span>");return c.each(s.items,function(e,t){if(t.type&&"path"===t.type)l.append(u._getTripleEntityPathHtml(t,o));else{if(0<e&&"/"===s.pathType){var r=p.queryService.ui.i18n.getMessage("wdqs-ve-or","or"),i=p.queryService.ui.i18n.getMessage("wdqs-ve-subtype","subtype");l.append(" "+r+" "+i+" ")}if("*"===s.pathType){var a=p.queryService.ui.i18n.getMessage("wdqs-ve-any","any");l.append(" "+a+" ")}var n=s.items.reduce(function(e,t,r){return e[r]=t,e},{});n=c.extend(n,o.triple),(o=c.extend({},o)).triple=n,l.append(u._getTripleEntityHtml(t,o,e))}}),l},e.prototype._getTripleEntityHtml=function(n,s,o){var u=this,l=c("<span>");return this._getLabel(n).done(function(e,r,t,i){var a=c("<a>").text(e).attr({"data-id":r,"data-type":i,href:"#"}).appendTo(l);l.tooltip({title:"("+r+") "+t}),c(l).on("show.bs.tooltip",function(){c(".tooltip").is(":visible")&&c(".tooltip").not(this).hide()}),u._selectorBox.add(a,s.triple,function(e){var t=n.replace(new RegExp(r+"$"),"")+e;l.replaceWith(u._getTripleEntityHtml(t,s,o)),u._isVariable(s.triple[o])?u._query.getBindings()[s.triple[o]].expression=t:s.triple[o]=t,u._changeListener&&u._changeListener(u),u._createTagCloud()})}).fail(function(){l.text(n)}),l},e.prototype._getLabel=function(e){var r=c.Deferred(),t=e.match(/(Q|P)([0-9]+)/);if(!t)return r.reject().promise();var i={P:"property",Q:"item"};i=i[t[1]];var a=t[0];return this._api.searchEntities(a,i).done(function(e){c.each(e.search,function(e,t){return r.resolve(t.label,t.id,t.description,i),!1})}),r.promise()},e}(jQuery,wikibase,_),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.ui=wikibase.queryService.ui||{},wikibase.queryService.ui.queryHelper=wikibase.queryService.ui.queryHelper||{},wikibase.queryService.ui.queryHelper.SparqlQuery=function(s,e,a){"use strict";function n(e){this._query=e}return n.prototype._query=null,n.prototype._queryComments=null,n.prototype.parse=function(e,t){var r=new a.Parser(t),i=[];this._query=r.parse(e),s.each(e.split("\n"),function(e,t){0===t.indexOf("#")&&i.push(t)}),this._queryComments=i},n.prototype.getQueryString=function(){try{var e=(new a.Generator).stringify(this._query),t=this._queryComments.join("\n").trim();return""!==t?t+"\n"+e:e}catch(e){return null}},n.prototype.getLimit=function(){return this._query.limit||null},n.prototype.setLimit=function(e){return e?this._query.limit=e:delete this._query.limit,this},n.prototype.hasVariable=function(e){return 0!==this._query.variables.length&&0<=this._query.variables.indexOf(e)},n.prototype.isWildcardQuery=function(){return!(!this._query.variables||"*"!==this._query.variables[0])},n.prototype.convertWildcardQueryToUseVariables=function(){if(this.isWildcardQuery()){var e=this.getQueryString().match(/(\?\w+)/g);this._query.variables=s.unique(e)||"*"}},n.prototype.addVariable=function(e){return e&&e.startsWith("?")&&(0<=this._query.variables.indexOf(e)||this.isWildcardQuery()||this._query.variables.push(e)),this},n.prototype.removeVariable=function(e){if(e.startsWith("?")&&!this.isWildcardQuery()){var t=this._query.variables.indexOf(e);0<=t&&this._query.variables.splice(t,1),0===this._query.variables.length&&this._query.variables.push("*")}},n.prototype.cleanupVariables=function(t){var r=this,i=this.getTripleVariables();this._query.variables.filter(function(e){return(!t||-1!==t.indexOf(e))&&-1===i.indexOf(e)}).map(function(e){r.removeVariable(e)})},n.prototype.getTriples=function(e,r){var i=[];e||(e=this._query.where),r||(r=!1);var a=this;return s.each(e,function(e,t){t.type&&"bgp"===t.type&&(i=i.concat(a._createTriples(t.triples,r))),t.type&&"optional"===t.type&&(i=i.concat(a.getTriples(t.patterns,!0))),t.type&&"union"===t.type&&(i=i.concat(a.getTriples(t.patterns,!1)))}),i},n.prototype.getBindings=function(){var r={};return s.each(this._query.where,function(e,t){t.type&&"bind"===t.type&&(r[t.variable]=t)}),r},n.prototype._createTriples=function(r,i){var a=this,n=[];return s.each(r,function(e,t){n.push({optional:i,query:a,triple:t,remove:function(){r.splice(e,1)}})}),n},n.prototype.getSubQueries=function(){var i=[];return s.each(this._query.where,function(e,t){"group"===t.type&&function r(e){s.each(e.patterns,function(e,t){switch(t.type){case"query":i.push(new n(t));break;case"group":r(t)}})}(t)}),i},n.prototype.addTriple=function(e,t,r,i){var a={type:"bgp",triples:[{subject:e,predicate:t,object:r}]};if(i){var n={type:"optional",patterns:[a]};this._query.where.push(n)}else this._query.where.push(a);return this._createTriples(a.triples,i)[0]},n.prototype.getTripleVariables=function(){var r={};return s.each(this.getTriples(),function(e,t){"string"==typeof t.triple.subject&&t.triple.subject.startsWith("?")&&(r[t.triple.subject]=!0),"string"==typeof t.triple.predicate&&t.triple.predicate.startsWith("?")&&(r[t.triple.predicate]=!0),"string"==typeof t.triple.object&&t.triple.object.startsWith("?")&&(r[t.triple.object]=!0)}),Object.keys(r)},n.prototype.getBoundVariables=function(){var r={};return s.each(this.getTriples(),function(e,t){t.triple.subject.startsWith("?")&&!t.triple.object.startsWith("?")&&(r[t.triple.subject]=!0),!t.triple.subject.startsWith("?")&&t.triple.object.startsWith("?")&&(r[t.triple.object]=!0)}),Object.keys(r)},n.prototype.getServices=function(){var r=[];return s.each(this._query.where,function(e,t){t&&"service"===t.type&&r.push(t)}),r},n.prototype.removeService=function(r){var i=this;return s.each(this._query.where,function(e,t){"service"===t.type&&t.name===r&&delete i._query.where[e]}),this},n.prototype.getCommentContent=function(e){var t,r;for(t=0;t<this._queryComments.length;t++)if((r=this._queryComments[t]).startsWith("#"+e))return r.substring(1+e.length);return null},n.prototype.clone=function(){var e=new n;return e.parse(this.getQueryString()),e},n}(jQuery,0,sparqljs),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.ui=wikibase.queryService.ui||{},wikibase.queryService.ui.queryHelper=wikibase.queryService.ui.queryHelper||{},wikibase.queryService.ui.queryHelper.SelectorBox=function(l,u){"use strict";var n={item:{suggest:'SELECT ?id ?label ?description WHERE {\t\t\t\t\thint:Query hint:optimizer "None".\t\t\t\t\t\t\t{\t\t\t\t\t\t\t\tSELECT DISTINCT ?id WHERE { ?i <{PROPERTY_URI}> ?id. }\t\t\t\t\t\t\t\tLIMIT 100\t\t\t\t\t\t\t}\t\t\t\t\t\t?id rdfs:label ?label.\t\t\t\t\t\t?id schema:description ?description.\t\t\t\t\t\tFILTER((LANG(?label)) = "{LANGUAGE}")\t\t\t\t\t\tFILTER((LANG(?description)) = "{LANGUAGE}")\t\t\t\t\t}\t\t\t\t\tLIMIT 100',genericSuggest:function(){if(0===this._query.getTriples().length)return'SELECT ?id ?label ?description WHERE {\t\t\t\t\t\thint:Query hint:optimizer "None".\t\t\t\t\t\t\t{\t\t\t\t\t\t\t\tSELECT DISTINCT ?id WHERE { ?id wdt:P1424 ?p. }\t\t\t\t\t\t\t\tLIMIT 100\t\t\t\t\t\t\t}\t\t\t\t\t\t\t?id rdfs:label ?label.\t\t\t\t\t\t\t?id schema:description ?description.\t\t\t\t\t\t\tFILTER((LANG(?label)) = "{LANGUAGE}")\t\t\t\t\t\t\tFILTER((LANG(?description)) = "{LANGUAGE}")\t\t\t\t\t\t}\t\t\t\t\t\tLIMIT 100';var e=this._query.getBoundVariables().shift()||this._query.getTripleVariables().shift(),t=this._query.clone().setLimit(1e3).removeService("http://wikiba.se/ontology#label").addVariable(e).getQueryString(),r=t.match(/.*\bPREFIX\b(.*)/gi).join("\n");return t=t.replace(/.*\bPREFIX\b.*/gi,""),'{PREFIXES}\n\t\t\t\t\t\tSELECT ?id ?label ?description ?property (?count as ?rank) WITH {\n\t\t\t\t\t\t\t{QUERY}\n\t\t\t\t\t\t} AS %query WITH {\n\t\t\t\t\t\t\tSELECT ({VARIABLE} AS ?item) WHERE {\n\t\t\t\t\t\t\t\tINCLUDE %query.\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} AS %item WITH {\n\t\t\t\t\t\t\tSELECT ?value ?property (COUNT(?statement) AS ?count) WHERE {\n\t\t\t\t\t\t\t\tINCLUDE %item.\n\t\t\t\t\t\t\t\t?item ?p ?statement.\n\t\t\t\t\t\t\t\t?statement ?ps ?value.\n\t\t\t\t\t\t\t\t?property a wikibase:Property; wikibase:claim ?p; wikibase:statementProperty ?ps.\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tGROUP BY ?value ?property\n\t\t\t\t\t\t\tHAVING(isIRI(?value) && STRSTARTS(STR(?value), STR(wd:Q)))\n\t\t\t\t\t\t\tORDER BY DESC(?count)\n\t\t\t\t\t\t\tLIMIT 100\n\t\t\t\t\t\t} AS %values WHERE {\n\t\t\t\t\t\t\tINCLUDE %values.\n\t\t\t\t\t\t\tBIND(?value AS ?id).\n\t\t\t\t\t\t\tSERVICE wikibase:label {\n\t\t\t\t\t\t\t\tbd:serviceParam wikibase:language "[AUTO_LANGUAGE],en".\n\t\t\t\t\t\t\t\t?id rdfs:label ?label; schema:description ?description.\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tORDER BY DESC(?count)'.replace("{QUERY}",t).replace("{VARIABLE}",e).replace("{PREFIXES}",r)},search:null,instanceOf:'SELECT ?id ?label ?description WHERE {\t\t\t\t\thint:Query hint:optimizer "None".\t\t\t\t\t\t{\t\t\t\t\t\t\tSELECT DISTINCT ?id WHERE { ?i wdt:P31 ?id. }\t\t\t\t\t\t\tLIMIT 100\t\t\t\t\t\t}\t\t\t\t\t\t?id rdfs:label ?label.\t\t\t\t\t\t?id schema:description ?description.\t\t\t\t\t\tFILTER((LANG(?label)) = "en")\t\t\t\t\t\tFILTER((LANG(?description)) = "en")\t\t\t\t\t}\t\t\t\t\tLIMIT 100'},property:{suggest:'SELECT ?id ?label ?description WHERE {\t\t\t\thint:Query hint:optimizer "None".\t\t\t\t\t{\t\t\t\t\t\tSELECT DISTINCT ?id WHERE {\t\t\t\t\t\t?i ?prop <{ITEM_URI}>.\t\t\t\t\t\t?id ?x ?prop.\t\t\t\t\t\t?id rdf:type wikibase:Property.\t\t\t\t\t\t}\t\t\t\t\t\tLIMIT 100\t\t\t\t\t}\t\t\t\t?id rdfs:label ?label.\t\t\t\t?id schema:description ?description.\t\t\t\tFILTER((LANG(?label)) = "{LANGUAGE}")\t\t\t\tFILTER((LANG(?description)) = "{LANGUAGE}")\t\t\t\t}\t\t\t\tLIMIT 100',genericSuggest:function(){if(0===this._query.getTriples().length)return'SELECT ?id ?label ?description (?count as ?rank) WITH {\t\t\t\t\tSELECT ?pred (COUNT(?value) AS ?count) WHERE\t\t\t\t\t{\t\t\t\t\t?subj ?pred ?value .\t\t\t\t\t} GROUP BY ?pred ORDER BY DESC(?count) LIMIT 1000\t\t\t\t\t} AS %inner\t\t\t\tWHERE {\t\t\t\t\tINCLUDE %inner\t\t\t\t\t?id wikibase:claim ?pred.\t\t\t\t\t?id rdfs:label ?label.\t\t\t\t\t?id schema:description ?description.\t\t\t\t\tFILTER((LANG(?label)) = "en")\t\t\t\t\tFILTER((LANG(?description)) = "en")\t\t\t\t} ORDER BY DESC(?count)\t\t\t\tLIMIT 100';var e=this._query.getBoundVariables().shift()||this._query.getTripleVariables().shift(),t=this._query.clone().setLimit(500).removeService("http://wikiba.se/ontology#label").addVariable(e).getQueryString(),r=t.match(/.*\bPREFIX\b(.*)/gi).join("\n");return t=t.replace(/.*\bPREFIX\b.*/gi,""),'{PREFIXES}\n\t\t\t\t\tSELECT ?id ?label ?description (?count as ?rank) WITH {\n\t\t\t\t\t\t{QUERY}\n\t\t\t\t\t} AS %query WITH {\n\t\t\t\t\t\tSELECT ({VARIABLE} AS ?item) WHERE {\n\t\t\t\t\t\t\tINCLUDE %query.\n\t\t\t\t\t\t}\n\t\t\t\t\t} AS %item WITH {\n\t\t\t\t\t\tSELECT ?property (COUNT(?statement) AS ?count) WHERE {\n\t\t\t\t\t\t\tINCLUDE %item.\n\t\t\t\t\t\t\t?item ?p ?statement.\n\t\t\t\t\t\t\t?property a wikibase:Property; wikibase:claim ?p.\n\t\t\t\t\t\t}\n\t\t\t\t\t\tGROUP BY ?property\n\t\t\t\t\t\tORDER BY DESC(?count)\n\t\t\t\t\t\tLIMIT 100\n\t\t\t\t\t} AS %properties WHERE {\n\t\t\t\t\t\tINCLUDE %properties.\n\t\t\t\t\t\tBIND(?property AS ?id).\n\t\t\t\t\t\tSERVICE wikibase:label {\n\t\t\t\t\t\t\tbd:serviceParam wikibase:language "[AUTO_LANGUAGE],en".\n\t\t\t\t\t\t\t?id rdfs:label ?label; schema:description ?description.\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tORDER BY DESC(?count)'.replace("{QUERY}",t).replace("{VARIABLE}",e).replace("{PREFIXES}",r)},search:null,seeAlso:'SELECT ?id ?label ?description WHERE {\t\t\t\t\tBIND( <{PROPERTY_URI}> as ?prop).\t\t\t\t\t?props ?x  ?prop.\t\t\t\t\t?props rdf:type wikibase:Property.\t\t\t\t\t?props wdt:P1659 ?id.\t\t\t\t\t?id rdfs:label ?label.\t\t\t\t\t?id schema:description ?description.\t\t\t\t\tFILTER((LANG(?label)) = "{LANGUAGE}")\t\t\t\t\tFILTER((LANG(?description)) = "{LANGUAGE}")\t\t\t\t}'},sparql:{search:'SELECT ?id ?label ?description WITH {\t\t\t\t\t{SPARQL}\t\t\t\t\t} AS %inner\t\t\t\tWHERE {\t\t\t\t\tINCLUDE %inner\t\t\t\t\t?id rdfs:label ?label.\t\t\t\t\t?id schema:description ?description.\t\t\t\t\tFILTER((LANG(?label)) = "{LANGUAGE}")\t\t\t\t\tFILTER((LANG(?description)) = "{LANGUAGE}")\t\t\t\t\tFILTER(STRSTARTS(LCASE(?label), LCASE("{TERM}")))\t\t\t\t} ORDER BY DESC(?count)\t\t\t\tLIMIT 100',suggest:'SELECT ?id ?label ?description WITH {\t\t\t\t{SPARQL}\t\t\t\t} AS %inner\t\t\tWHERE {\t\t\t\tINCLUDE %inner\t\t\t\t?id rdfs:label ?label.\t\t\t\t?id schema:description ?description.\t\t\t\tFILTER((LANG(?label)) = "{LANGUAGE}")\t\t\t\tFILTER((LANG(?description)) = "{LANGUAGE}")\t\t\t} ORDER BY DESC(?count)\t\t\tLIMIT 100'}};function e(e,t){this._api=e||new u.queryService.api.Wikibase,this._sparqlApi=t||new u.queryService.api.Sparql}return e.prototype._api=null,e.prototype._sparqlApi=null,e.prototype._query=null,e.prototype.setQuery=function(e){this._query=e},e.prototype.add=function(e,t,r,i){switch(e.data("type").toLowerCase()){case"number":this._createInput(e,r,i);break;case"tagcloud":this._createTagCloud(e,t,r,i);break;default:this._createSelect(e,t,r,i)}},e.prototype._createInput=function(t,e,r){var i=l("<input>").attr("type",t.data("type")),a=this._getCloseButton(),n=this._getToolbar(r,t),s=l("<div>").append(a," ",i," ",n);t.clickover({placement:"bottom",global_close:!1,html:!0,sanitize:!1,content:function(){return s}}).click(function(e){i.val(t.data("value")||"")}),i.on("keyup mouseup",function(){e&&e(i.val())})},e.prototype._createTagCloud=function(e,t,r,i){var a=this,n=e.data("entity"),s=e.data("sparql"),o=[];(o=[],a._searchEntitiesSparql(null,n,t,s).then(function(e){e.forEach(function(t){o.push({text:t.text,weight:t.data.rank||(9<Math.round(10*Math.random())?5:Math.round(3*Math.random())),link:"#",html:{title:t.data.description+(t.data.rank?" ("+t.data.rank+")":""),"data-id":t.id},handlers:{click:function(e){return t.data.propertyId?r(t.id,t.text,t.data.propertyId):a._suggestPropertyId(t.id).always(function(e){r(t.id,t.text,e)}),!1}}})})})).then(function(){0!==o.length?(e.show(),e.jQCloud(o,{delayedMode:!0,autoResize:!0})):e.hide()})},e.prototype._createSelect=function(n,t,s,e){var o=this,u=this._getSelectBox(n),r=this._getCloseButton(),i=this._getToolbar(e,n),a=l("<div>").append(r," ",u," ",i);0!==n.children().length?(n.clickover({placement:"bottom",global_close:!1,html:!0,sanitize:!1,content:function(){return a}}).click(function(e){return u.toggleClass("open"),u.data("select2")||l.proxy(o._renderSelect2(u,n,t),o),u.hasClass("open")&&n.data("auto_open")&&u.data("select2").open(),!1}),u.change(function(e){if(s){var t=u.val(),r=u.find("option:selected").text(),i=n.data("items"),a=i&&i[t]&&i[t].propertyId||null;a?s(t,r,a):o._suggestPropertyId(t).always(function(e){s(t,r,e)})}n.click(),u.html("")})):this._createSelectInline(n,t,s)},e.prototype._suggestPropertyId=function(e){var t=l.Deferred(),r="SELECT ?id (COUNT(?id) AS ?count) WHERE { { SELECT ?id WHERE {\t\t\t\t\t\t\t?i ?prop wd:{ITEM_ID}.\t\t\t\t\t\t\t?id wikibase:directClaim ?prop.\t\t\t\t\t\t\t?id rdf:type wikibase:Property.\t\t\t\t\t\t\t}\t\t\t\t\t\t\tLIMIT 10000 } } GROUP BY ?id ORDER BY DESC(?count) LIMIT 1".replace("{ITEM_ID}",e);return this._sparqlApi.query(r,2e3).done(function(e){try{t.resolve(e.results.bindings[0].id.value.split("/").pop())}catch(e){t.reject()}}).fail(function(){t.reject()}),t.promise()},e.prototype._createSelectInline=function(a,e,n){var s=this._getSelectBox(a);a.replaceWith(s),this._renderSelect2(s,a,e),s.change(function(e){if(n){var t=s.val(),r=a.data("items"),i=r&&r[t]&&r[t].propertyId||null;n(t,s.find("option:selected").text(),i)}})},e.prototype._getSelectBox=function(e){var t=e.data("id"),r=e.text(),i=l("<select>");return t&&i.append(l("<option>").attr("value",t).text(r)),i},e.prototype._getCloseButton=function(){return l('<a href="#" data-dismiss="clickover">').append('<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>')},e.prototype._getToolbar=function(e,i){var a=l("<span>");return l.each(e,function(e,t){var r=l("<a>").attr("href","#");r.prepend('<span class="glyphicon glyphicon-'+e+'" aria-hidden="true"></span>'," "),r.click(function(){return t()&&i.click(),!1}),a.append(r," ")}),a},e.prototype._createLookupService=function(i,a){var n=this,s=i.data("type"),o=i.data("sparql");return function(e,r,t){l.when(n._searchEntitiesSparql(e.data.term,s,a,o),n._searchEntities(e.data.term,s)).done(function(e,t){n._addItemMetaData(i,e.concat(t)),0<e.length&&(e=[{text:u.queryService.ui.i18n.getMessage("wdqs-ve-sb-suggestions","Suggestions"),children:e}]),0<t.length&&0<e.length&&(t=[{text:u.queryService.ui.i18n.getMessage("wdqs-ve-sb-other","Other"),children:t}]),r({results:e.concat(t)})})}},e.prototype._addItemMetaData=function(e,t){var r={};t.forEach(function(e){r[e.data.id]||(r[e.data.id]={}),r[e.data.id].text=e.text,e.data.propertyId&&(r[e.data.id].propertyId=e.data.propertyId)}),e.data("items",r)},e.prototype._getSparqlTemplate=function(e,t,r,i){var a=this._getSparqlTemplateDefinition(e,t,r,i),n="function"==typeof a?a.apply(this):a;return i&&(n=n.replace("{SPARQL}",i)),n},e.prototype._getSparqlTemplateDefinition=function(e,t,r,i){if(i)return e?n.sparql.search:n.sparql.suggest;var a=n[t];if(e&&""!==e.trim())return r?a.search:null;if("property"===t){if(!r)return a.genericSuggest;if(0===r.object.indexOf("?"))return a.seeAlso}else if(!r)return a.genericSuggest;return a.suggest},e.prototype._searchEntitiesSparqlCreateQuery=function(e,t,r,i){var a=this._getSparqlTemplate(e,t,r,i);return a&&(r&&(a=a.replace("{PROPERTY_URI}",function e(t){return"string"==typeof t?t:e(t.items[0])}(r.predicate)).replace("{ITEM_URI}",r.object)),e&&(a=a.replace("{TERM}",e)),a=a.replace(/\{LANGUAGE\}/g,l.i18n&&l.i18n().locale||"en")),a},e.prototype._searchEntitiesSparql=function(e,t,r,i){var a=l.Deferred(),n=this._searchEntitiesSparqlCreateQuery(e,t,r,i);return n?(this._sparqlApi.query(n,4e3).done(function(e){var t=e.results.bindings.map(function(e){var t=e.id.value.split("/").pop(),r=e.property&&e.property.value.split("/").pop()||null;return{id:t,text:e.label.value,data:{id:t,propertyId:r,description:e.description&&e.description.value||"",rank:e.rank&&e.rank.value||null}}});a.resolve(t)}).always(function(){a.resolve([])}),a.promise()):a.resolve([]).promise()},e.prototype._searchEntities=function(e,t){var r=l.Deferred();return e&&""!==e.trim()?(this._api.searchEntities(e,t).done(function(e){var t=e.search.map(function(e){return{id:e.id,text:e.label,data:e}});r.resolve(t)}),r.promise()):r.resolve([]).promise()},e.prototype._renderSelect2=function(e,t,r){var i=this._createLookupService(t,r);e.select2({width:"auto",templateResult:function(e,t){return e.data?l("<span><b>"+e.text+" ("+e.data.id+")</b></span><br/><small>"+e.data.description+"</small>"):e.text},ajax:{delay:250,transport:i},cache:!0})},e}(jQuery,wikibase),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.ui=wikibase.queryService.ui||{},wikibase.queryService.ui.queryHelper=wikibase.queryService.ui.queryHelper||{},wikibase.queryService.ui.queryHelper.QueryTemplate=function(p,e){"use strict";function a(){}return a.prototype._definition={},a.prototype._template=null,a.prototype._variables=[],a.parse=function(e){var t,r,i=e.getCommentContent("TEMPLATE=");if(!i)return null;try{t=JSON.parse(i)}catch(e){return null}return(r=new a)._definition=t,r._fragments=a._getQueryTemplateFragments(t),r},a._getQueryTemplateText=function(e,t,r,i){var a,n,s,o;if(-1===["string","object"].indexOf(typeof e.template))throw new Error("unsupported template type, should be single string or map from language code to string");if("string"==typeof e.template)return e.template;if(t in(a=e.template))return a[t];for(s in n=r&&r[t]||{})if((o=n[s])in a)return a[o];if((o=i||"en")in a)return a[o];for(s in a)return a[s];return""},a._getQueryTemplateFragments=function(e){var i,a,t=p.i18n&&p.i18n().locale||"en",r=p.i18n&&p.i18n.fallbacks,n=p.i18n&&p.i18n().options.fallbackLocale,s=this._getQueryTemplateText(e,t,r,n),o=[s];if(s.match(/\0/))throw new Error("query template must not contain null bytes");function u(e){var t=e.replace(new RegExp("\\"+i,"g"),"\0").split("\0");a.push(t[0]);for(var r=1;r<t.length;r++)a.push(i),a.push(t[r])}for(i in e.variables){if(!i.match(/\?[a-z][a-z0-9]*/i))throw new Error("invalid variable name in query template");a=[],o.forEach(u),o=a}return o},a._buildTemplate=function(e,t){var r=p("<span>");r.append(document.createTextNode(e[0]));for(var i=1;i<e.length;i+=2){var a=e[i],n=p("<span>").text(a);a in t||(t[a]=[]),t[a].push(n),r.append(n),r.append(document.createTextNode(e[i+1]))}return r},a.prototype.getHtml=function(e,u,l){if(null!==this._template)return this._template;this._template=a._buildTemplate(this._fragments,this._variables);var c=this;return p.each(this._definition.variables,function(s,o){e(s).done(function(i,a,e,n){p.each(c._variables[s],function(e,t){t.text("");var r=p("<a>").text(i).attr({"data-id":a,"data-type":n,href:"#"}).appendTo(t);o.query&&r.attr("data-sparql",o.query),u.add(r,null,function(e,t){for(var r in c._variables[s]){c._variables[s][r].find('a[data-id="'+a+'"]').attr("data-id",e).text(t),l(s,a,e),a=e}})})})}),this._template},a}(jQuery),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.ui=wikibase.queryService.ui||{},wikibase.queryService.ui.dialog=wikibase.queryService.ui.dialog||{},wikibase.queryService.ui.dialog.CodeExample=function(c,p){"use strict";var h={readOnly:!0,autofocus:!0,autoRefresh:!0,lineNumbers:!0,lineWrapping:!0};function e(e,t){this._$element=e,this._getCodeExamples=t,this._init()}return e.prototype._$element=null,e.prototype._getCodeExamples=null,e.prototype._init=function(){var t=this;this._$element.on("show.bs.modal",function(){t._getCodeExamples().then(function(e){t._update(e)})})},e.prototype._update=function(e){var n=this._$element.find(".nav-tabs").empty(),s=this._$element.find(".tab-content").empty(),o=c('<li role="presentation"></li>'),u=c('<div role="tabpanel" class="tab-pane">'),l=c('<a role="tab" data-toggle="tab">');c.each(e,function(e,t){var r=t.code,i=t.mimetype,a=c("<textarea>").text(r);n.append(o.clone().addClass(n.is(":empty")?"active":"").append(l.clone().attr("href","#"+c.escapeSelector(e)).text(e))),s.append(u.clone().addClass(s.is(":empty")?"active":"").attr("id",e).append(a)),h.mode=i,p.fromTextArea(a[0],h)})},e}(jQuery,CodeMirror),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.ui=wikibase.queryService.ui||{},wikibase.queryService.ui.dialog=wikibase.queryService.ui.dialog||{},wikibase.queryService.ui.dialog.QueryExampleDialog=function(h){"use strict";function e(e,t,r,i,a){this._$element=e,this._querySamplesApi=t,this._callback=r,this._wikibaseApi=i,this._previewUrl=a||"embed.html#",this._init()}return e.prototype._querySamplesApi=null,e.prototype._wikibaseApi=null,e.prototype._callback=null,e.prototype._previewUrl=null,e.prototype._examples=null,e.prototype._trackingApi=null,e.prototype._init=function(){this._trackingApi||(this._trackingApi=new wikibase.queryService.api.Tracking),this._wikibaseApi||(this._wikibaseApi=new wikibase.queryService.api.Wikibase,this._wikibaseApi.setLanguage(this._querySamplesApi.getLanguage())),this._initFilter(),this._initExamples();var e=this;this._$element.focus(function(){e._$element.find(".tableFilter").focus()})},e.prototype._initFilter=function(){var e=this;this._$element.find(".tableFilter").keyup(h.proxy(this._filterTable,this)),this._$element.find(".tagFilter").tags({afterAddingTag:h.proxy(this._filterTable,this),afterDeletingTag:function(){e._filterTable(),e._drawTagCloud(!0)}})},e.prototype._initExamples=function(){var r=this,i=null;this._querySamplesApi.getExamples().then(function(e){r._examples=e,r._initTagCloud(),r._updateExamplesCount(e.length),h.each(e,function(e,t){t.category!==i&&(i=t.category,r._$element.find(".searchable").append(h("<tr>").addClass("active").append(h('<td colspan="4">').text(i)))),r._addExample(t.title,t.query,t.href,t.tags,i)})})},e.prototype._initTagCloud=function(){var e=this,t=window.setInterval(function(){e._$element.is(":visible")&&(e._drawTagCloud(),clearInterval(t))},300)},e.prototype._drawTagCloud=function(r){var i=this,a=[];this._getCloudTags().then(function(e){var t=h(".tagCloud");h.each(e,function(e,t){var r=t.label+" ("+t.id+")";a.push({text:r,weight:t.weight,link:"#",html:{title:"("+t.weight+")","data-id":t.id},handlers:{click:function(e){return i._$element.find(".tagFilter").tags().addTag(h(this).text()),i._drawTagCloud(!0),!1}}})}),r?t.jQCloud("update",a):t.jQCloud(a,{delayedMode:!0,autoResize:!0})})},e.prototype._getCloudTags=function(){var i=this._$element.find(".tagFilter").tags().getTags(),a={};return h.each(this._examples,function(e,t){var r;(r=t.tags,i.every(function(e){return-1!==r.indexOf(e.match(/\((.*)\)/)[1])}))&&h.each(t.tags,function(e,t){var r;(r=t,-1===i.map(function(e){return e.match(/\((.*)\)/)[1]}).indexOf(r))&&(a[t]?a[t].weight++:a[t]={id:t,weight:1})})}),a=_.compact(a).sort(function(e,t){return t.weight-e.weight}).slice(0,50),this._wikibaseApi.getLabels(a.map(function(e){return e.id})).then(function(t){return a.forEach(function(e){e.label=_.compact(t.entities[e.id].labels)[0].value}),a})},e.prototype._addExample=function(t,r,e,i,a){var n=this,s="#"+encodeURIComponent(r),o=h('<a title="Select">').text(t).attr("href",s).click(function(e){e.ctrlKey||e.metaKey||e.shiftKey||(e.preventDefault(),n._$element.modal("hide"),n._callback(r,t),n._track("select"),n._track("select.category."+a.replace(/[^a-zA-Z0-9]/g,"_")))}),u=h("<a>").attr({title:"Edit",href:e,target:"_blank"}).append("<span>").addClass("glyphicon glyphicon-pencil").click(function(){n._track("edit")}),l=h("<span>").addClass("glyphicon glyphicon-eye-open").popover({placement:"bottom",trigger:"hover",container:"body",title:wikibase.queryService.ui.i18n.getMessage("wdqs-dialog-examples-preview-query","Preview query"),content:h('<pre style="white-space:pre-line; word-break:normal;"/>').text(r),html:!0,sanitize:!1}),c=h('<a href="#">').addClass("glyphicon glyphicon-camera").clickover({placement:"left",global_close:!0,esc_close:!0,trigger:"click",container:"body",title:wikibase.queryService.ui.i18n.getMessage("wdqs-dialog-examples-preview-result","Preview result"),content:h('<iframe width="400" height="350" frameBorder="0" src="'+n._previewUrl+encodeURIComponent(r)+'">'),html:!0,sanitize:!1}).click(function(){n._track("preview")});h(".exampleTable").scroll(function(){c.clickover&&c.clickover("hide").removeAttr("data-clickover-open")});var p=h("<tr>");p.append(h("<td>").append(o).append(" ",u)),p.append(h("<td>").addClass("exampleIcons").append(c)),p.append(h("<td>").addClass("exampleIcons").append(l)),p.append(h("<td>").text(i.join("|")).hide()),p.append(h("<td>").text(r).hide()),this._$element.find(".searchable").append(p)},e.prototype._filterTable=function(){var e=this._$element.find(".tableFilter"),t=new RegExp(e.val(),"i"),a=this._$element.find(".tagFilter").tags().getTags();this._$element.find(".searchable tr").hide();var r=this._$element.find(".searchable tr").filter(function(){return t.test(h(this).text())&&(r=h(this).text(),i=!0,r=r.toLowerCase(),h.each(a,function(e,t){-1===r.indexOf(t.toLowerCase().match(/\((.*)\)/)[1])&&(i=!1)}),i);var r,i});r.show(),r.each(function(e,t){h(t).prevAll("tr.active").first().show()}),this._updateExamplesCount(r.length)},e.prototype._updateExamplesCount=function(e){this._$element.find(".count").text(e)},e.prototype._track=function(e,t,r){this._trackingApi.track("wikibase.queryService.ui.examples."+e,t,r)},e}(jQuery),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.ui=wikibase.queryService.ui||{},wikibase.queryService.ui.ResultView=function(o,u,s){"use strict";function e(e,t,r,i,a,n,s){this._sparqlApi=e,this._querySamplesApi=t,this._wikibaseApi=r,this._codeSamplesApi=i,this._shorten=a,this._editor=n||null,this._queryBuilderUrl=s,this._originalDocumentTitle=document.title,this._init()}return e.prototype._query=null,e.prototype._sparqlQuery=null,e.prototype._sparqlApi=null,e.prototype._querySamplesApi=null,e.prototype._wikibaseApi=null,e.prototype._codeSamplesApi=null,e.prototype._editor=null,e.prototype._shorten=null,e.prototype._selectedResultBrowser=null,e.prototype._actionBar=null,e.prototype._trackingApi=null,e.prototype._hasRunFirstQuery=!1,e.prototype._queryBuilderUrl=null,e.prototype._originalDocumentTitle=null,e.prototype._resultBrowsers={Table:{icon:"glyphicon-th-list",label:["wdqs-app-resultbrowser-table","Table"],class:"TableResultBrowser",object:null,$element:null},ImageGrid:{icon:"glyphicon-picture",label:["wdqs-app-resultbrowser-image-grid","Image grid"],class:"ImageResultBrowser",object:null,$element:null},Polestar:{icon:"fa-certificate",label:["wdqs-app-resultbrowser-graph-builder","Graph builder"],class:"PolestarResultBrowser",object:null,$element:null},Map:{icon:"glyphicon-map-marker",label:["wdqs-app-resultbrowser-map","Map"],class:"CoordinateResultBrowser",object:null,$element:null},LineChart:{icon:"fa-line-chart",label:["wdqs-app-resultbrowser-line-chart","Line chart"],class:"LineChartResultBrowser",object:null,$element:null},BarChart:{icon:"fa-bar-chart",label:["wdqs-app-resultbrowser-bar-chart","Bar chart"],class:"BarChartResultBrowser",object:null,$element:null},ScatterChart:{icon:"fa-braille",label:["wdqs-app-resultbrowser-scatter-chart","Scatter chart"],class:"ScatterChartResultBrowser",object:null,$element:null},AreaChart:{icon:"fa-area-chart",label:["wdqs-app-resultbrowser-area-chart","Area chart"],class:"AreaChartResultBrowser",object:null,$element:null},BubbleChart:{icon:"glyphicon-tint",label:["wdqs-app-resultbrowser-bubble-chart","Bubble chart"],class:"BubbleChartResultBrowser",object:null,$element:null},TreeMap:{icon:"glyphicon-th",label:["wdqs-app-resultbrowser-tree-map","Tree map"],class:"TreeMapResultBrowser",object:null,$element:null},Tree:{icon:"fa-tree",label:["wdqs-app-resultbrowser-tree","Tree"],class:"TreeResultBrowser",object:null,$element:null},Timeline:{icon:"glyphicon-calendar",label:["wdqs-app-resultbrowser-timeline","Timeline"],class:"TimelineResultBrowser",object:null,$element:null},Dimensions:{icon:"glyphicon-random",label:["wdqs-app-resultbrowser-dimensions","Dimensions"],class:"MultiDimensionResultBrowser",object:null,$element:null},Graph:{icon:"glyphicon-retweet",label:["wdqs-app-resultbrowser-graph","Graph"],class:"GraphResultBrowser",object:null,$element:null}},e.prototype.trackingNamespace="wikibase.queryService.ui.index.",e.prototype._init=function(){this._trackingApi||(this._trackingApi=new wikibase.queryService.api.Tracking),this._actionBar=new wikibase.queryService.ui.toolbar.Actionbar(o(".action-bar")),this._sparqlQuery=this._query=new wikibase.queryService.ui.queryHelper.SparqlQuery,this._internationalizeCharts(),this._initResultBrowserMenu(),this._initExamples(),this._initCodeExamples(),this._initQueryLinkPopover(),this._initHandlersDownloads()},e.prototype._internationalizeCharts=function(){o.each(this._resultBrowsers,function(e,t){var r=t.label[0],i=t.label[1];t.label=wikibase.queryService.ui.i18n.getMessage(r,i)})},e.prototype._initResultBrowserMenu=function(){o.each(this._resultBrowsers,function(e,t){var r=o('<li class="result-browser-item"><a class="result-browser" href="#"><span class="toolbar-label">'+t.label+' </span><span class="toolbar-icon '+t.icon.split("-",1)[0]+" "+t.icon+'"></span></a></li>');r.appendTo(o("#result-browser-menu")),t.$element=r})},e.prototype.draw=function(e){var t=this,r=o.Deferred();return this._query=e,this._actionBar.show("wdqs-action-query","","info",100),o("#query-result").empty().hide(),o(".result").hide(),o("#query-error").hide(),this._sparqlApi.query(e).done(function(){t._handleQueryResult(),r.resolve()}).fail(function(){var e=t._handleQueryError();r.reject(e)}),r.promise()},e.prototype.drawPreview=function(e){var t=this,r=o.Deferred(),i=wikibase.queryService.RdfNamespaces.ALL_PREFIXES,a=this._sparqlQuery.getQueryString();return this._query=e,this._sparqlQuery.parse(e,i),this._sparqlQuery.setLimit(20),a===this._sparqlQuery.getQueryString()?r.reject().promise():(o("#query-result").empty().hide(),o(".result").hide(),o("#query-error").hide(),this._actionBar.hide(),this._sparqlApi.query(this._sparqlQuery.getQueryString(),1e3).done(function(){t._handleQueryResult(),r.resolve(),s.setTimeout(function(){t._actionBar.show("wdqs-action-preview","","default")},200)}).fail(function(){r.reject()}),r.promise())},e.prototype._handleQueryError=function(){o("#execute-button").prop("disabled",!1);var e=this._sparqlApi.getError(),t=null,r=this._sparqlApi.ERROR_CODES;switch(e.code){case r.TIMEOUT:t="wdqs-action-timeout";break;case r.MALFORMED:t="wdqs-action-malformed-query";break;case r.SERVER:t="wdqs-action-server-error";break;default:t="wdqs-action-unknow-error"}return e.debug&&o("#query-error").html(o("<pre>").text(e.debug)).show(),this._actionBar.show(t||"",e.message||"","danger"),this._track("result.error."+(t||"unknown")),void 0===e.debug?"":e.debug},e.prototype._handleQueryResult=function(){var e=this._sparqlApi;o("#response-summary").text(wikibase.queryService.ui.i18n.getMessage("wdqs-app-resultbrowser-response-summary","$1 results in $2&nbsp;ms",[e.getResultLength(),e.getExecutionTime()]).replace(/&nbsp;/g," ")),o(".result").show(),o("#execute-button").prop("disabled",!1);var t=e.getQueryUri();o(".queryUri").attr("href",t),o(".rawGraphsUri").attr("href","http://wikidata.rawgraphs.io/?url="+t);var r=this._createResultBrowsers(e.getResultRawData());return this._drawResult(r),this._selectedResultBrowser=null,this._track("result.resultLength",e.getResultLength()),this._track("result.executionTime",e.getExecutionTime(),"ms"),this._track("result.received.success"),!1},e.prototype._createResultBrowsers=function(r){var a=this,n=this._getBrowserOptions(),s=null;return null!==n.defaultName?this._track("result.browser."+n.defaultName):this._track("result.browser.default"),o.each(this._resultBrowsers,function(e,t){var r=new wikibase.queryService.ui.resultBrowser[t.class];if(r.setSparqlApi(a._sparqlApi),n.defaultName===e&&(a._setSelectedDisplayType(t),s=r),n.optionsMap.has(e)){var i=new wikibase.queryService.ui.resultBrowser.helper.Options(n.optionsMap.get(e));r.setOptions(i)}t.object=r}),null===s&&(s=this._resultBrowsers.Table.object),s.resetVisitors(),o.each(this._resultBrowsers,function(e,t){s.addVisitor(t.object),t.object.setResult(r)}),s},e.prototype._getBrowserOptions=function(){for(var e,t=null,r=new Map,i=/#(defaultView|view):(\w+)(\{.*\})?/g;null!==(e=i.exec(this._query));){var a=e[2];if(this._resultBrowsers.hasOwnProperty(a)&&("defaultView"===e[1]&&(t=a),e[3])){var n=r.has(a)?r.get(a):{};try{r.set(a,o.extend(n,JSON.parse(e[3])))}catch(e){s.console.error(e)}}}return{defaultName:t,optionsMap:r}},e.prototype._initExamples=function(){var r=this;new wikibase.queryService.ui.dialog.QueryExampleDialog(o("#QueryExamples"),this._querySamplesApi,function(e,t){e&&e.trim()&&(r._editor?(r._editor.setValue("#"+t+"\n"+e),o("#QueryExamples").one("hidden.bs.modal",function(){setTimeout(function(){r._editor.focus()},0)})):(r.draw(e),s.location.hash="#"+encodeURIComponent("#"+t+"\n"+e)))},this._wikibaseApi)},e.prototype._initCodeExamples=function(){var e=this;e._codeSamplesApi&&new wikibase.queryService.ui.dialog.CodeExample(o("#CodeExamples"),function(){return e._codeSamplesApi.getExamples(e._query)})},e.prototype._initQueryLinkPopover=function(){var r=this;o(".shortUrlTrigger.result").clickover({placement:"left",global_close:!0,html:!0,sanitize:!1,content:function(){var e;e=r._editor?"#"+encodeURIComponent(r._editor.getValue()):s.location.hash;var t=o("<a>").attr("href","embed.html"+e);return r._shorten.shorten(t[0].href)}}).click(function(){r._track("buttonClick.shortUrlResult")})},e.prototype._initHandlersDownloads=function(){var e=this._sparqlApi,t={CSV:{handler:o.proxy(e.getResultAsCsv,e),mimetype:"text/csv;charset=utf-8"},JSON:{handler:o.proxy(e.getResultAsJson,e),mimetype:"application/json;charset=utf-8"},TSV:{handler:o.proxy(e.getSparqlTsv,e),mimetype:"text/tab-separated-values;charset=utf-8"},"Simple TSV":{handler:o.proxy(e.getSimpleTsv,e),mimetype:"text/tab-separated-values;charset=utf-8",ext:"tsv"},"Full JSON":{handler:o.proxy(e.getResultAsAllJson,e),mimetype:"application/json;charset=utf-8",ext:"json"},HTML:{handler:o.proxy(e.getResultHTML,e),mimetype:"application/html;charset=utf-8",ext:"html"},SVG:{handler:function(){var e=o("#query-result svg");if(!e.length)return null;e.attr({version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:svg":"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"});try{return'<?xml version="1.0" encoding="utf-8"?>\n'+e[0].outerHTML}catch(e){return null}},mimetype:"data:image/svg+xml;charset=utf-8",ext:"svg"}},n=this,r=function(r,i,a){return function(e){e.preventDefault(),n._track("buttonClick.download."+r);var t=i();t&&u(t,r,a)}};for(var i in t){var a=t[i].ext||i.toLowerCase(),s=i.replace(/\s/g,"-");o("#download"+s).click(r("query."+a,t[i].handler,t[i].mimetype))}},e.prototype._handleQueryResultBrowsers=function(){var r=this;o.each(this._resultBrowsers,function(e,t){t.$element.off("click"),t.object.isDrawable()?(t.$element.removeClass("result-browser-inactive"),t.$element.css("opacity",1).attr("href","#"),t.$element.click(function(){return o(this).closest(".open").removeClass("open"),r._setSelectedDisplayType(t),o("#query-result").html(""),r._drawResult(t.object),r._selectedResultBrowser=e,r._track("buttonClick.display."+e),!1})):(t.$element.addClass("result-browser-inactive"),t.$element.css("opacity",.5).removeAttr("href"))})},e.prototype._drawErrorResult=function(t){var e=_.find(this._resultBrowsers,function(e){if(e.object===t)return e});this._resultBrowsers.Table.object.draw(o("#query-result")),this._actionBar.show("wdqs-action-error-display",e&&e.label||null,"warning")},e.prototype._drawResult=function(t){var r=this;o(s).off("scroll.resultBrowser"),o(s).off("resize.resultBrowser"),this._actionBar.show("wdqs-action-render","","success",100),s.setTimeout(function(){try{o("#query-result").show(),MathJax.startup.output.clearCache(),t.draw(o("#query-result")),o("#MJX-CHTML-styles").replaceWith(MathJax.chtmlStylesheet()),r._actionBar.hide();var e=r._query.match(/#title:(.*)/);e&&e[1]?(r._actionBar.show(e[1],""),document.title=e[1]+" - "+r._originalDocumentTitle):document.title=r._originalDocumentTitle}catch(e){r._drawErrorResult(t),s.console.error(e)}r._handleQueryResultBrowsers()},20)},e.prototype._setSelectedDisplayType=function(e){o("#display-button-icon").attr("class",e.icon.split("-",1)[0]+" "+e.icon),o("#display-button-label").text(e.label)},e.prototype._track=function(e,t,r){var i=this._getReferrerType();this._trackingApi.track(this.trackingNamespace+"app."+e,t,r),this._trackingApi.track(this.trackingNamespace+"referrer."+i+".app."+e,t,r)},e.prototype._getReferrerType=function(){return document.referrer?document.referrer.startsWith(this._queryBuilderUrl)?"query-builder":"other-referrer":"no-referrer"},e}(jQuery,download,window),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.ui=wikibase.queryService.ui||{},wikibase.queryService.ui.resultBrowser=wikibase.queryService.ui.resultBrowser||{},wikibase.queryService.ui.resultBrowser.helper=wikibase.queryService.ui.resultBrowser.helper||{},wikibase.queryService.ui.resultBrowser.helper.FormatterHelper=function(u,t){"use strict";var r="http://commons.wikimedia.org/wiki/special:filepath/",l="http://www.w3.org/2001/XMLSchema#dateTime",i=["http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#float","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#positiveInteger","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedShort","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#negativeInteger"];function e(e){this._options=e||new wikibase.queryService.ui.resultBrowser.helper.Options({})}e.initMoment=function(){t.updateLocale("en",{longDateFormat:{LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"}})},e.prototype.getOptions=function(){return this._options},e.prototype.setOptions=function(e){this._options=e},e.prototype.formatRow=function(r,i){var a=this,n=u("<div/>");return u.each(r,function(e,t){a._isLabelField(e,r)||a._isHiddenField(e)||(t=u.extend({label:a._getLabel(r,e)},t),n.prepend(u("<div>").append(a.formatValue(t,e,i))))}),n},e.prototype._isLabelField=function(e,t){return e.endsWith("Label")&&void 0!==t[e.slice(0,-5)]},e.prototype._isHiddenField=function(e){return-1!==this.getOptions().getColumnNames("hide",[]).indexOf(e)},e.prototype._getLabel=function(e,t){var r=e[t+"Label"];return r&&r.value||null},e.prototype.formatValue=function(e,t,r){var i=e.value,a=u("<span>");if(t||(t=e.dataType||""),!e.type)return u("<span>").text(i).attr("title",t);switch(e.datatype||e.type){case"uri":var n=u("<a>").attr({title:t,href:i,target:"_blank",class:"item-link",rel:"noopener"});a.append(n),this.isCommonsResource(i)?(n.attr("href",this.getCommonsResourceFullUrl(i)),n.attr("title",t+": commons:"+this.getCommonsResourceFileName(i)),r?(n.click(this.handleCommonResourceItem),n.append(u("<img>").attr("src",this.getCommonsResourceThumbnailUrl(i,"120"))).width("120")):(n.attr({href:"https://commons.wikimedia.org/wiki/File:{FILENAME}".replace(/{FILENAME}/g,this.getCommonsResourceFileName(i))}),n.text("commons:"+decodeURIComponent(this.getCommonsResourceFileName(i))),a.prepend(this.createGalleryButton(i,t)," "))):(n.text(e.label||this.abbreviateUri(i)),this.isEntityUri(i)&&a.prepend(this.createExploreButton(i)," "));break;case l:t||(t=wikibase.queryService.ui.i18n.getMessage("wdqs-app-result-formatter-title-datetime","Raw ISO timestamp"));var s=u("<span>").text(this._formatDate(i));s.attr("title",t+": "+i),a.append(s);break;case"http://www.w3.org/1998/Math/MathML":try{a.append(MathJax.mathml2chtml(i.replace(/caligraphic/g,"calligraphic")));break}catch(e){window.console.error("Invalid MathML",e)}default:var o=u("<span>").text(i);e["xml:lang"]?o.attr("title",t+": "+i+"@"+e["xml:lang"]):o.attr("title",t+": "+i),a.append(o)}return a},e.prototype._formatDate=function(e){var t,r=!1,i=e.replace(/^(?:-\d+|\+?0+\b)/,function(e){return r=!0,Math.abs(e)+1}),a=this.parseDate(i);if(a.isValid())t=a.format("LL");else{var n=i.replace(/^\+?(\d+).*/,"$1");t="0000".slice(n.length)+n}return r&&(t+=" BCE"),t},e.prototype.parseDate=function(e){return e=(e=(e=e.replace(/^(?![+-])/,"+")).replace(/^([+-]?)(\d{1,5}\b)/,function(e,t,r){return t+("00000"+r).slice(-6)})).replace(/Z$/,""),t(e,t.ISO_8601)},e.prototype.isEntityUri=function(e){return"string"==typeof e&&/\/entity\/(Q|P|L|M)[0-9]+$/.test(e)},e.prototype.createExploreButton=function(e){var t=u('<a href="'+e+'" title="Explore item" class="explore glyphicon glyphicon-search" tabindex="-1" aria-hidden="true">');return t.click(u.proxy(this.handleExploreItem,this)),t},e.prototype.isCommonsResource=function(e){return e.toLowerCase().startsWith(r.toLowerCase())},e.prototype.getCommonsResourceFileName=function(e){var t=new RegExp(r,"ig");return decodeURIComponent(e.replace(t,""))},e.prototype.getCommonsResourceFullUrl=function(e){return this.isCommonsResource(e)?e.replace(/^http:/,"https:"):e},e.prototype.getCommonsResourceThumbnailUrl=function(e,t){return this.isCommonsResource(e)?e.replace(/^http:/,"https:")+"?width="+(t||400):e},e.prototype.createGalleryButton=function(e,t){var r=this.getCommonsResourceFileName(e),i=this.getCommonsResourceThumbnailUrl(e,900),a=u("<a>").attr({title:"Show Gallery",href:i,"aria-hidden":"true",class:"gallery glyphicon glyphicon-picture","data-gallery":"G_"+t,"data-title":decodeURIComponent(r)});return a.click(this.handleCommonResourceItem),a},e.prototype.abbreviateUri=function(e){var t,r,i=wikibase.queryService.RdfNamespaces.ALL_PREFIXES,a=0;for(t in i)0===e.indexOf(i[t])&&i[t].length>a&&(a=i[t].length,r=t);return r?r+":"+e.substr(a):"<"+e+">"};var o=100;return e.prototype.handleExploreItem=function(e){var t=u("#explorer-dialogs .explorer-dialog").clone(),r=u(e.target).attr("href"),i=t.dialog({uiLibrary:"bootstrap",autoOpen:!1,maxWidth:window.innerWidth,maxHeight:window.innerHeight,minHeight:220,minWidth:220,resizable:!0,width:window.innerWidth/2,height:Math.min(window.innerWidth,window.innerHeight)/2,drag:function(e){i.children("div.explorer-body").css("visibility","hidden"),u("body").addClass("disable-selection"),i.mousemove(function(e){e.pageY<30&&i.css("top","10px")})},dragStop:function(e){i.children("div.explorer-body").css("visibility","visible"),u("body").removeClass("disable-selection")},resize:function(e){i.children("div.explorer-body").css("visibility","hidden"),u("body").addClass("disable-selection")},resizeStop:function(e){i.children("div.explorer-body").css("visibility","visible"),u("body").removeClass("disable-selection")}});e.preventDefault();var a=u.i18n&&u.i18n().locale||"en",n="embed.html#"+encodeURIComponent("#defaultView:Graph\n"+("SELECT ?item ?itemLabel WHERE { BIND( <"+r+'> as ?item ).\tSERVICE wikibase:label { bd:serviceParam wikibase:language "'+a+'" } }')),s=u(window).scrollTop()+200;return i.children("div.explorer-body").html(u('<iframe frameBorder="0" scrolling="no"></iframe>').attr("src",n)),i.css("left",o),i.css("top",s),i.open(),o+=10,!1},e.prototype.handleCommonResourceItem=function(e){e.preventDefault(),u(this).ekkoLightbox({scale_height:!0})},e.prototype.isLabel=function(e){return!!e&&("xml:lang"in e||"literal"===e.type&&(!e.datatype||"http://www.w3.org/2001/XMLSchema#string"===e.datatype))},e.prototype.isNumber=function(e){return e&&e.datatype&&-1!==i.indexOf(e.datatype)},e.prototype.isDateTime=function(e){return e&&e.datatype===l},e.prototype.isEntity=function(e){return e&&e.value&&this.isEntityUri(e.value)},e.prototype.isColor=function(e){return e&&"literal"===e.type&&e.value&&/^([\dA-F]{1,2}){3}$/i.test(e.value)},e.prototype.getColorForHtml=function(e){return"#"+e.value},e.prototype.calculateLuminance=function(e){var t=parseInt(e.substr(1,2),16)/255,r=parseInt(e.substr(3,2),16)/255,i=parseInt(e.substr(5,2),16)/255;return isFinite(t)&&isFinite(r)&&isFinite(i)?.2126*(t=t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(r=r<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4))+.0722*(i=i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)):NaN},e.prototype._options=null,e}(jQuery,moment),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.ui=wikibase.queryService.ui||{},wikibase.queryService.ui.resultBrowser=wikibase.queryService.ui.resultBrowser||{},wikibase.queryService.ui.resultBrowser.helper=wikibase.queryService.ui.resultBrowser.helper||{},wikibase.queryService.ui.resultBrowser.helper.Options=function(e){"use strict";function t(e){if("object"!=typeof e)throw new Error("options must be an object");this._options=e}return t.prototype._options=null,t.prototype._requireTwoArguments=function(e){if(2!==e.length)throw new Error("must be called with exactly two arguments")},t.prototype.get=function(e,t){return this._requireTwoArguments(arguments),e in this._options?this._options[e]:t},t.prototype.getArray=function(e,t){this._requireTwoArguments(arguments);var r=this.get(e,t);return Array.isArray(r)?r:[r]},t.prototype.getColumnNames=function(e,t){return this._requireTwoArguments(arguments),this.getArray(e,t).filter(function(e){return!("string"!=typeof e||!e.startsWith("?"))||(window.console.warn("column name "+e+" is not a variable name, ignoring"),!1)}).map(function(e){return e.substring(1)})},t}(jQuery),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.ui=wikibase.queryService.ui||{},wikibase.queryService.ui.resultBrowser=wikibase.queryService.ui.resultBrowser||{},wikibase.queryService.ui.resultBrowser.AbstractResultBrowser=function(e,t){"use strict";function r(){this._visitors=[]}return r.prototype._formatter=null,r.prototype._result=null,r.prototype._options=null,r.prototype._visitors=null,r.prototype._drawable=!1,r.prototype._sparqlApi=null,r.prototype.setResult=function(e){this._result=e},r.prototype.setOptions=function(e){this._options=e,this._getFormatter().setOptions(e)},r.prototype.getOptions=function(){return this._options||new t.queryService.ui.resultBrowser.helper.Options({})},r.prototype.setSparqlApi=function(e){this._sparqlApi=e},r.prototype.getSparqlApi=function(){return this._sparqlApi},r.prototype._iterateResult=function(n){var s=this;e.each(this._result.results.bindings,function(i,a){e.each(s._result.head.vars,function(e,t){var r=a[t]||null;s.processVisitors(r,t),n(r,t,a,i)})})},r.prototype.isDrawable=function(){return this._drawable},r.prototype.draw=function(e){jQuery.error("Method draw() needs to be implemented!")},r.prototype.addVisitor=function(e){this._visitors.push(e)},r.prototype.resetVisitors=function(){this._visitors=[]},r.prototype.processVisitors=function(r,i){var a={};0!==this._visitors.length&&(e.each(this._visitors,function(e,t){t.visit&&"function"==typeof t.visit&&!1===t.visit(r,i)&&(a[e]=!0)}),this._visitors=this._visitors.filter(function(e,t){return!a[t]}))},r.prototype.visit=function(e){return!1},r.prototype.setFormatter=function(e){this._formatter=e},r.prototype._getFormatter=function(){return null===this._formatter&&(this._formatter=new t.queryService.ui.resultBrowser.helper.FormatterHelper),this._formatter},r}(jQuery,wikibase),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.ui=wikibase.queryService.ui||{},wikibase.queryService.ui.resultBrowser=wikibase.queryService.ui.resultBrowser||{},wikibase.queryService.ui.resultBrowser.AbstractChartResultBrowser=function(e,t){"use strict";function r(){}return(r.prototype=new wikibase.queryService.ui.resultBrowser.AbstractResultBrowser)._getLabelColumns=function(){var t=this,r=t._getRows()[0];return t._getColumns().filter(function(e){return t._getFormatter().isLabel(r[e])})},r.prototype._getNumberColumns=function(){var r=this,e=r._getRows();return r._getColumns().filter(function(t){return e.some(function(e){return e[t]&&r._getFormatter().isNumber(e[t])})})},r.prototype._getColumns=function(){return this._result.head.vars},r.prototype._getRows=function(){return this._result.results.bindings},r}(jQuery,window),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.ui=wikibase.queryService.ui||{},wikibase.queryService.ui.resultBrowser=wikibase.queryService.ui.resultBrowser||{},window.mediaWiki=window.mediaWiki||{},wikibase.queryService.ui.resultBrowser.AbstractDimpleChartResultBrowser=function(u,i,n,r,s){"use strict";function e(){}return(e.prototype=new wikibase.queryService.ui.resultBrowser.AbstractChartResultBrowser)._dataColumns=null,e.prototype._data=null,e.prototype._$element=null,e.prototype._svg=null,e.prototype._chart=null,e.prototype._chartLegend=null,e.prototype._chartSeriesKey=null,e.prototype._chartStoryKey=null,e.prototype._isStoryPaused=!1,e.prototype.draw=function(e){var t=this;this._$element=u("<div>").css({width:"100%",height:"98vh"}),e.html(this._$element),this._createData(),this._drawSvg(),this._createChart(),this._drawChart(),this._createLegendFilter(),r.onresize=function(){t._drawChart(250,!0)}},e.prototype._createData=function(){var i=[],a={},n=null;this._iterateResult(function(e,t,r){null===n&&(n=r),r!==n&&(n=r,i.push(a),a={}),e&&e.value&&(a[t]=e.value)}),i.push(a),this._data=i},e.prototype._drawSvg=function(){this._svg=s.newSvg(this._$element[0],"100%","100%")},e.prototype._createChart=function(){this._chart=new s.chart(this._svg,this._data),this._chart.setBounds(0,0,"100%","100%"),this._chart.setMargins("5%","5%","2%","25%"),this._createChartAxis();var e=this._chart.addSeries(this._chartSeriesKey,this._getPlotType());e.addOrderRule(this._chartSeriesKey),e.lineMarkers=!0,this._chartStoryKey&&this._createChartStory(),this._chartLegend=this._chart.addLegend("1%","85%","100%","15%")},e.prototype._getPlotType=function(){jQuery.error("Method _getPlotType() needs to be implemented!")},e.prototype._createChartAxis=function(){var r=this,i=this._getRows()[0],a=this._getFormatter(),n=this._chart,s=["y","x"],o=!1;u.each(this._getColumns(),function(e,t){if(0!==s.length)a.isLabel(i[t])&&(n.addCategoryAxis(s.pop(),t),o=!0),a.isNumber(i[t])&&n.addMeasureAxis(s.pop(),t),a.isDateTime(i[t])&&(n.addTimeAxis(s.pop(),t,"%Y-%m-%dT%H:%M:%SZ","%m-%d-%Y"),o=!0);else if(a.isLabel(i[t])){if(!r._chartSeriesKey)return void(r._chartSeriesKey=t);if(!r._chartStoryKey)return r._chartStoryKey=t,!1}}),o||this._chartSeriesKey||!n.axes[0]||(this._chartSeriesKey=n.axes[0].measure)},e.prototype._createChartStory=function(){var e=this,t=this._chart.setStoryboard(this._chartStoryKey);t.frameDuration=5e3,this._$element.click(function(){if(e._isStoryPaused)return t.startAnimation(),void(e._isStoryPaused=!1);t.pauseAnimation(),e._isStoryPaused=!0})},e.prototype._createLegendFilter=function(){var e=this,a=s.getUniqueValues(this._data,this._chartSeriesKey);this._chart.legends=[],this._chartLegend.shapes.selectAll("rect").on("click",function(t){var r=!1,i=[];a.forEach(function(e){e===t.aggField.slice(-1)[0]?r=!0:i.push(e)}),n.select(this).style("opacity",r?.2:.8),r||i.push(t.aggField.slice(-1)[0]),a=i,e._chart.data=s.filterData(e._data,e._chartSeriesKey,a),e._drawChart(800)})},e.prototype._drawChart=function(e,t){var r=this;this._chart.draw(e,t),i.delay(function(){r._svg.selectAll(".dimple-marker,.dimple-marker-back").attr("r",2)},1.2*e)},e.prototype.isDrawable=function(){return 2<=Object.keys(this._dataColumns).length},e.prototype.visit=function(e,t){return this._checkColumn(e,t)},e.prototype._checkColumn=function(e,t){return this._getFormatter().isLabel(e)&&(this._dataColumns[t]=!0),this._getFormatter().isNumber(e)&&(this._dataColumns[t]=!0),this._getFormatter().isDateTime(e)&&(this._dataColumns[t]=!0),!this.isDrawable()},e}(jQuery,_,d3,window,dimple),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.ui=wikibase.queryService.ui||{},wikibase.queryService.ui.resultBrowser=wikibase.queryService.ui.resultBrowser||{},wikibase.queryService.ui.resultBrowser.ImageResultBrowser=function(u,t){"use strict";function e(){this._queue=[]}return(e.prototype=new wikibase.queryService.ui.resultBrowser.AbstractResultBrowser)._grid=null,e.prototype._loading=u("#loading-spinner"),e.prototype._heightThreshold=400,e.prototype._widthThreshold=70,e.prototype._fixedItemWidth=0,e.prototype._totalWidth=0,e.prototype._lineHeight=0,e.prototype._queue=null,e.prototype.draw=function(e){var i=this;this._queue.splice(0,this._queue.length),this._grid=u('<div class="img-grid">').html('<div class="item-row hidden-row">'),e.html(this._grid),this._lineHeight=1.5*parseFloat(this._grid.css("font-size")),this._iterateResult(function(e,t,r){e&&i._isCommonsResource(e.value)&&(r.url=e.value,i._queue.push(r))}),this._fixedItemWidth=this._calculateBaseWidth(),this._gridWidth=this._grid.width(),this._lazyLoad()},e.prototype._calculateBaseWidth=function(){var t=0,r=u('<div class="item hidden">');return this._grid.append(r),["margin-left","margin-right","padding-left","padding-right"].forEach(function(e){t+=parseFloat(r.css(e))}),r.remove(),t},e.prototype._lazyLoad=function(){var e=this;u(window).off("scroll.resultBrowser"),u(window).off("resize.resultBrowser"),this._queue.length?this._getPosFromTop()<3*window.innerHeight?(this._loading.show(),this._loadNextChunk().done(function(){e._lazyLoad.call(e)})):(u(window).on("scroll.resultBrowser",u.proxy(t.debounce(e._lazyLoad,100),e)),this._loading.hide()):(this._showFinalRow(),this._loading.hide()),u(window).on("resize.resultBrowser",u.proxy(t.debounce(this._layoutPage,100),e))},e.prototype._showFinalRow=function(e){var t=u(".item-row").last(),r=t.find(".item"),i={height:0,widths:[]};t.children().length?(i.height=this._heightThreshold,i.widths=r.map(function(){return u(this).data("aspectRatio")*(i.height-u(this).data("fixedHeight"))}).toArray(),this._setDimensions(t,i,e)):t.remove()},e.prototype._loadNextChunk=function(){var a=this,e=this._queue.splice(0,8),n=[u.when()];return e.forEach(function(e,t){var r=n[t],i=u.when(a._preloadItem(e),r);n.push(i),i.done(function(e){a._appendItem(e)})}),n[e.length]},e.prototype._getPosFromTop=function(){return u(".item-row").last().offset().top-u(window).scrollTop()},e.prototype._calculateDimensions=function(e){var t=e.find(".item"),r=this._fixedItemWidth*t.length,i=this._gridWidth-r,a=0,n=0,s={height:0,widths:[]};return t.each(function(){var e=u(this).data("aspectRatio"),t=u(this).data("fixedHeight");a+=e,n+=e*t}),s.height=(i+n)/a,s.widths=t.map(function(){var e=u(this).data("aspectRatio")*(s.height-u(this).data("fixedHeight"));return Math.trunc(100*e)/100}).toArray(),s},e.prototype._layoutPage=function(){var e=u(".item");this._gridWidth=this._grid.width(),u(".item").unwrap(),this._grid.append(u('<div class="item-row hidden-row">')),e.each(u.proxy(function(e,t){this._appendItem(t,!0)},this)),this._queue.length?u(".hidden-row").not(".hidden-row:last").removeClass("hidden-row"):(this._showFinalRow(!0),u(".hidden-row").removeClass("hidden-row"))},e.prototype._appendItem=function(e,t){var r=u(".item-row").last();r.append(e),this._layOutRow(r,t)},e.prototype._preloadItem=function(e){var t=this,r=u.Deferred(),i=this._getThumbnail(e.url,1024),a=this._getFormatter().getCommonsResourceFileName(i),n=this._getItem(this._getThumbnail(i),this._getThumbnail(i,1024),a,e),s=this._lineHeight*n.find(".summary")[0].childElementCount,o=n.find(".item-img");return o[0].onerror=function(){o.attr("src","https://upload.wikimedia.org/wikipedia/commons/a/ac/No_image_available.svg")},o[0].onload=function(){var e=this.naturalWidth/this.naturalHeight;r.resolveWith(t,n.data("aspectRatio",e))},n.data("fixedHeight",s),o.attr("src",i),r.promise()},e.prototype._layOutRow=function(e,t){var r=this._calculateDimensions(e);(r.height<this._heightThreshold||Math.min(r.widths)<this._widthThreshold)&&(this._setDimensions(e,r,t),this._grid.append(u('<div class="item-row hidden-row">')))},e.prototype._setDimensions=function(e,t,r){e.find(".item").width(function(e){return t.widths[e]}),r||e.removeClass("hidden-row")},e.prototype._getItem=function(e,t,r,i){var a=u("<a>").click(this._getFormatter().handleCommonResourceItem).attr({href:t,"data-gallery":"g","data-title":r}).append(u('<img class="item-img" >')),n=this._getFormatter().formatRow(i).addClass("summary");return u('<div class="item">').append(a,n)},e.prototype._isCommonsResource=function(e){return this._getFormatter().isCommonsResource(e)},e.prototype._getThumbnail=function(e,t){return this._getFormatter().getCommonsResourceThumbnailUrl(e,t)},e.prototype.visit=function(e){return this._checkImage(e)},e.prototype._checkImage=function(e){return!(e&&e.value&&this._isCommonsResource(e.value))||!(this._drawable=!0)},e}(jQuery,_),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.ui=wikibase.queryService.ui||{},wikibase.queryService.ui.resultBrowser=wikibase.queryService.ui.resultBrowser||{},wikibase.queryService.ui.resultBrowser.TableResultBrowser=function(n,s){"use strict";function e(){}var i=[10,50,100,200,500,1e3];return(e.prototype=new wikibase.queryService.ui.resultBrowser.AbstractResultBrowser)._columns=null,e.prototype._rows=null,e.prototype._$selectedCell={},e.prototype._selectedCellHighlighted=!1,e.prototype._tableNumber=!1,e.prototype._pageLoading=!0,e.prototype._sorter={string:function(e,t){return e.localeCompare(t)},number:function(e,t){return t<=e?-1:1},generic:function(e,t){if(!t)return 1;if(!e)return-1;var r=this._getFormatter();return r.isNumber(e)&&r.isNumber(t)?this._sorter.number(Number(e.value),Number(t.value)):r.isEntityUri(e.value)&&r.isEntityUri(t.value)?this._sorter.number(Number(e.value.replace(/[^0-9]/gi,"")),Number(t.value.replace(/[^0-9]/gi,""))):this._sorter.string(e.value,t.value)}},e.prototype.draw=function(e){var t=this._result;if(void 0!==t.boolean){var r=n("<table>").attr("class","table");return r.append("<tr><td>"+t.boolean+"</td></tr>").addClass("boolean"),void e.html(r)}this.columns=t.head.vars,this.rows=t.results.bindings;var i=n("<table/>");e.html(i),this.drawBootstrapTable(i),i.children().width()>n(s).width()&&i.bootstrapTable("toggleView")},e.prototype.drawBootstrapTable=function(r){var a=this,e=200<this.rows.length;jQuery.fn.bootstrapTable.columnDefaults.formatter=function(e,t,r){return e?(a.processVisitors(e,this.field),a._getFormatter().formatValue(e).html()):""};var t={"click .explore":n.proxy(this._getFormatter().handleExploreItem,this),"click .gallery":this._getFormatter().handleCommonResourceItem};r.bootstrapTable({columns:this.columns.map(function(e){return{title:e,field:e,events:t,sortable:!0,sorter:n.proxy(a._sorter.generic,a)}}),data:this.rows,mobileResponsive:!0,search:e,pagination:e,showPaginationSwitch:e,pageSize:200,pageList:i,keyEvents:!1,cookie:!0,cookieIdTable:"1",cookieExpire:"1y",cookiesEnabled:["bs.table.pageList"],onResetView:function(e,t){void 0===s._currentTableNumber&&(s._currentTableNumber=0),s._currentTableNumber++,a._tableNumber=s._currentTableNumber,a._selectedCellHighlighted=!1,a._pageLoading=!1,a.selectFirstCell(r),n("button:focus").blur()},onClickCell:function(e,t,r,i){a._selectedCellHighlighted=!0,a.selectCell(i)}}),n(document).keydown(function(e){a.keyPressed(e)}),n("#result-browser-menu a").on("click",function(){void 0===s._currentTableNumber&&(s._currentTableNumber=0),s._currentTableNumber++})},e.prototype.selectFirstCell=function(e){var t=e.find("td").first();this.selectCell(t)},e.prototype.selectCell=function(e){!0===this._selectedCellHighlighted?e.length&&(n(".table-cell-selected").removeClass("table-cell-selected"),this._$selectedCell=e,this._$selectedCell.parent().hasClass("no-records-found")||this._$selectedCell.addClass("table-cell-selected")):this._$selectedCell=e},e.prototype.scrollToCell=function(e){var t=e.offset().top;n("html, body").scrollTop(t-s.innerHeight/3)},e.prototype.keyPressed=function(e){if(s._currentTableNumber===this._tableNumber&&!n(document.activeElement).is("textarea, input, button")&&0!==this._$selectedCell.length){if(!0!==this._selectedCellHighlighted)return"ArrowLeft"!==e.key&&"ArrowUp"!==e.key&&"ArrowRight"!==e.key&&"ArrowDown"!==e.key||(this._selectedCellHighlighted=!0,this.selectCell(this._$selectedCell),this.scrollToCell(this._$selectedCell)),void e.stopImmediatePropagation();if((e.ctrlKey||e.metaKey)&&("c"===e.key||"C"===e.key))return""!==s.getSelection().toString()?void 0:(this.copyToClipboard(this._$selectedCell),void e.stopImmediatePropagation());if(!(e.ctrlKey||e.metaKey||e.altKey)){switch(e.key){case"Enter":this._$selectedCell.find("a").each(function(){return!n(this).text().trim().length||(s.open(n(this).prop("href")),!1)});break;case"ArrowLeft":0===this._$selectedCell.prev().length?!1===this._pageLoading&&(this._pageLoading=!0,n(".page-pre a").click()):this.selectCell(this._$selectedCell.prev());break;case"ArrowUp":this._$selectedCell.parent().prev().children("td:nth-child("+(this._$selectedCell.index()+1).toString()+")").length&&(this.selectCell(this._$selectedCell.parent().prev().children("td:nth-child("+(this._$selectedCell.index()+1).toString()+")")),this.scrollToCell(this._$selectedCell));break;case"ArrowRight":0===this._$selectedCell.next().length?!1===this._pageLoading&&(this._pageLoading=!0,n(".page-next a").click()):this.selectCell(this._$selectedCell.next());break;case"ArrowDown":this._$selectedCell.parent().next().children("td:nth-child("+(this._$selectedCell.index()+1).toString()+")").length&&(this.selectCell(this._$selectedCell.parent().next().children("td:nth-child("+(this._$selectedCell.index()+1).toString()+")")),this.scrollToCell(this._$selectedCell))}e.stopImmediatePropagation()}}},e.prototype.copyToClipboard=function(e){var t=n("<input>");n("body").append(t),t.val(e.text().trim()).select(),document.execCommand("copy"),t.remove()},e.prototype.isDrawable=function(){return!0},e.prototype.visit=function(e){return!1},e}(jQuery,window),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.ui=wikibase.queryService.ui||{},wikibase.queryService.ui.resultBrowser=wikibase.queryService.ui.resultBrowser||{},wikibase.queryService.ui.resultBrowser.CoordinateResultBrowser=function(u,l,e,o,r,i){"use strict";var t=["http://www.opengis.net/ont/geosparql#wktLiteral","http://www.openlinksw.com/schemas/virtrdf#Geometry"],a="http://www.opengis.net/def/crs/OGC/1.3/CRS84",n=["http://www.wikidata.org/entity/Q2",a],s=["?layerLabel","?layer"],c="_LAYER_DEFAULT_GROUP",p={url:"https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}{r}.png",options:{id:"wikipedia-map-01",attribution:' <a href="https://maps.wikimedia.org/">Wikimedia</a> | &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}},h={url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",options:{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}},d=null;function g(){this._markerGroupColors={};var t=e.scale.category10();this._getMarkerGroupColor=function(e){return e in this._markerGroupColors?this._markerGroupColors[e]:t(e)},d=l.Control.extend({options:{position:"topright"},onAdd:function(e){var t=l.DomUtil.create("button");return u(t).addClass("btn btn-default wdqs-control-scroll-top"),u(t).append(u(' <span class="glyphicon glyphicon-chevron-up"/> ')),t.onclick=function(){e.isFullscreen()&&e.toggleFullscreen(),u(i).scrollTop(0,0)},t}})}return(g.prototype=new wikibase.queryService.ui.resultBrowser.AbstractResultBrowser)._map=null,g.prototype._markerGroups=null,g.prototype._markerGroupsProgress=null,g.prototype._markerGroupColors=null,g.prototype._getMarkerGroupColor=null,g.prototype.draw=function(i){var e,a=this,n=u("<div>").attr("id","map").height("100vh");function s(){clearInterval(e),u("#map-progress").remove()}function t(){s();var e=o.compact(a._markerGroups),t=a._getMarkerClusterOptions(e.length);if(t){var r=l.markerClusterGroup(t);r.addLayers(e),e=[r]}a._map=l.map("map",{center:[0,0],maxZoom:18,minZoom:2,fullscreenControl:!0,preferCanvas:!0,layers:e}).fitBounds(a._markerGroups[c].getBounds()),a._setTileLayer(),a._createControls(),a._createMarkerZoomResize(),i.html(n)}i.html(n),e=setInterval(function(){if(0<a._markerGroupsProgress&&a._markerGroupsProgress<1){var e=(100*a._markerGroupsProgress).toFixed(2),t=wikibase.queryService.ui.i18n.getMessage("wdqs-result-map-progress","Loading map data: $1%",[e]);n.html(u("<div>").attr("id","map-progress").css({position:"relative",top:"20%",width:"100%",textAlign:"center"}).text(t))}else 1<=a._markerGroupsProgress&&s()},200),this._createMarkerGroups().done(t).fail(t)},g.prototype._createControls=function(){var i=this;if(this._map.addControl(l.control.zoomBox({modal:!1,className:"glyphicon glyphicon-zoom-in"})),this._map.addControl(new d),1<Object.keys(this._markerGroups).length){var e=this._getLayerControl(this._markerGroups).addTo(this._map);this._map.on("overlayadd overlayremove",function(r){r.layer===i._markerGroups[c]&&(u.each(i._markerGroups,function(e,t){"overlayadd"===r.type?i._map.addLayer(t):i._map.removeLayer(t)}),e._update())})}l.control.locate().addTo(this._map);new l.Control.MiniMap(new l.TileLayer(p.url,p.url.options),{zoomLevelOffset:-7,toggleDisplay:!0}).addTo(this._map)},g.prototype._createMarkerZoomResize=function(){var e=this;if(!(1e3<this._markerGroups[c].getLayers().length)){this._map.on("zoomend",function(){e._markerGroups[c].setStyle({radius:e._getMarkerRadius()})})}},g.prototype._getMarkerRadius=function(){return this._map?.5*this._map.getZoom():3},g.prototype._getLayerControl=function(){var i=this,a={},n="";return u.each(this._markerGroups,function(e,t){if(e===c)n=wikibase.queryService.ui.i18n.getMessage("wdqs-result-map-layers-all","All layers");else{var r=i._getMarkerGroupColor(e);n='<span style="color:'+r+'">&#x2b24;</span> '+e}a[n]=t}),l.control.layers(null,a)},g.prototype._createMarkerGroups=function(){var a=this,n=[],s=0,o={};function e(){if(0===Object.keys(o).length){var e=l.marker([0,0]).bindPopup("Nothing found!").openPopup();return{null:l.featureGroup([e])}}a._markerGroups={},u.each(o,function(e){a._markerGroups[e]=l.featureGroup(o[e])})}return o[c]=[],this._iterateResult(function(e,t,r){var i=a._extractGeoJson(e);null!==i&&n.push(u.when(i,r))}),u.each(n,function(e,t){t.done(function(e,i){s++,a._markerGroupsProgress=s/n.length;var r=a._getMarkerGroupsLayer(i);o[r]||(o[r]=[]);var t=l.geoJson(e,{style:a._getMarkerStyle(r,i),pointToLayer:function(e,t){return l.circleMarker(t,a._getMarkerStyle(r,i))},onEachFeature:function(e,t){var r=l.popup();t.bindPopup(r),t.on("click",function(){var e=a._getItemDescription(i);r.setContent(e[0])})}});o[r].push(t),o[c].push(t)})}),u.when.apply(u,n).done(e).fail(e)},g.prototype._getMarkerGroupsLayer=function(t){var e=this.getOptions().getColumnNames("layer",s).find(function(e){return t[e]});return e?t[e].value:c},g.prototype._getMarkerStyle=function(e,t){var r,i=this._getFormatter();return"rgb"in t&&i.isColor(t.rgb)?(r=i.getColorForHtml(t.rgb),this._markerGroupColors[e]=r):r=e!==c?this._getMarkerGroupColor(e):"#e04545",{color:r,opacity:.8,fillColor:r,fillOpacity:.9,radius:this._getMarkerRadius()}},g.prototype._getMarkerIcon=function(e){var t=e.getAllChildMarkers()[0].options,r=2*(1+t.radius),i='<div style="background-color: '+t.color+"; border-radius: 100%; width: "+r+"px; height: "+r+'px"></div>';return new l.DivIcon({html:i,className:"",iconSize:new l.Point(r,r)})},g.prototype._getMarkerClusterOptions=function(e){var t=this.getOptions().get("markercluster",1===e);return!!t&&(!0===t?{maxClusterRadius:0,iconCreateFunction:this._getMarkerIcon}:u.extend({},t))},g.prototype._splitWktLiteral=function(e){var t=e.match(/(<([^>]*)> +)?(.*)/);return t?{crs:t[2]||a,wkt:t[3]}:null},g.prototype._isWktLiteral=function(e){return e&&"literal"===e.type&&-1!==t.indexOf(e.datatype)},g.prototype._isCommonsMap=function(e){return e&&"uri"===e.type&&e.value.startsWith("http://commons.wikimedia.org/data/main/")&&e.value.endsWith(".map")},g.prototype._extractGeoJson=function(e){return this._isWktLiteral(e)?this._extractGeoJsonWktLiteral(e.value):this._isCommonsMap(e)?this._extractGeoJsonCommonsMap(e.value):null},g.prototype._extractGeoJsonWktLiteral=function(e){var t=this._splitWktLiteral(e);return t?-1===n.indexOf(t.crs)?null:u.when(r.parse(t.wkt)):null},g.prototype._extractGeoJsonCommonsMap=function(e){var t=e.match(/^http:\/\/commons.wikimedia.org\/data\/main\/(.*)$/)[1],r=decodeURIComponent(t);return r=r.replace(/\+/g," "),u.getJSON("https://commons.wikimedia.org/w/api.php",{format:"json",action:"query",titles:r,prop:"revisions",rvprop:"content",origin:"*",maxage:3600}).then(function(e){var t,r;for(t in e.query.pages)return r=e.query.pages[t].revisions[0]["*"],JSON.parse(r).data}).promise()},g.prototype._getItemDescription=function(e){return u("<div/>").append(this._getFormatter().formatRow(e,!0))},g.prototype._setTileLayer=function(){var e=h;("query.wikidata.org"===i.location.host||"localhost"===i.location.host||i.location.host.endsWith(".wmflabs.org"))&&(e=p),l.tileLayer(e.url,e.options).addTo(this._map)},g.prototype.visit=function(e){return this._checkCoordinate(e)},g.prototype._checkCoordinate=function(e){return!this._isWktLiteral(e)&&!this._isCommonsMap(e)||!(this._drawable=!0)},g}(jQuery,L,d3,_,wellknown,window),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.ui=wikibase.queryService.ui||{},wikibase.queryService.ui.resultBrowser=wikibase.queryService.ui.resultBrowser||{},wikibase.queryService.ui.resultBrowser.TreeMapResultBrowser=function(C,q,F){"use strict";function e(){this._labelColumns={}}return(e.prototype=new wikibase.queryService.ui.resultBrowser.AbstractChartResultBrowser)._labelColumns=null,e.prototype.draw=function(e){var i=this,a={},n=a,s=null,o=null,u=null;this._iterateResult(function(e,t,r){r!==u&&(null!==u&&(n.data={size:s,url:o},o=s=null,n=a),u=r),i._getFormatter().isLabel(e)&&(n[e.value]||(n[e.value]={}),n=n[e.value]),i._getFormatter().isNumber(e)&&(s=e.value),e&&e.value&&i._getFormatter().isEntityUri(e.value)&&(o=e.value)}),n.data={size:s,url:o};var t={name:"treeMap",children:this._createTreeData(a)};this._draw(e,t)},e.prototype._createTreeData=function(e){var s,o=this,u=[];return e.data||C.each(e,function(e,t){var r=o._createTreeData(t);if(0!==r.length)s={id:e,name:e,children:r};else{var i=1;t.data.size&&0<t.data.size&&(i=t.data.size);var a=e,n=t.data.url;n&&(a=n),s={id:a+Math.random(),name:e,size:i,url:n}}u.push(s)}),u},e.prototype._draw=function(e,t){var r,n,s=C(F).width(),o=C(F).height(),u=q.scale.linear().range([0,s]),l=q.scale.linear().range([0,o]),c=q.scale.category10(),p=20,h="#555555",d=q.layout.treemap().round(!1).size([s,o]).sticky(!0).value(function(e){return e.size}),g=q.select(e[0]).append("svg:svg").attr("width",s).attr("height",o).append("svg:g");n=r=t;var i=d.nodes(r),a=i.filter(function(e){return!e.children}),y=i.filter(function(e){return e.children}),f=g.selectAll("g.cell.parent").data(y,function(e){return"p-"+e.id}),w=f.enter().append("g").attr("class","cell parent").on("click",function(e){T(e)});w.append("rect").attr("width",function(e){return Math.max(.01,e.dx)}).attr("height",p).style("fill",h),w.append("foreignObject").attr("class","foreignObject").append("xhtml:body").attr("class","labelbody").append("div").attr("class","label");var m=f.transition().duration(500);m.select(".cell").attr("transform",function(e){return"translate("+e.dx+","+e.y+")"}),m.select("rect").attr("width",function(e){return Math.max(.01,e.dx)}).attr("height",p).style("fill",h),m.select(".foreignObject").attr("width",function(e){return Math.max(.01,e.dx)}).attr("height",p).select(".labelbody .label").text(function(e){return e.name}),f.exit().remove();var _=g.selectAll("g.cell.child").data(a,function(e){return"c-"+e.id}),b=_.enter().append("g").attr("class","cell child").on("click",function(e){T(n===e.parent?r:e.parent)});b.append("rect").classed("background",!0).style("fill",function(e){return c(e.parent.name)}),b.append("foreignObject").attr({class:"foreignObject",width:function(e){return Math.max(.01,e.dx)},height:function(e){return Math.max(.01,e.dy)}}).append("xhtml:body").attr("class","labelbody").append("div").attr("class","label").text(function(e){return e.name}).on("click",function(e){e.url&&(F.open(e.url,"_blank"),q.event.stopPropagation())});var v=_.transition().duration(500);function k(e){return e.size}function S(e){return 1}function E(e){var t,r,i,a,n=(r=(t=e).substring(1,3),i=t.substring(3,5),a=t.substring(5,7),{R:parseInt(r,16),G:parseInt(i,16),B:parseInt(a,16)});return 255-(.299*n.R+.587*n.G+.114*n.B)<105?"#000000":"#ffffff"}function T(e){d.padding([p/(o/e.dy),0,0,0]).nodes(e);var t=s/e.dx,r=o/e.dy,i=e;u.domain([e.x,e.x+e.dx]),l.domain([e.y,e.y+e.dy]),g.selectAll(".labelbody .label").style("display","block");var a=g.selectAll("g.cell").transition().duration(500).attr("transform",function(e){return"translate("+u(e.x)+","+l(e.y)+")"}).each("end",function(e,t){t||i===self.root||(g.selectAll(".cell.child").filter(function(e){return e.parent===self.node}).select(".foreignObject .labelbody .label").style("color",function(e){return E(c(e.parent.name))}),g.selectAll(".cell.child").filter(function(e){return e.parent===self.node}).select(".foreignObject .labelbody .label").style("display",""))});a.select(".foreignObject").attr("width",function(e){return Math.max(.01,t*e.dx)}).attr("height",function(e){return e.children?p:Math.max(.01,r*e.dy)}).select(".labelbody .label").text(function(e){return e.name}),a.select("rect").attr("width",function(e){return Math.max(.01,t*e.dx)}).attr("height",function(e){return e.children?p:Math.max(.01,r*e.dy)}).style("fill",function(e){return e.children?h:c(e.parent.name)}),n=e,q.event&&q.event.stopPropagation()}v.select(".cell").attr("transform",function(e){return"translate("+e.x+","+e.y+")"}),v.select("rect").attr("width",function(e){return Math.max(.01,e.dx)}).attr("height",function(e){return e.dy}).style("fill",function(e){return c(e.parent.name)}),v.select(".foreignObject").attr("width",function(e){return Math.max(.01,e.dx)}).attr("height",function(e){return Math.max(.01,e.dy)}).select(".labelbody .label").text(function(e){return e.name}),_.exit().remove(),q.select("select").on("change",function(){console.log("select zoom(node)"),d.value("size"==value?k:S).nodes(r),T(n)}),T(n)},e.prototype.isDrawable=function(){return 1<Object.keys(this._labelColumns).length},e.prototype.visit=function(e,t){return this._checkColumn(e,t)},e.prototype._checkColumn=function(e,t){return!this._getFormatter().isLabel(e,t)||(this._labelColumns[t]=!0,!this.isDrawable())},e}(jQuery,d3,window),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.ui=wikibase.queryService.ui||{},wikibase.queryService.ui.resultBrowser=wikibase.queryService.ui.resultBrowser||{},wikibase.queryService.ui.resultBrowser.TreeResultBrowser=function(s,i,a){"use strict";var e='SELECT ?property ?propertyLabel ?value ?valueItemLabel ?valueImage WHERE {       {         SELECT ?property ?value ?valueImage ?valueItem WHERE {           BIND(<{ENTITY_URI}> AS ?item)           ?item ?prop ?value.           ?property wikibase:directClaim ?prop.           ?property rdf:type wikibase:Property.           OPTIONAL { ?value wdt:P18 ?valueImage. }           OPTIONAL { BIND(?value AS ?valueItem).  FILTER(STRSTARTS(STR(?value), STR(wd:))) }         }       }       SERVICE wikibase:label { bd:serviceParam wikibase:language "[AUTO_LANGUAGE],en". }    }  ';function t(){this._labelColumns={}}return(t.prototype=new wikibase.queryService.ui.resultBrowser.AbstractChartResultBrowser)._isDrawable=!1,t.prototype._jsTree=null,t.prototype._nodes=null,t.prototype.draw=function(e){var t=this;this._nodes=this._extractNodes(s.proxy(this._iterateResult,this));var r=s("<div>").jstree({core:{data:i.compact(t._nodes),check_callback:!0},plugins:["types","wholerow","contextmenu","unique"],types:{default:{icon:"glyphicon glyphicon-barcode"}},contextmenu:{items:function(e){return{Open:{label:t._nodes[e.id].url,icon:"glyphicon glyphicon-link",action:function(){a.open(t._nodes[e.id].url,"_blank")}},explore:{label:t._nodes[e.id].url,icon:"glyphicon glyphicon-download-alt",action:function(){t._expandTree(t._nodes[e.id])}}}}}});this._jsTree=r.jstree(),e.empty().append(r)},t.prototype._extractNodes=function(e,i){var a=null,n={},s=null,o={},u=this._getFormatter();return e(function(e,t,r){r!==a&&(s=null,a=r),e&&e.value&&(s&&(u.isLabel(e)||u.isNumber(e))&&(o[s].text=(o[s].text||"")+" "+e.value),s&&u.isCommonsResource(e.value)&&(o[s].icon=u.getCommonsResourceThumbnailUrl(e.value,24)),u.isEntity(e)&&((n={}).parent=s||i||"#",n.id=n.parent+e.value,n.url=e.value,n.state={opened:!1},o[n.id]=n,s=n.id))}),o},t.prototype._expandTree=function(r){var i=this;this.getSparqlApi().query(e.replace("{ENTITY_URI}",r.url)).done(function(){var e=i.getSparqlApi().getResultRawData(),t=i._extractNodes(function(n){s.each(e.results.bindings,function(i,a){s.each(e.head.vars,function(e,t){var r=a[t]||null;n(r,t,a,i)})})},r.id);s.extend(i._nodes,t),s.each(t,function(e,t){i._jsTree.create_node(t.parent,t)})})},t.prototype.isDrawable=function(){return this._isDrawable},t.prototype.visit=function(e){return!this._getFormatter().isEntity(e)||!(this._isDrawable=!0)},t}(jQuery,_,window),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.ui=wikibase.queryService.ui||{},wikibase.queryService.ui.resultBrowser=wikibase.queryService.ui.resultBrowser||{},wikibase.queryService.ui.resultBrowser.BubbleChartResultBrowser=function(c,l,p){"use strict";function e(){}return(e.prototype=new wikibase.queryService.ui.resultBrowser.AbstractChartResultBrowser)._hasLabel=!1,e.prototype._hasNumber=!1,e.prototype.draw=function(e){var n=this,s={name:"bubblechart",children:[]},o=this._getLabelColumns()[0],u=this._getNumberColumns()[0],l=null;this._iterateResult(function(e,t,r){if(r!==l){var i={url:null};(l=r).rgb&&n._getFormatter().isColor(r.rgb)&&(i.color=n._getFormatter().getColorForHtml(r.rgb)),r[o]&&r[u]&&(i.name=r[o].value,i.size=r[u].value,s.children.push(i))}if(e&&e.value&&n._getFormatter().isEntityUri(e.value)){var a=s.children[s.children.length-1];a&&null===a.url&&(a.url=e.value)}});var t=c("<center>");e.html(t),this._drawBubbleChart(t,s)},e.prototype._drawBubbleChart=function(e,t){var r=this;var i,a,n=Math.min(.98*c(p).height(),c(p).width()),s=l.scale.category20c(),o=l.layout.pack().sort(null).size([n,n]).padding(1.5),u=l.select(e[0]).append("svg").attr({class:"bubble",width:n,height:n}).selectAll(".node").data(o.nodes((i=t,a=[],function t(e,r){r.children?r.children.forEach(function(e){t(r.name,e)}):a.push({packageName:e,className:r.name,value:r.size,url:r.url,color:r.color})}(null,i),{children:a})).filter(function(e){return!e.children})).enter().append("g").attr("class","node").attr("transform",function(e){return"translate("+e.x+","+e.y+")"});u.append("title").text(function(e){return e.className+": "+e.value}),u.append("circle").attr("r",function(e){return e.r}).style("fill",function(e){return e.color||s(e.className)}),u.append("text").attr("dy",".3em").style("text-anchor","middle").text(function(e){return e.className.substring(0,e.r/4)}).on("click",function(e){e.url&&p.open(e.url,"_blank")}).style("fill",function(e){if(e.color)return r._getFormatter().calculateLuminance(e.color)<=.5?"#FFF":"#000"}).style("cursor","pointer")},e.prototype.isDrawable=function(){return this._hasLabel&&this._hasNumber},e.prototype.visit=function(e){return this._checkColumn(e)},e.prototype._checkColumn=function(e){return this._getFormatter().isNumber(e)&&(this._hasNumber=!0),this._getFormatter().isLabel(e)&&(this._hasLabel=!0),!this.isDrawable()},e}(jQuery,d3,window),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.ui=wikibase.queryService.ui||{},wikibase.queryService.ui.resultBrowser=wikibase.queryService.ui.resultBrowser||{},window.mediaWiki=window.mediaWiki||{},wikibase.queryService.ui.resultBrowser.LineChartResultBrowser=function(e){"use strict";var t=wikibase.queryService.ui.resultBrowser.AbstractDimpleChartResultBrowser;function r(){this._dataColumns={}}return(r.prototype=new t)._getPlotType=function(){return e.plot.line},r}(dimple),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.ui=wikibase.queryService.ui||{},wikibase.queryService.ui.resultBrowser=wikibase.queryService.ui.resultBrowser||{},window.mediaWiki=window.mediaWiki||{},wikibase.queryService.ui.resultBrowser.BarChartResultBrowser=function(e){"use strict";var t=wikibase.queryService.ui.resultBrowser.AbstractDimpleChartResultBrowser;function r(){this._dataColumns={}}return(r.prototype=new t)._getPlotType=function(){return e.plot.bar},r}(dimple),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.ui=wikibase.queryService.ui||{},wikibase.queryService.ui.resultBrowser=wikibase.queryService.ui.resultBrowser||{},window.mediaWiki=window.mediaWiki||{},wikibase.queryService.ui.resultBrowser.ScatterChartResultBrowser=function(e){"use strict";var t=wikibase.queryService.ui.resultBrowser.AbstractDimpleChartResultBrowser;function r(){this._dataColumns={}}return(r.prototype=new t)._getPlotType=function(){return e.plot.scatter},r}(dimple),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.ui=wikibase.queryService.ui||{},wikibase.queryService.ui.resultBrowser=wikibase.queryService.ui.resultBrowser||{},window.mediaWiki=window.mediaWiki||{},wikibase.queryService.ui.resultBrowser.AreaChartResultBrowser=function(e){"use strict";var t=wikibase.queryService.ui.resultBrowser.AbstractDimpleChartResultBrowser;function r(){this._dataColumns={}}return(r.prototype=new t)._getPlotType=function(){return e.plot.area},r}(dimple),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.ui=wikibase.queryService.ui||{},wikibase.queryService.ui.resultBrowser=wikibase.queryService.ui.resultBrowser||{},wikibase.queryService.ui.resultBrowser.TimelineResultBrowser=function(a,i,e,t){"use strict";var n={minHeight:"400px",orientation:{axis:"both",item:"top"},align:"auto",zoomKey:"ctrlKey"};function r(){}return(r.prototype=new wikibase.queryService.ui.resultBrowser.AbstractResultBrowser).draw=function(e){var t=a("<div>"),r=new i.Timeline(t[0],this._getItems(),n);r.on("changed",function(){a(r.dom.root).find(".vis-item.vis-range").each(function(){var e=a(this);e.css("min-width","unset"),e.css("min-width",e.css("width"))})}),e.append(t.prepend(this._createToolbar(r)))},r.prototype._getItems=function(){var n=this,s=[];return this._iterateResult(function(e,t,r,i){if(n._getFormatter().isDateTime(e))if(s[i]){var a=[];a.push(n._getFormatter().parseDate(e.value)),s[i].start&&a.push(s[i].start),s[i].end&&a.push(s[i].end),s[i].start=a.reduce(function(e,t){return e<t?e:t}),s[i].end=a.reduce(function(e,t){return t<e?e:t})}else s[i]={id:i,content:n._getHtml(r).html(),start:n._getFormatter().parseDate(e.value)}}),new i.DataSet(t.compact(s))},r.prototype._getHtml=function(e){return a("<div/>").append(this._getFormatter().formatRow(e,!0))},r.prototype._createToolbar=function(i){var e=a('<div style="margin-top: -35px; text-align: center;">');function t(e){var t=i.getWindow(),r=t.end-t.start;i.setWindow({start:t.start.valueOf()-r*e,end:t.end.valueOf()+r*e})}return a('<a class="btn btn-default">').click(a.proxy(i.redraw,i)).append('<span class="glyphicon glyphicon-resize-vertical" aria-hidden="true"></span>').appendTo(e),a('<a class="btn btn-default">').click(a.proxy(i.fit,i)).append('<span class="glyphicon glyphicon-resize-horizontal" aria-hidden="true"></span>').appendTo(e),a('<a class="btn btn-default">').click(function(){t(.2)}).append('<span class="glyphicon glyphicon-zoom-out" aria-hidden="true"></span>').appendTo(e),a('<a class="btn btn-default">').click(function(){t(-.2)}).append('<span class="glyphicon glyphicon-zoom-in" aria-hidden="true"></span>').appendTo(e),e},r.prototype.visit=function(e){return!this._getFormatter().isDateTime(e)||!(this._drawable=!0)},r}(jQuery,vis,window,_),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.ui=wikibase.queryService.ui||{},wikibase.queryService.ui.resultBrowser=wikibase.queryService.ui.resultBrowser||{},wikibase.queryService.ui.resultBrowser.MultiDimensionResultBrowser=function(m,b,v){"use strict";var u="http://www.w3.org/2001/XMLSchema#dateTime";function e(){}return(e.prototype=new wikibase.queryService.ui.resultBrowser.AbstractChartResultBrowser).draw=function(e){var n={},s=[],o=this._getFormatter();this._iterateResult(function(e,t,r,i){if(s[i]||(s[i]={}),s[i][t]=e&&e.value||"undefined",e&&e.type===u&&(s[i][t]=new Date(e.value).toLocaleDateString()),!n[t]){var a={key:t,description:t,type:"STRING"};o.isNumber(e)&&(a.type="NUMBER"),e&&e.type===u&&(a.type="DATE"),n[t]=a}}),this._draw(e,s,_.values(n)),e.children("svg").css({display:"block"})},e.prototype._draw=function(e,r,a){var t=50,i=80,n=10,s=100,o=m(v).width()-(s+i),u=m(v).height()-(t+n),l={NUMBER:{key:"Number",coerce:function(e){return+e},extent:b.extent,within:function(e,t){return t[0]<=e&&e<=t[1]},defaultScale:b.scale.linear().range([u,0])},STRING:{key:"String",coerce:String,extent:function(e){return e.sort()},within:function(e,t,r){return t[0]<=r.scale(e)&&r.scale(e)<=t[1]},defaultScale:b.scale.ordinal().rangePoints([0,u])},DATE:{key:"Date",coerce:function(e){return new Date(e)},extent:b.extent,within:function(e,t){return t[0]<=e&&e<=t[1]},defaultScale:b.time.scale().range([0,u])}};m.each(a,function(){this.type=l[this.type]});var c=b.scale.ordinal().domain(a.map(function(e){return e.key})).rangePoints([0,o]),p=b.svg.line().defined(function(e){return!isNaN(e[1])}),h=b.svg.axis().orient("left"),d=b.select(e[0]).append("svg").attr({width:o+s+i,height:u+t+n}).append("g").attr("transform","translate("+s+","+t+")"),g=d.append("g").attr("class","foreground"),y=d.selectAll(".axis").data(a).enter().append("g").attr("class","axis").attr("transform",function(e){return"translate("+c(e.key)+")"});function f(){b.event.sourceEvent.stopPropagation()}function w(){var e=a.filter(function(e){return!e.brush.empty()}),i=e.map(function(e){return e.brush.extent()});b.selectAll(".foreground path").style("display",function(r){return e.every(function(e,t){return e.type.within(r[e.key],i[t],e)})?null:"none"})}r.forEach(function(t){a.forEach(function(e){t[e.key]=e.type.coerce(t[e.key])})}),a.forEach(function(t){"domain"in t||(t.domain=b.functor(t.type.extent)(r.map(function(e){return e[t.key]})),t.domain.sort(function(e,t){return e-t})),"scale"in t||(t.scale=t.type.defaultScale.copy()),t.scale.domain(t.domain)}),g.selectAll("path").data(r).enter().append("path").attr("d",function(t){return p(a.map(function(e){return[c(e.key),e.scale(t[e.key])]}))}).style("stroke",function(e){return"#6ac"}),y.append("g").attr("class","axis").each(function(e){var t=e.axis&&e.axis.scale(e.scale)||h.scale(e.scale);b.select(this).call(t)}).append("text").attr("class","title").attr("text-anchor","start").text(function(e){return e.description||e.key}),y.append("g").attr("class","brush").each(function(e){b.select(this).call(e.brush=b.svg.brush().y(e.scale).on("brushstart",f).on("brush",w))}).selectAll("rect").attr("x",-8).attr("width",16)},e.prototype.isDrawable=function(){return this._drawable},e.prototype.visit=function(e){return!(this._drawable=!0)},e}(jQuery,d3,window),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.ui=wikibase.queryService.ui||{},wikibase.queryService.ui.resultBrowser=wikibase.queryService.ui.resultBrowser||{},wikibase.queryService.ui.resultBrowser.GraphResultBrowser=function(n,s,o,e){"use strict";var u={autoResize:!0,physics:{stabilization:{enabled:!0,iterations:10,fit:!0},barnesHut:{springLength:150,centralGravity:.5,damping:.2,avoidOverlap:.1}},nodes:{shadow:!0,color:"#fff"},edges:{arrows:{to:!0}}};function t(){}return(t.prototype=new wikibase.queryService.ui.resultBrowser.AbstractResultBrowser).draw=function(e){var t=n("<div>").height("100vh");0!==n("#expand-type-switch").length&&(t=n("<div>").height("100vh"),n(".expand-type").show(),n("#expand-type-switch").bootstrapToggle({on:"Incoming",off:"Outgoing"}));var r=this._getData(),i=new s.Network(t[0],r,u);i.on("doubleClick",function(e){1===e.nodes.length&&o.open(e.nodes[0],"_blank")});var a=new wikibase.queryService.ui.resultBrowser.GraphResultBrowserNodeBrowser(r.nodes,r.edges,this.getSparqlApi());i.on("click",function(e){var t=e.nodes[0]||null;n("#expand-type-switch").is(":checked")?a.browse(t,"incoming"):a.browse(t,"outgoing")}),t.prepend(this._createToolbar(i)),e.append(t)},t.prototype._createToolbar=function(t){var e=n('<div id="layout-options">');function r(e){"none"===e?t.setOptions({layout:{hierarchical:{enabled:!1}}}):t.setOptions({layout:{hierarchical:{direction:e,sortMethod:"directed"}}})}return n('<a class="btn btn-default layout-button">').click(function(){t.stabilize(100)}).append('<span class="glyphicon glyphicon-fullscreen" aria-hidden="true" title="'+wikibase.queryService.ui.i18n.getMessage("wdqs-app-resultbrowser-stabilize")+'"></span>').appendTo(e),n('<a class="btn btn-default layout-button">').click(function(){r("LR")}).append('<span class="glyphicon glyphicon-indent-left" aria-hidden="true" title="'+wikibase.queryService.ui.i18n.getMessage("wdqs-app-resultbrowser-hierarchical-lr")+'"></span>').appendTo(e),n('<a class="btn btn-default layout-button">').click(function(){r("UD")}).append('<span class="glyphicon glyphicon-align-center" aria-hidden="true" title="'+wikibase.queryService.ui.i18n.getMessage("wdqs-app-resultbrowser-hierarchical-ud")+'"></span>').appendTo(e),n('<a class="btn btn-default layout-button">').click(function(){r("RL")}).append('<span class="glyphicon glyphicon-indent-right" aria-hidden="true" title="'+wikibase.queryService.ui.i18n.getMessage("wdqs-app-resultbrowser-hierarchical-rl")+'"></span>').appendTo(e),n('<a class="btn btn-default layout-button">').click(function(){r("none")}).append('<span class="glyphicon glyphicon-align-justify" aria-hidden="true" title="'+wikibase.queryService.ui.i18n.getMessage("wdqs-app-resultbrowser-non-hierarchical")+'"></span>').appendTo(e),e},t.prototype._getData=function(){var o={},u={},l=[],c=this._getFormatter(),p={},h={};return this._iterateResult(function(e,t,r,i){if(e&&e.value){if(c.isEntity(e)){var a=r[t+"Label"]&&r[t+"Label"].value||e.value,n=e.value;p={id:n,label:a,title:a},l[i]?(h={from:l[i],to:n},u[h.from+h.to]=h,o[n]||(o[n]=p)):(o[n]=p,l[i]=p.id)}if(c.isCommonsResource(e.value)&&(p.image=c.getCommonsResourceThumbnailUrl(e.value,150),p.shape="image",p.font={color:"black"}),c.isNumber(e)&&(p.value=e.value,p.title+=" value:"+e.value,p.shape="dot",p.font={color:"black"}),"rgb"===t&&c.isColor(e)&&(p.color=c.getColorForHtml(e),"dot"!==p.shape&&"image"!==p.shape)){var s=c.calculateLuminance(e.value)<=.5?"#FFF":"#000";p.font={color:s}}"edgeLabel"===t&&(h.label=e.value)}}),{nodes:new s.DataSet(e.compact(o)),edges:new s.DataSet(e.compact(u))}},t.prototype.visit=function(e){return!this._getFormatter().isEntity(e)||!(this._drawable=!0)},t}(jQuery,vis,window,_),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.ui=wikibase.queryService.ui||{},wikibase.queryService.ui.resultBrowser=wikibase.queryService.ui.resultBrowser||{},wikibase.queryService.ui.resultBrowser.GraphResultBrowserNodeBrowser=function(s,e,o,t){"use strict";var r='SELECT ?p (SAMPLE(?pl) AS ?pl_) (COUNT(?o) AS ?count ) (group_concat(?ol;separator=", ") AS ?ol_)  WHERE {<{entityUri}> ?p ?o .   ?o <http://www.w3.org/2000/01/rdf-schema#label> ?ol .    FILTER ( LANG(?ol) = "[AUTO_LANGUAGE]" )    ?s <http://wikiba.se/ontology#directClaim> ?p .    ?s rdfs:label ?pl .    FILTER ( LANG(?pl) = "[AUTO_LANGUAGE]" )} group by ?p',a='SELECT ?o ?ol WHERE {<{entityUri}> <{propertyUri}> ?o .?o <http://www.w3.org/2000/01/rdf-schema#label> ?ol .FILTER ( LANG(?ol) = "[AUTO_LANGUAGE]" )} LIMIT 50',i='SELECT ?p (SAMPLE(?pl) AS ?pl_) (COUNT(?o) AS ?count ) (group_concat(?ol;separator=", ") AS ?ol_)  WHERE {?o ?p <{entityUri}> .   ?o <http://www.w3.org/2000/01/rdf-schema#label> ?ol .    FILTER ( LANG(?ol) = "[AUTO_LANGUAGE]" )    ?s <http://wikiba.se/ontology#directClaim> ?p .    ?s rdfs:label ?pl .    FILTER ( LANG(?pl) = "[AUTO_LANGUAGE]" )} group by ?p',n='SELECT ?o ?ol WHERE {?o <{propertyUri}> <{entityUri}> .?o <http://www.w3.org/2000/01/rdf-schema#label> ?ol .FILTER ( LANG(?ol) = "[AUTO_LANGUAGE]" )} LIMIT 50',u="incoming",l="outgoing";function c(e,t,r){this._nodes=e,this._incomingNodes=e,this._edges=t,this._incomingEdges=t,this._sparql=r}return c.prototype._incomingNodes=null,c.prototype._nodes=null,c.prototype._sparql=null,c.prototype._selectedNodeId=null,c.prototype._temporaryNodes={},c.prototype._incomingTemporaryNodes={},c.prototype._temporaryEdges={},c.prototype._incomingTemporaryEdges={},c.prototype._getEntites=function(e,t){var i=this;return this._sparql.query(a.replace("{entityUri}",e).replace("{propertyUri}",t)).then(function(){var e=i._sparql.getResultRawData(),r=[];return s.each(e.results.bindings,function(e,t){r.push({id:t.o.value,label:t.ol.value})}),r})},c.prototype._getIncomingEntites=function(e,t){var i=this;return this._sparql.query(n.replace("{entityUri}",e).replace("{propertyUri}",t)).then(function(){var e=i._sparql.getResultRawData(),r=[];return s.each(e.results.bindings,function(e,t){r.push({id:t.o.value,label:t.ol.value})}),r})},c.prototype._getProperties=function(e){var t=this;return this._sparql.query(r.replace("{entityUri}",e)).then(function(){var e=t._sparql.getResultRawData(),r=[];return s.each(e.results.bindings,function(e,t){r.push({id:t.p.value,label:t.pl_.value,count:t.count.value,items:t.ol_.value})}),r})},c.prototype._getIncomingProperties=function(e){var t=this;return this._sparql.query(i.replace("{entityUri}",e)).then(function(){var e=t._sparql.getResultRawData(),r=[];return s.each(e.results.bindings,function(e,t){r.push({id:t.p.value,label:t.pl_.value,count:t.count.value,items:t.ol_.value})}),r})},c.prototype._removeTemporaryNodes=function(e){var r=this;s.each(this._temporaryNodes,function(e,t){r._nodes.remove(t.id)}),s.each(this._temporaryEdges,function(e,t){r._edges.remove(t.id)}),this._temporaryNodes={},this._temporaryEdges={}},c.prototype._removeIncomingTemporaryNodes=function(e){var r=this;s.each(this._incomingTemporaryNodes,function(e,t){r._incomingNodes.remove(t.id)}),s.each(this._incomingTemporaryEdges,function(e,t){r._incomingEdges.remove(t.id)}),this._incomingTemporaryNodes={},this._incomingTemporaryEdges={}},c.prototype._expandPropertyNode=function(e){var r=this,i=this._temporaryNodes[e],t=r._nodes.get(e);this._getEntites(i.entityId,i.id).then(function(e){s.each(e,function(e,t){null===r._nodes.get(t.id)&&r._nodes.add({id:t.id,label:t.label,type:l}),r._edges.add({dashes:!0,from:i.entityId,to:t.id,label:i.propertyLabel,linkType:i.id,type:l})}),50<t.label&&r._getRemainingOutgoingNodes(i,t)},o.console.error)},c.prototype._getRemainingOutgoingNodes=function(e,t){var r=t.label-50;this._incomingNodes.add({id:"remaining",label:"+"+r+" results ",color:"#e3eed9",type:l}),this._incomingEdges.add({dashes:!0,from:"remaining",to:e.entityId,linkType:e.id,type:l})},c.prototype._expandIncomingPropertyNode=function(e){var r=this,i=this._incomingTemporaryNodes[e],t=r._incomingNodes.get(e);this._getIncomingEntites(i.entityId,i.id).then(function(e){s.each(e,function(e,t){null===r._incomingNodes.get(t.id)&&r._incomingNodes.add({id:t.id,label:t.label,type:u}),r._incomingEdges.add({dashes:!0,from:t.id,to:i.entityId,label:i.propertyLabel,linkType:i.id,type:u})}),50<t.label&&r._getRemainingIncomingNodes(i,t)},o.console.error)},c.prototype._getRemainingIncomingNodes=function(e,t){var r=t.label-50;this._incomingNodes.add({id:"remaining",label:"+"+r+" results ",color:"#e3eed9",type:u}),this._incomingEdges.add({dashes:!0,from:"remaining",to:e.entityId,linkType:e.id,type:u})},c.prototype._expandEntityNode=function(a){var n=this;this._getProperties(a).then(function(e){s.each(e,function(e,t){if(!(0<n._edges.get({filter:function(e){return e.linkType===t.id&&e.from===a&&e.type===l}}).length)){var r={id:t.id,label:"1"===t.count?t.items:t.count,title:t.items,entityId:a,propertyLabel:t.label,color:"#abc9f2",type:l},i={id:t.id,dashes:!0,label:t.label,from:a,to:t.id,type:l};n._temporaryNodes[r.id]=r,n._nodes.add(r),n._temporaryEdges[i.id]=i,n._edges.add(i)}})},o.console.error)},c.prototype._expandIncomingEntityNode=function(a){var n=this;this._getIncomingProperties(a).then(function(e){s.each(e,function(e,t){if(!(0<n._incomingEdges.get({filter:function(e){return e.linkType===t.id&&e.to===a&&e.type===u}}).length)){var r={id:t.id,label:"1"===t.count?t.items:t.count,title:t.items,entityId:a,propertyLabel:t.label,color:"#abc9f2",type:u},i={id:t.id,dashes:!0,label:t.label,from:t.id,to:a,type:u};n._incomingTemporaryNodes[r.id]=r,n._incomingNodes.add(r),n._incomingTemporaryEdges[i.id]=i,n._incomingEdges.add(i)}})},o.console.error)},c.prototype.browse=function(e,t){t===l?this.handleOutgoingNodes(e):this.handleIncomingNodes(e)},c.prototype.handleOutgoingNodes=function(e){if(this._removeIncomingTemporaryNodes(),null!==e){if(this._temporaryNodes[e])return this._expandPropertyNode(e),void this._removeTemporaryNodes();null!==this._selectedNodeId&&e!==this._selectedNodeId&&this._removeTemporaryNodes(),this._expandEntityNode(e),this._selectedNodeId=e}else this._removeTemporaryNodes()},c.prototype.handleIncomingNodes=function(e){if(this._removeTemporaryNodes(),null!==e){if(this._incomingTemporaryNodes[e])return this._expandIncomingPropertyNode(e),void this._removeIncomingTemporaryNodes();null!==this._selectedNodeId&&e!==this._selectedNodeId&&this._removeIncomingTemporaryNodes(),this._expandIncomingEntityNode(e),this._selectedNodeId=e}else this._removeIncomingTemporaryNodes()},c}(jQuery,vis,window,_),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.ui=wikibase.queryService.ui||{},wikibase.queryService.ui.resultBrowser=wikibase.queryService.ui.resultBrowser||{},wikibase.queryService.ui.resultBrowser.PolestarResultBrowser=function(i,a,e){"use strict";function t(){}return(t.prototype=new wikibase.queryService.ui.resultBrowser.AbstractResultBrowser).draw=function(e){var t={url:"wikidatasparql://query.wikidata.org/?query="+location.hash.substr(1),name:"Imported from Wikidata Query Service",_directEmbed:!0},r=i("<iframe>").attr({src:"polestar/embed.html#"+encodeURIComponent(JSON.stringify(t)),class:"graph-iframe"}).height("98vh");e.append(r),a.setTimeout(function(){r.scrollIntoView()},50)},t.prototype.visit=function(e){return!(this._drawable=!0)},t}(jQuery,window,_),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.api=wikibase.queryService.api||{},wikibase.queryService.api.Sparql=function(l){"use strict";var s={TIMEOUT:10,MALFORMED:20,SERVER:30,UNKNOWN:100},o={"QueryTimeoutException: Query deadline is expired":s.TIMEOUT,"java.util.concurrent.TimeoutException":s.TIMEOUT,"MalformedQueryException: ":s.MALFORMED};function e(e,t){this._serviceUri=e||"https://query.wikidata.org/bigdata/namespace/wdq/sparql",this._language=t||"en"}return e.prototype.ERROR_CODES=s,e.prototype._serviceUri=null,e.prototype._executionTime=null,e.prototype._error=null,e.prototype._resultLength=null,e.prototype._rawData=null,e.prototype._queryUri=null,e.prototype._language=null,e.prototype.queryDataUpdatedTime=function(){var s=l.Deferred(),e=encodeURI("prefix schema: <http://schema.org/> SELECT * WHERE {<http://www.wikidata.org> schema:dateModified ?y}"),t=this._serviceUri+"?query="+e+"&nocache="+Math.floor(Date.now()/6e4);return l.ajax(t,{headers:{Accept:"application/sparql-results+json"}}).done(function(e,t,r){if(e.results.bindings[0]){var i=new Date(e.results.bindings[0][e.head.vars[0]].value),a=i.toLocaleTimeString(navigator.language,{timeZoneName:"short"})+", "+i.toLocaleDateString(navigator.language,{month:"short",day:"numeric",year:"numeric"}),n=Math.round((new Date-i)/1e3);s.resolve(a,n)}else s.reject()}).fail(function(){s.reject()}),s},e.prototype.query=function(e,t){var r=this;return e=this._replaceAutoLanguage(e),this._replaceAutoCoordinates(e).then(function(e){return r._query(e,t)})},e.prototype._query=function(e,t){var r="query="+encodeURIComponent(e);t&&(r+="&maxQueryTimeMillis="+t);var i=this,a=l.Deferred(),n={headers:{Accept:"application/sparql-results+json"},data:r};function s(e,t,r){i._executionTime=Date.now()-i._executionTime,"boolean"==typeof e.boolean?i._resultLength=1:i._resultLength=e.results.bindings.length||0,i._rawData=e,a.resolve(e)}function o(e,t,r){i._executionTime=null,i._rawData=null,i._resultLength=null,i._generateErrorMessage(e,t,r),a.reject()}return this._queryUri=this._serviceUri+"?"+n.data,this._executionTime=Date.now(),l.ajax(this._serviceUri,n).done(s).fail(function(e,t,r){""===e.getAllResponseHeaders()||414===e.status||431===e.status?(n.method="POST",l.ajax(i._serviceUri,n).done(s).fail(o)):o.apply(this,arguments)}),a},e.prototype._generateErrorMessage=function(e,t,r){var i={code:s.UNKNOWN,message:null,debug:e.responseText};(0===e.status||r)&&(i.code=s.SERVER,i.message=r.message);try{var a=i.debug.substring(i.debug.indexOf("java.util.concurrent.ExecutionException:"));for(var n in o)-1!==a.indexOf(n)&&(i.code=o[n],i.message=null);i.code!==s.UNKNOWN&&i.code!==s.MALFORMED||(i.message=i.debug.match(/(java\.util\.concurrent\.ExecutionException\:)+(.*)(Exception\:)+(.*)/).pop().trim())}catch(e){}this._error=i},e.prototype.getExecutionTime=function(){return this._executionTime},e.prototype.getError=function(){return this._error},e.prototype.getResultLength=function(){return this._resultLength},e.prototype.getQueryUri=function(){return this._queryUri},e.prototype._processData=function(e,t,r){for(var i=e.results.bindings.length,a=0;a<i;a++){for(var n={},s=0;s<e.head.vars.length;s++)e.head.vars[s]in e.results.bindings[a]?n[e.head.vars[s]]=e.results.bindings[a][e.head.vars[s]]:n[e.head.vars[s]]=void 0;r=t(n,r)}return r},e.prototype._encodeCsv=function(e){var t=e.replace(/"/g,'""');return/[",\n]/.test(t)&&(t='"'+t+'"'),t},e.prototype.getResultRawData=function(){return this._rawData},e.prototype.getResultAsCsv=function(){var n=this,e=n._rawData,t=e.head.vars.map(this._encodeCsv).join(",")+"\n";return t=this._processData(e,function(e,t){var r="",i=!0;for(var a in e)i?i=!1:r+=",",r+=void 0===e[a]?"":n._encodeCsv(e[a].value);return t+(r+="\n")},t)},e.prototype.getResultHTML=function(){var e=this._rawData,t=l("<html>"),r=l("<head>").append(l("<meta>").attr("charset","utf-8"));t.append(r);var i=[],a=l("<table>"),n=l("<thead>"),s=l("<tr>");e.head.vars.forEach(function(e){s.append("<th>"+e+"</th>"),i.push(e)}),n.append(s),a.append(n);var o=l("<tbody>");e.results.bindings.forEach(function(e){for(var t in s=l("<tr>"),i)if(e[i[t]]){var r=e[i[t]].value.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;");s.append("<td>"+r+"</td>")}else s.append("<td></td>");o.append(s)}),a.append(o);var u=l("<body>").append(a);return t.append(u),t.prop("outerHTML")},e.prototype.getResultAsJson=function(){var e=[],t=this._rawData;return e=this._processData(t,function(e,t){var r={};for(var i in e)r[i]=(e[i]||{}).value;return t.push(r),t},e),JSON.stringify(e)},e.prototype.getResultAsAllJson=function(){return JSON.stringify(this._rawData)},e.prototype._renderValueTSV=function(e){var t=e.value.replace(/\t/g,"");switch(e.type){case"uri":return"<"+t+">";case"bnode":return"_:"+t;case"literal":var r=JSON.stringify(t);return e["xml:lang"]?r+"@"+e["xml:lang"]:e.datatype?"http://www.w3.org/2001/XMLSchema#integer"===e.datatype||"http://www.w3.org/2001/XMLSchema#decimal"===e.datatype||"http://www.w3.org/2001/XMLSchema#double"===e.datatype?t:r+"^^<"+e.datatype+">":r}return t},e.prototype.getSparqlTsv=function(){var n=this,e=this._rawData,t=e.head.vars.map(function(e){return"?"+e}).join("\t")+"\n";return t=this._processData(e,function(e,t){var r="",i=!0;for(var a in e)i?i=!1:r+="\t",r+=void 0===e[a]?"":n._renderValueTSV(e[a]);return t+(r+="\n")},t)},e.prototype.getSimpleTsv=function(){var e=this._rawData,t=e.head.vars.join("\t")+"\n";return t=this._processData(e,function(e,t){var r="",i=!0;for(var a in e)i?i=!1:r+="\t",r+=void 0===e[a]?"":e[a].value.replace(/\t/g,"");return t+(r+="\n")},t)},e.prototype._replaceAutoLanguage=function(e){return e.replace(/\[AUTO_LANGUAGE\]/g,this._language)},e.prototype._replaceAutoCoordinates=function(r){var i=l.Deferred();return navigator&&navigator.geolocation&&r.match(/\"\[AUTO_COORDINATES\]\"/g)?(navigator.geolocation.getCurrentPosition(function(e){var t='"Point('+e.coords.longitude+" "+e.coords.latitude+')"^^geo:wktLiteral';r=r.replace(/\"\[AUTO_COORDINATES\]\"/g,t),i.resolve(r)},function(){r=r.replace(/\"\[AUTO_COORDINATES\]\"/g,'"Point(13.381138 52.498243)"^^geo:wktLiteral'),i.resolve(r)},{timeout:1e4,maximumAge:1e4}),i.promise()):i.resolve(r).promise()},e.prototype.setLanguage=function(e){this._language=e},e}(jQuery),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.api=wikibase.queryService.api||{},wikibase.queryService.api.CodeSamples=function(o){"use strict";function e(t,r,i){var e,a=this;t.startsWith("/")&&(e=window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.host,t=e+t);this._endpoint=t,this._languages={URL:{code:function(e){return t+"?query="+encodeURIComponent(e)}},HTML:{code:function(e){return'<iframe style="width: 80vw; height: 50vh; border: none;" src="'+r+"embed.html#"+encodeURIComponent(e)+'" referrerpolicy="origin" sandbox="allow-scripts allow-same-origin allow-popups"></iframe>'},mimetype:"text/html"},Wikilink:{code:function(e){return"["+i+"#"+encodeURIComponent(e)+" Query]"}},PHP:{escape:function(e){var t=["SPARQL","QUERY","EOF"];for(var r in t){var i=t[r];if(!new RegExp("^"+i+"$","m").test(e))return"<<< '"+i+"'\n"+e+"\n"+i}return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\$/g,"\\$").replace(/\n/g,"\\n")+'"'}},"JavaScript (jQuery)":{escape:function(e){var t="",r=e.split("\n");for(var i in r){0<i&&(t+='\\n" +\n        '),t+='"'+r[i].replace(/\\/g,"\\\\").replace(/"/g,'\\"')}return 0<=i&&(t+='"'),t},mimetype:"application/javascript"},"JavaScript (modern)":{escape:function(e){return"`"+e.replace(/\\/g,"\\\\").replace(/`/g,"\\`").replace(/\$/g,"\\$")+"`"},mimetype:"application/javascript"},Java:{escape:function(e){var t="",r=e.split("\n");for(var i in r){0<i&&(t+='\\n" +\n                '),t+='"'+r[i].replace(/\\/g,"\\\\").replace(/"/g,'\\"')}return 0<=i&&(t+='"'),t}},Perl:{escape:function(e){return"<<'_SPARQL_QUERY_';\n"+e.replace(/#.*\n/g,"")+"\n_SPARQL_QUERY_"}},Python:{escape:function(e){return'"""'+e.replace(/\\/g,"\\\\").replace(/"""/g,'""\\"')+'"""'}},"Python (Pywikibot)":{escape:function(e){return a._languages.Python.escape(e)}},Ruby:{escape:function(e){var t=["SPARQL","QUERY","EOF"];for(var r in t){var i=t[r];if(!new RegExp("^"+i+"$","m").test(e))return"<<'"+i+"'.chop\n"+e+"\n"+i}return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/#/g,"\\#").replace(/\n/g,"\\n")+'"'}},R:{escape:function(e){return"'"+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/\n/g,"\\n")+"'"},mimetype:"text/x-rsrc"},Matlab:{escape:function(e){return"'"+e.replace(/\\/g,"\\\\").replace(/'/g,"''").replace(/\n/g,"\\n")+"'"},mimetype:"text/x-octave"},listeria:{escape:function(e){return e.replace(/\|/g,"{{!}}").replace(/}}/g,"} }")}}}}return e.prototype._endpoint=null,e.prototype.getExamples=function(i){var a=this,e=new o.Deferred,n={},s=[];return o.each(this._languages,function(t,e){n[t]={mimetype:"mimetype"in e?e.mimetype:"text/x-"+t.toLowerCase()};var r=i;"escape"in e&&(r=e.escape(r)),"code"in e?n[t].code=e.code(r):s.push(o.get("examples/code/"+t+".txt",function(e){n[t].code=e.replace("{ENDPOINT_URL}",a._endpoint).replace("{SPARQL_QUERY}",r)},"text"))}),o.when.apply(o,s).then(function(){e.resolve(n)},e.reject.bind(e)),e.promise()},e}(jQuery),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.api=wikibase.queryService.api||{},wikibase.queryService.api.QuerySamples=function(n){"use strict";function e(e,t){if(this._language=e,!t)throw new Error("Invalid method call: query sample settings are missing!");this._apiServer=t.server,this._apiUrl=this._apiServer+t.apiPath,this._pageTitle=t.pageTitle,this._pageUrl=this._apiServer+t.pagePathElement+"Special:MyLanguage/"+this._pageTitle}return e.prototype._language=null,e.prototype.getExamples=function(){var t=this;return t._parsePage(t._pageTitle+"/"+t._language).catch(function(){return t._parsePage(t._pageTitle)}).then(function(e){return t._parseHTML(e.parse.text)})},e.prototype._parsePage=function(e){return this._apiGet({action:"parse",page:e,redirects:"1",prop:"text",wrapoutputclass:"",disableeditsection:"1",smaxage:"600",maxage:"600",disabletoc:"1"})},e.prototype._apiGet=function(e){return n.getJSON(this._apiUrl,n.extend({},e,{format:"json",formatversion:2,origin:"*"})).then(function(e){if("error"in e)throw e.error;return e})},e.prototype._findPrevHeader=function(e){var t=e.prop("tagName");return"H"!==t[0]&&"h"!==t[0]?null:this._findPrev(e,"h"+(t.substr(1)-1))},e.prototype._findPrev=function(e,t){var r=e.prev().filter(t);return 0<r.length?r:0<(r=e.prevUntil(t).last().prev()).length?r:0===(r=e.parent()).length?r:this._findPrev(r,t)},e.prototype._extractTagsFromSPARQL=function(e){var t=e.match(/\b[QP]\d+\b/g);return t||[]},e.prototype._parseHTML=function(e){var t=document.createElement("div"),a=this;t.innerHTML=e;var r=n(t).find(".mw-highlight").map(function(){var e=n(this);e.find(".lineno").remove();var t=e.text().trim(),r=a._findPrev(e,"h2,h3,h4,h5,h6,h7");if(!r||!r.length)return null;var i=r.text().trim();return{title:i,query:t,href:a._pageUrl+"#"+encodeURIComponent(i.replace(/ /g,"_")).replace(/%/g,"."),tags:a._extractTagsFromSPARQL(t),category:a._findPrevHeader(r).text().trim()}}).get();return _.flatten(_.toArray(_.groupBy(r,"category")))},e.prototype.setLanguage=function(e){this._language=e},e.prototype.getLanguage=function(){return this._language},e.prototype.getExamplesPageUrl=function(){return this._pageUrl},e}(jQuery),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.api=wikibase.queryService.api||{},wikibase.queryService.api.Wikibase=function(i){"use strict";var a="en",n={action:"wbsearchentities",format:"json",limit:50,continue:0,language:a,uselang:a},e={action:"query",meta:"siteinfo",format:"json",siprop:"languages"},r={action:"wbgetentities",props:"labels",format:"json",languages:a,languagefallback:"1"},s={action:"wbgetentities",props:"datatype",format:"json"};function t(e,t){this._endpoint="https://www.wikidata.org/w/api.php",e&&(this._endpoint=e),t&&(this._language=t)}return t.prototype._endpoint=null,t.prototype._language=null,t.prototype.searchEntities=function(e,t,r){var i=n;return i.search=e,t&&(i.type=t),this._language||r?(i.language=r||this._language,i.uselang=r||this._language):(i.language=a,i.uselang=a),this._query(i)},t.prototype.getLanguages=function(){return this._query(e)},t.prototype.getLabels=function(e){"string"==typeof e&&(e=[e]);var t=r;return t.ids=e.join("|"),this._language&&(t.languages=this._language),this._query(t)},t.prototype.getDataType=function(t){var e=s,r=i.Deferred();return e.ids=t,this._query(e).done(function(e){e.entities&&e.entities[t]&&e.entities[t].datatype&&r.resolve(e.entities[t].datatype),r.reject()}).fail(r.reject),r.promise()},t.prototype._query=function(e){return i.ajax({url:this._endpoint+"?origin=*&"+jQuery.param(e)})},t.prototype.setLanguage=function(e){this._language=e},t}(jQuery),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.api=wikibase.queryService.api||{},wikibase.queryService.api.Tracking=function(i){"use strict";function e(e){this._endpoint="https://www.wikidata.org/beacon/statsv",e&&(this._endpoint=e)}return e.prototype._endpoint=null,e.prototype.track=function(e,t,r){return t||(t=1),r||(r="c"),"query.wikidata.org"!==location.hostname||/^1|yes/.test(navigator.doNotTrack||window.doNotTrack)?i.when():this._track(e+"="+t+r)},e.prototype._track=function(e){return i.ajax({url:this._endpoint+"?"+e})},e}(jQuery),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.api=wikibase.queryService.api||{},wikibase.queryService.api.UrlShortener=function(n){"use strict";var t={tinyurl:function(e){return this._getTinyUrl(e)},wmf:function(e){return this._getWikiShort(e,"meta.wikimedia.org")},wikibeta:function(e){return this._getWikiShort(e,"en.wikipedia.beta.wmflabs.org")}};function e(e){this._service=t[e]||this._badService}return e.prototype._service=null,e.prototype.shorten=function(e){var t="url-shortener-id-"+n.now();return n.when(this._service.call(this,e)).then(function(e){n("#"+t).html(e)}),'<div class="shortUrl" id="'+t+'">'+wikibase.queryService.ui.i18n.getMessage("wdqs-app-urlshortener-loading")+"</div>"},e.prototype._badService=function(e){return wikibase.queryService.ui.i18n.getMessage("wdqs-app-urlshortener-bad-service")},e.prototype._getTinyUrl=function(e){return'<iframe class="shortUrl" src="//tinyurl.com/api-create.php?url='+encodeURIComponent(e)+'" referrerpolicy="origin" sandbox="" ></iframe>'},e.prototype._getWikiShort=function(e,t){var a=n.Deferred();return n.ajax({url:"https://"+t+"/w/api.php",data:{action:"shortenurl",format:"json",origin:"*",url:e},dataType:"json",method:"POST"}).done(function(e){var t,r,i;t=e&&!e.error&&e.shortenurl&&e.shortenurl.shorturl?e.shortenurl.shorturl:wikibase.queryService.ui.i18n.getMessage("wdqs-app-urlshortener-failed"),r='<!DOCTYPE html><meta charset="utf-8"><pre>'+t.replace(/[<&]/g,function(e){return"<"===e?"&lt;":"&"===e?"&amp;":void 0})+"</pre>",i=n("<iframe>").attr({class:"shortUrl",src:"data:text/html;charset=utf-8,"+encodeURI(r),sandbox:""}),a.resolve(i)}).fail(function(){a.resolve(wikibase.queryService.ui.i18n.getMessage("wdqs-app-urlshortener-failed"))}),a},e}(jQuery),(wikibase=window.wikibase||{}).queryService=wikibase.queryService||{},wikibase.queryService.RdfNamespaces={},function(a,t){"use strict";t.NAMESPACE_SHORTCUTS={Wikidata:{wikibase:"http://wikiba.se/ontology#",wd:"http://www.wikidata.org/entity/",wdt:"http://www.wikidata.org/prop/direct/",wdtn:"http://www.wikidata.org/prop/direct-normalized/",wds:"http://www.wikidata.org/entity/statement/",p:"http://www.wikidata.org/prop/",wdref:"http://www.wikidata.org/reference/",wdv:"http://www.wikidata.org/value/",ps:"http://www.wikidata.org/prop/statement/",psv:"http://www.wikidata.org/prop/statement/value/",psn:"http://www.wikidata.org/prop/statement/value-normalized/",pq:"http://www.wikidata.org/prop/qualifier/",pqv:"http://www.wikidata.org/prop/qualifier/value/",pqn:"http://www.wikidata.org/prop/qualifier/value-normalized/",pr:"http://www.wikidata.org/prop/reference/",prv:"http://www.wikidata.org/prop/reference/value/",prn:"http://www.wikidata.org/prop/reference/value-normalized/",wdno:"http://www.wikidata.org/prop/novalue/",wdata:"http://www.wikidata.org/wiki/Special:EntityData/"},W3C:{rdfs:"http://www.w3.org/2000/01/rdf-schema#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",owl:"http://www.w3.org/2002/07/owl#",skos:"http://www.w3.org/2004/02/skos/core#",xsd:"http://www.w3.org/2001/XMLSchema#",prov:"http://www.w3.org/ns/prov#",ontolex:"http://www.w3.org/ns/lemon/ontolex#"},"Social/Other":{schema:"http://schema.org/",geo:"http://www.opengis.net/ont/geosparql#",geof:"http://www.opengis.net/def/geosparql/function/",dct:"http://purl.org/dc/terms/"},Blazegraph:{bd:"http://www.bigdata.com/rdf#",bds:"http://www.bigdata.com/rdf/search#",gas:"http://www.bigdata.com/rdf/gas#",hint:"http://www.bigdata.com/queryHints#"}},t.ENTITY_TYPES={"http://www.wikidata.org/prop/direct/":"property","http://www.wikidata.org/prop/direct-normalized/":"property","http://www.wikidata.org/prop/":"property","http://www.wikidata.org/prop/novalue/":"property","http://www.wikidata.org/prop/statement/":"property","http://www.wikidata.org/prop/statement/value/":"property","http://www.wikidata.org/prop/statement/value-normalized/":"property","http://www.wikidata.org/prop/qualifier/":"property","http://www.wikidata.org/prop/qualifier/value/":"property","http://www.wikidata.org/prop/qualifier/value-normalized/":"property","http://www.wikidata.org/prop/reference/":"property","http://www.wikidata.org/prop/reference/value/":"property","http://www.wikidata.org/prop/reference/value-normalized/":"property","http://www.wikidata.org/wiki/Special:EntityData/":"item","http://www.wikidata.org/entity/":"item"},t.ALL_PREFIXES=a.map(t.NAMESPACE_SHORTCUTS,function(e){return e}).reduce(function(e,t,r){return a.extend(e,t)},{}),t.STANDARD_PREFIXES={wd:"PREFIX wd: <http://www.wikidata.org/entity/>",wdt:"PREFIX wdt: <http://www.wikidata.org/prop/direct/>",wikibase:"PREFIX wikibase: <http://wikiba.se/ontology#>",p:"PREFIX p: <http://www.wikidata.org/prop/>",ps:"PREFIX ps: <http://www.wikidata.org/prop/statement/>",pq:"PREFIX pq: <http://www.wikidata.org/prop/qualifier/>",rdfs:"PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>",bd:"PREFIX bd: <http://www.bigdata.com/rdf#>"},t.addPrefixes=function(e){a.extend(t.ALL_PREFIXES,e)},t.getPrefixMap=function(r){var i={};return a.each(t.ALL_PREFIXES,function(e,t){r[t]&&(i[e]=r[t])}),i}}(jQuery,wikibase.queryService.RdfNamespaces);